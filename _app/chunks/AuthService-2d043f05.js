var _=Object.defineProperty,v=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var l=(e,t,r)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))C.call(t,r)&&l(e,r,t[r]);if(g)for(var r of g(t))D.call(t,r)&&l(e,r,t[r]);return e},f=(e,t)=>v(e,A(t));import{_ as E}from"./preload-helper-ec9aa979.js";import{D as h,N as L,O as b,P as i,Q as p,R as a,T as o,U as s,V as n,W as m}from"./vendor-a2c512ca.js";const U=h({authState:{type:"Waiting"}}),I=h({auth0Client:null,createProfileHandler:null}),u=w();function w(){return{profileService:{url:"https://profile-service-qxrrdvvq3q-ey.a.run.app"},authConfig:{AUTH_DOMAIN:"targist.eu.auth0.com",AUTH_CLIENT_ID:"lh3A83dJbBkSKISZ5pLwu8aLHaPSLUzW",AUDIENCE:"https://targist.eu.auth0.com/api/v2/"}}}const y=new L,c=new L;function W(){c.next("Login")}function M(){c.next("Logout")}function T(e){return a(e.loginWithPopup()).pipe(p(()=>i(n({type:"LoggedIn"}),a(e.getUser()).pipe(s(t=>({type:"LoggedIn",user:t})),o(t=>n({type:"LoggedIn"}))))),o(t=>n({type:"Error",error:t})))}function H(e){return a(e.isAuthenticated()).pipe(p(t=>t?i(n({type:"LoggedIn"}),a(e.getUser()).pipe(s(r=>({type:"LoggedIn",user:r})),o(r=>n({type:"LoggedIn"})))):n({type:"LoggedOut"})),o(t=>n({type:"Error",error:t})))}function O(e){return i(n({type:"Waiting"}),a(P(e)).pipe(s(()=>({type:"LoggedOut"})),o(t=>n({type:"LoggedOut"}))))}async function P(e){return await e.logout()}async function k(){I.set({auth0Client:await m({domain:u.authConfig.AUTH_DOMAIN,client_id:u.authConfig.AUTH_CLIENT_ID,cacheLocation:"localstorage",audience:u.authConfig.AUDIENCE,useRefreshTokens:!0}),createProfileHandler:(await E(()=>import("./profile-utils-4ed038da.js"),["chunks/profile-utils-4ed038da.js","chunks/vendor-a2c512ca.js","chunks/preload-helper-ec9aa979.js"])).createProfileHandler})}I.subscribe(e=>{y.next(e.auth0Client)});y.pipe(b(e=>i(H(e),c.pipe(p(t=>{switch(t){case"Login":return T(e);case"Logout":return O(e)}}))))).subscribe({next:e=>U.update(t=>f(d({},t),{authState:e}))});export{U as a,W as b,I as c,u as e,k as i,M as l};
