var I=Object.defineProperty,A=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var l=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var L=(t,e,n)=>e in t?I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,u=(t,e)=>{for(var n in e||(e={}))D.call(e,n)&&L(t,n,e[n]);if(l)for(var n of l(e))E.call(e,n)&&L(t,n,e[n]);return t},p=(t,e)=>A(t,C(e));import{D as d,N as f,O as U,P as r,Q as c,R as a,T as o,U as i,V as g,W as b}from"./vendor-9bb32b1c.js";const m=d({authState:{type:"Waiting"}}),w=d({auth0Client:null}),s=T();function T(){return{profileService:{url:"http://127.0.0.1:8080"},authConfig:{AUTH_DOMAIN:"targist.eu.auth0.com",AUTH_CLIENT_ID:"lh3A83dJbBkSKISZ5pLwu8aLHaPSLUzW",AUDIENCE:"https://targist.eu.auth0.com/api/v2/"}}}const y=new f,h=new f;function x(){h.next("Login")}function H(){h.next("Logout")}function W(t){return r(a({type:"Waiting"}),o(t.loginWithPopup()).pipe(c(()=>r(a({type:"LoggedIn"}),o(t.getUser()).pipe(g(e=>({type:"LoggedIn",user:e})),i(e=>a({type:"LoggedIn"}))))),i(e=>a({type:"Error",error:e}))))}function v(t){return r(a({type:"Waiting"}),o(t.isAuthenticated()).pipe(c(e=>e?r(a({type:"LoggedIn"}),o(t.getUser()).pipe(g(n=>({type:"LoggedIn",user:n})),i(n=>a({type:"LoggedIn"})))):a({type:"LoggedOut"})),i(e=>a({type:"Error",error:e}))))}function N(t){return r(a({type:"Waiting"}),o(O(t)).pipe(g(()=>({type:"LoggedOut"})),i(e=>a({type:"LoggedOut"}))))}async function O(t){return await t.logout()}async function M(){const t=await b({domain:s.authConfig.AUTH_DOMAIN,client_id:s.authConfig.AUTH_CLIENT_ID,cacheLocation:"localstorage",audience:s.authConfig.AUDIENCE,useRefreshTokens:!0});w.update(e=>p(u({},e),{auth0Client:t})),y.next(t)}y.pipe(U(t=>r(v(t),h.pipe(c(e=>{switch(e){case"Login":return W(t);case"Logout":return N(t)}}))))).subscribe({next:t=>m.update(e=>p(u({},e),{authState:t}))});export{m as a,H as b,w as c,s as e,M as i,x as l};
