var y=Object.defineProperty,A=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var l=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var L=(t,e,n)=>e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,u=(t,e)=>{for(var n in e||(e={}))D.call(e,n)&&L(t,n,e[n]);if(l)for(var n of l(e))E.call(e,n)&&L(t,n,e[n]);return t},p=(t,e)=>A(t,b(e));import{D as d,N as f,O as U,P as a,Q as c,R as r,T as o,U as i,V as g,W as C}from"./vendor-9bb32b1c.js";const m=d({authState:{type:"Waiting"}}),T=d({auth0Client:null}),s=W();function W(){return{profileService:{url:"http://127.0.0.1:8080"},authConfig:{AUTH_DOMAIN:"targist.eu.auth0.com",AUTH_CLIENT_ID:"lh3A83dJbBkSKISZ5pLwu8aLHaPSLUzW",AUDIENCE:"https://targist.eu.auth0.com/api/v2/"}}}const I=new f,h=new f;function x(){h.next("Login")}function H(){h.next("Logout")}function v(t){return a(r({type:"Waiting"}),o(t.loginWithPopup()).pipe(c(()=>a(r({type:"LoggedIn"}),o(t.getUser()).pipe(g(e=>({type:"LoggedIn",user:e})),i(e=>r({type:"LoggedIn"}))))),i(e=>r({type:"Error",error:e}))))}function w(t){return a(r({type:"Waiting"}),o(t.isAuthenticated()).pipe(c(e=>e?a(r({type:"LoggedIn"}),o(t.getUser()).pipe(g(n=>({type:"LoggedIn",user:n})),i(n=>r({type:"LoggedIn"})))):r({type:"LoggedOut"})),i(e=>r({type:"Error",error:e}))))}function N(t){return a(r({type:"Waiting"}),o(O(t)).pipe(g(()=>({type:"LoggedOut"})),i(e=>r({type:"LoggedOut"}))))}async function O(t){return await t.logout()}function M(){o(C({domain:s.authConfig.AUTH_DOMAIN,client_id:s.authConfig.AUTH_CLIENT_ID,cacheLocation:"localstorage",audience:s.authConfig.AUDIENCE,useRefreshTokens:!0})).subscribe({next:t=>{T.update(e=>p(u({},e),{auth0Client:t})),I.next(t)}})}I.pipe(U(t=>a(w(t),h.pipe(c(e=>{switch(e){case"Login":return v(t);case"Logout":return N(t)}}))))).subscribe({next:t=>m.update(e=>p(u({},e),{authState:t}))});export{m as a,H as b,M as c,T as d,s as e,x as l};
