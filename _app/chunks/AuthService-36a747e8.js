var y=Object.defineProperty,I=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var g=(t,e,n)=>e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||(e={}))A.call(e,n)&&g(t,n,e[n]);if(c)for(var n of c(e))T.call(e,n)&&g(t,n,e[n]);return t},l=(t,e)=>I(t,b(e));import{D as U,N as f,O as W,P as o,Q as u,R as r,T as a,U as i,V as p,W as m}from"./vendor-f171eead.js";const w=U({authState:{type:"Waiting"}}),h=D();function D(){return{profileService:{url:"http://127.0.0.1:8080"},authConfig:{AUTH_DOMAIN:"targist.eu.auth0.com",AUTH_CLIENT_ID:"lh3A83dJbBkSKISZ5pLwu8aLHaPSLUzW"}}}const d=new f,s=new f;function C(){s.next("Login")}function H(){s.next("Logout")}function O(t){return o(r({type:"Waiting"}),a(t.loginWithPopup()).pipe(u(()=>o(r({type:"LoggedIn"}),a(t.getUser()).pipe(p(e=>({type:"LoggedIn",user:e})),i(e=>r({type:"LoggedIn"}))))),i(e=>r({type:"Error",error:e}))))}function S(t){return o(r({type:"Waiting"}),a(t.isAuthenticated()).pipe(u(e=>e?o(r({type:"LoggedIn"}),a(t.getUser()).pipe(p(n=>({type:"LoggedIn",user:n})),i(n=>r({type:"LoggedIn"})))):r({type:"LoggedOut"})),i(e=>r({type:"Error",error:e}))))}function _(t){return o(r({type:"Waiting"}),a(v(t)).pipe(p(()=>({type:"LoggedOut"})),i(e=>r({type:"LoggedOut"}))))}async function v(t){return await t.logout()}function N(){a(m({domain:h.authConfig.AUTH_DOMAIN,client_id:h.authConfig.AUTH_CLIENT_ID,cacheLocation:"localstorage",useRefreshTokens:!0})).subscribe({next:t=>d.next(t)})}d.pipe(W(t=>o(S(t),s.pipe(u(e=>{switch(e){case"Login":return O(t);case"Logout":return _(t)}}))))).subscribe({next:t=>w.update(e=>l(L({},e),{authState:t}))});export{w as a,C as b,N as c,h as e,H as l};
