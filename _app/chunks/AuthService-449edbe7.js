import{N as L,O as g,P as d,Q as c,R as r,T as o,U as u,V as a,W as n,X as y}from"./vendor-b5f520a5.js";const p={authConfig:{AUTH_DOMAIN:"dev-pd9rbm-e.us.auth0.com",AUTH_CLIENT_ID:"toLz0kLdK4IAvbggzmUDqysRsswY1E4W"}};function O(){i.next("Login")}function T(){i.next("Logout")}function I(e){return r(n({type:"Waiting"}),o(e.loginWithPopup()).pipe(c(()=>r(n({type:"LoggedIn"}),o(e.getUser()).pipe(u(t=>({type:"LoggedIn",user:t})),a(t=>n({type:"LoggedIn"}))))),a(t=>n({type:"Error",error:t}))))}function l(e){return r(n({type:"Waiting"}),o(e.isAuthenticated()).pipe(c(t=>t?r(n({type:"LoggedIn"}),o(e.getUser()).pipe(u(s=>({type:"LoggedIn",user:s})),a(s=>n({type:"LoggedIn"})))):n({type:"LoggedOut"})),a(t=>n({type:"Error",error:t}))))}function f(e){return r(n({type:"Waiting"}),o(b(e)).pipe(u(()=>({type:"LoggedOut"})),a(t=>n({type:"LoggedOut"}))))}async function b(e){return await e.logout()}function U(){o(y({domain:p.authConfig.AUTH_DOMAIN,client_id:p.authConfig.AUTH_CLIENT_ID,cacheLocation:"localstorage",useRefreshTokens:!0})).subscribe({next:e=>h.next(e)})}const h=new L,i=new g("CheckIsAuthenticated"),A=new g({type:"LoggedOut"});d([h,i]).pipe(c(e=>{const t=e[0],s=e[1];switch(console.log("Oh yeah"),s){case"CheckIsAuthenticated":return l(t);case"Login":return I(t);case"Logout":return f(t)}})).subscribe({next:e=>A.next(e)});export{A as a,O as b,U as c,T as l};
