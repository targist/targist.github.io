var f=Object.defineProperty,b=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var m=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var c=(t,e,n)=>e in t?f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||(e={}))m.call(e,n)&&c(t,n,e[n]);if(p)for(var n of p(e))v.call(e,n)&&c(t,n,e[n]);return t},d=(t,e)=>b(t,A(e));import{N as T,O as h,P as U,Q as r,R as i,T as o,U as a,V as u,W as s,X as w}from"./vendor-16de999b.js";const y=new T({authState:{type:"Waiting"}}),l={authConfig:{AUTH_DOMAIN:"dev-pd9rbm-e.us.auth0.com",AUTH_CLIENT_ID:"toLz0kLdK4IAvbggzmUDqysRsswY1E4W"}},I=new h,g=new h;function C(){g.next("Login")}function N(){g.next("Logout")}function x(t){return r(o({type:"Waiting"}),a(t.loginWithPopup()).pipe(i(()=>r(o({type:"LoggedIn"}),a(t.getUser()).pipe(s(e=>({type:"LoggedIn",user:e})),u(e=>o({type:"LoggedIn"}))))),u(e=>o({type:"Error",error:e}))))}function O(t){return r(o({type:"Waiting"}),a(t.isAuthenticated()).pipe(i(e=>e?r(o({type:"LoggedIn"}),a(t.getUser()).pipe(s(n=>({type:"LoggedIn",user:n})),u(n=>o({type:"LoggedIn"})))):o({type:"LoggedOut"})),u(e=>o({type:"Error",error:e}))))}function W(t){return r(o({type:"Waiting"}),a(_(t)).pipe(s(()=>({type:"LoggedOut"})),u(e=>o({type:"LoggedOut"}))))}async function _(t){return await t.logout()}function S(){a(w({domain:l.authConfig.AUTH_DOMAIN,client_id:l.authConfig.AUTH_CLIENT_ID,cacheLocation:"localstorage",useRefreshTokens:!0})).subscribe({next:t=>I.next(t)})}I.pipe(U(t=>r(O(t),g.pipe(i(e=>{switch(e){case"Login":return x(t);case"Logout":return W(t)}}))))).subscribe({next:t=>y.next(d(L({},y.value),{authState:t}))});export{C as a,S as c,y as g,N as l};
