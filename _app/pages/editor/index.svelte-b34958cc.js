import{S as B,i as $,s as X,e as L,c as z,a as N,d as C,b as P,g as x,E as V,l as S,n as K,o as A,p as G,q as k,t as Y,h as Z,j as J,w as T,x as I,y as D,B as U,H as re,V as _e,P as me,v as be,W as ve}from"../../chunks/index-f40bfaf5.js";import{g as ye,c as pe}from"../../chunks/_commonjsHelpers-7d66b65f.js";import{r as we}from"../../chunks/singletons-0b89c4cc.js";import{_ as O}from"../../chunks/lodash-96483f6c.js";import{o as Ee,c as Ce,a as He,S as Se,B as ke,s as Me,m as ee,L as ie}from"../../chunks/minimal-f6c45737.js";import{B as xe}from"../../chunks/BlogPage-04021cd3.js";import"../../chunks/StandardTopBar-36cfadc5.js";/* empty css                       */function Ae(h,t){return t===void 0&&(t=He),Ee(function(s,a){var f=null,r=null,n=null,e=function(){if(f){f.unsubscribe(),f=null;var o=r;r=null,a.next(o)}};function i(){var o=n+h,c=t.now();if(c<o){f=this.schedule(void 0,o-c),a.add(f);return}e()}s.subscribe(Ce(a,function(o){r=o,n=t.now(),f||(f=t.schedule(i,h),a.add(f))},function(){e(),a.complete()},void 0,function(){r=f=null}))})}var he={exports:{}};(function(h){var t=(()=>{var s=Object.defineProperty,a=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(u,d,b)=>d in u?s(u,d,{enumerable:!0,configurable:!0,writable:!0,value:b}):u[d]=b,e=(u,d)=>{for(var b in d||(d={}))f.call(d,b)&&n(u,b,d[b]);if(a)for(var b of a(d))r.call(d,b)&&n(u,b,d[b]);return u},i=u=>s(u,"__esModule",{value:!0}),o=(u,d)=>{i(u);for(var b in d)s(u,b,{get:d[b],enumerable:!0})},c={};o(c,{DEFAULT_UUID_LENGTH:()=>l,default:()=>_});var m="4.4.4",l=6,p={dictionary:"alphanum",shuffle:!0,debug:!1,length:l},g=class extends Function{constructor(u={}){super();this.dictIndex=0,this.dictRange=[],this.lowerBound=0,this.upperBound=0,this.dictLength=0,this._digit_first_ascii=48,this._digit_last_ascii=58,this._alpha_lower_first_ascii=97,this._alpha_lower_last_ascii=123,this._hex_last_ascii=103,this._alpha_upper_first_ascii=65,this._alpha_upper_last_ascii=91,this._number_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii]},this._alpha_dict_ranges={lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._alpha_lower_dict_ranges={lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]},this._alpha_upper_dict_ranges={upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._alphanum_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._alphanum_lower_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]},this._alphanum_upper_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._hex_dict_ranges={decDigits:[this._digit_first_ascii,this._digit_last_ascii],alphaDigits:[this._alpha_lower_first_ascii,this._hex_last_ascii]},this.log=(...y)=>{const E=[...y];if(E[0]=`[short-unique-id] ${y[0]}`,this.debug===!0&&typeof console!="undefined"&&console!==null)return console.log(...E)},this.setDictionary=(y,E)=>{let H;if(y&&Array.isArray(y)&&y.length>1)H=y;else{H=[];let M;this.dictIndex=M=0;const R=`_${y}_dict_ranges`,F=this[R];Object.keys(F).forEach(j=>{const Q=j;for(this.dictRange=F[Q],this.lowerBound=this.dictRange[0],this.upperBound=this.dictRange[1],this.dictIndex=M=this.lowerBound;this.lowerBound<=this.upperBound?M<this.upperBound:M>this.upperBound;this.dictIndex=this.lowerBound<=this.upperBound?M+=1:M-=1)H.push(String.fromCharCode(this.dictIndex))})}E&&(H=H.sort(()=>Math.random()-.5)),this.dict=H,this.dictLength=this.dict.length,this.counter=0},this.seq=()=>this.sequentialUUID(),this.sequentialUUID=()=>{let y,E,H="";y=this.counter;do E=y%this.dictLength,y=Math.trunc(y/this.dictLength),H+=this.dict[E];while(y!==0);return this.counter+=1,H},this.randomUUID=(y=this.uuidLength||l)=>{let E,H,M;if(y===null||typeof y=="undefined"||y<1)throw new Error("Invalid UUID Length Provided");for(E="",M=0;M<y;M+=1)H=parseInt((Math.random()*this.dictLength).toFixed(0),10)%this.dictLength,E+=this.dict[H];return E},this.availableUUIDs=(y=this.uuidLength)=>parseFloat(Math.pow([...new Set(this.dict)].length,y).toFixed(0)),this.approxMaxBeforeCollision=(y=this.availableUUIDs(this.uuidLength))=>parseFloat(Math.sqrt(Math.PI/2*y).toFixed(20)),this.collisionProbability=(y=this.availableUUIDs(this.uuidLength),E=this.uuidLength)=>parseFloat((this.approxMaxBeforeCollision(y)/this.availableUUIDs(E)).toFixed(20)),this.uniqueness=(y=this.availableUUIDs(this.uuidLength))=>{const E=parseFloat((1-this.approxMaxBeforeCollision(y)/y).toFixed(20));return E>1?1:E<0?0:E},this.getVersion=()=>this.version,this.stamp=y=>{if(typeof y!="number"||y<10)throw new Error("Param finalLength must be number greater than 10");const E=Math.floor(+new Date/1e3).toString(16),H=y-9,M=Math.round(Math.random()*(H>15?15:H)),R=this.randomUUID(H);return`${R.substr(0,M)}${E}${R.substr(M)}${M.toString(16)}`},this.parseStamp=y=>{if(y.length<10)throw new Error("Stamp length invalid");const E=parseInt(y.substr(y.length-1,1),16);return new Date(parseInt(y.substr(E,8),16)*1e3)};const d=e(e({},p),u);this.counter=0,this.debug=!1,this.dict=[],this.version=m;const{dictionary:b,shuffle:v,length:w}=d;return this.uuidLength=w,this.setDictionary(b,v),this.debug=d.debug,this.log(this.dict),this.log(`Generator instantiated with Dictionary Size ${this.dictLength}`),new Proxy(this,{apply:(y,E,H)=>this.randomUUID(...H)})}},_=g;return _.default=g,c})();h.exports=t.default,typeof window!="undefined"&&(t=t.default)})(he);var Oe=ye(he.exports);function ne(h,t){return t==0?{firstHalf:h,secondHalf:""}:{firstHalf:h.slice(0,t),secondHalf:h.slice(t)}}function Pe(h){const{blockId:t,uiArticle:s}=h,a=s.editorData.article.blocks.findIndex(f=>t==f.id);return{blockIndex:a,block:a<0?void 0:s.editorData.article.blocks[a]}}function W(h){const{blockId:t,uiArticle:s,updateBlocks:a}=h,{block:f,blockIndex:r}=Pe({uiArticle:s,blockId:t});if(r<0)return console.log("block with id ",t," not found"),s;const{editorData:{article:{id:n,version:e,blocks:i,authorId:o},focus:c},history:{index:m,momento:l}}=s,p=a({block:f,allBlocks:i,blockIndex:r,focus:c}),g=p.updateVersion(e),_={article:{id:n,version:g,blocks:p.allBlocks,authorId:o},focus:p.focus},u=g!=e?[...l.slice(O.max([0,l.length-1e3]),m+1),_]:l,d=g!=e?m+1:m;return{editorData:_,history:{index:d,momento:u}}}function Re(h){const{backspace:t}=h;return{isHandler:()=>t!=null,applyChange:s=>{const{editorData:{focus:{localized:a,range:f},article:r}}=s;if(!a)return s;const{blockId:n,cursor:e}=a;return W({blockId:n,uiArticle:s,updateBlocks:({block:i,allBlocks:o,blockIndex:c,focus:m})=>{if(!i.content.textContent)return console.log("Not handled delete if not text content"),{allBlocks:o,focus:m,updateVersion:u=>u+1};const{type:l,value:p}=i.content.textContent,{firstHalf:g,secondHalf:_}=ne(p,e);if(g.length>0)return{focus:m,allBlocks:[...o.slice(0,c),{id:n,version:i.version+1,content:{textContent:{type:l,value:g.slice(0,g.length-1)+_}}},...o.slice(c+1)],updateVersion:u=>u+1};if(c==0)return{allBlocks:o,focus:m,updateVersion:u=>u+1};if(o[c-1].content.textContent){const u=o[c-1];return{focus:{localized:{cursor:e,blockId:u.id},range:void 0},allBlocks:[...o.slice(0,c-1),{id:u.id,version:u.version+1,content:{textContent:{type:u.content.textContent.type,value:u.content.textContent.value+i.content.textContent.value}}},...o.slice(c+1)],updateVersion:d=>d+1}}else return{focus:m,allBlocks:[...o.slice(0,c-1),...o.slice(c)],updateVersion:u=>u+1}}})}}}function Te(h){const{carriageReturn:t}=h;return{isHandler:()=>t!=null,applyChange:s=>{const{editorData:{focus:{localized:a,range:f},article:r}}=s;if(!a)return s;const{blockId:n,cursor:e}=a;return W({blockId:n,uiArticle:s,updateBlocks:({block:i,allBlocks:o,blockIndex:c,focus:m})=>{if(!i.content.textContent)return console.log("Not handled delete if not text content"),{allBlocks:o,focus:m,updateVersion:d=>d+1};const{type:l,value:p}=i.content.textContent,{firstHalf:g,secondHalf:_}=ne(p,e),u=te();return{focus:{localized:{blockId:u,cursor:-_.length},range:void 0},allBlocks:[...o.slice(0,c),{id:n,version:i.version+1,content:{textContent:{type:l,value:g}}},{id:u,version:0,content:{textContent:{type:l,value:_}}},...o.slice(c+1)],updateVersion:d=>d+1}}})}}}function Ie(h){const{insertText:t}=h;return{isHandler:()=>t!=null,applyChange:s=>{const{editorData:{article:a,focus:f}}=s;switch(!0){case f.localized!=null:{const{blockId:r,cursor:n}=f.localized;return W({blockId:r,uiArticle:s,updateBlocks:({block:e,allBlocks:i,blockIndex:o,focus:c})=>{const{content:m,version:l}=e;if(m.textContent==null)return{allBlocks:i,focus:c,updateVersion:_=>_+1};const p=ne(m.textContent.value,n),g=p.firstHalf+t.value+p.secondHalf;return{allBlocks:[...i.slice(0,o),{id:r,version:l+1,content:{textContent:{type:m.textContent.type,value:g}}},...i.slice(o+1)],focus:c,updateVersion:_=>_+1}}})}case f.range!=null:{console.log("Not handled");break}default:console.log("Unhandled focus case ",f)}return s}}}function De(h){const{moveCursorLeft:t}=h;return{isHandler:()=>t!=null,applyChange:s=>{const{blockId:a,cursor:f}=s.editorData.focus.localized,{steps:r}=t;return W({blockId:a,uiArticle:s,updateBlocks:({block:n,allBlocks:e,blockIndex:i,focus:o})=>!o.localized||!n.content.textContent?(console.log("Not supported case , should be removed by end"),{allBlocks:e,focus:o,updateVersion:O.identity}):o.localized.cursor-1<-n.content.textContent.value.length?i>0?{allBlocks:e,focus:{localized:{blockId:e[i-1].id,cursor:0},range:void 0},updateVersion:O.identity}:{allBlocks:e,focus:o,updateVersion:O.identity}:{allBlocks:e,focus:{localized:{blockId:a,cursor:O.max([o.localized.cursor-r,-n.content.textContent.value.length])},range:void 0},updateVersion:O.identity}})}}}function Ue(h){const{moveCursorRight:t}=h;return{isHandler:()=>t!=null,applyChange:s=>{const{blockId:a,cursor:f}=s.editorData.focus.localized,{steps:r}=t;return W({blockId:a,uiArticle:s,updateBlocks:({block:n,allBlocks:e,blockIndex:i,focus:o})=>!o.localized||!n.content.textContent?(console.log("Not supported case , should be removed by end"),{allBlocks:e,focus:o,updateVersion:O.identity}):o.localized.cursor<0?{allBlocks:e,focus:{localized:{blockId:a,cursor:O.min([f+r,0])},range:void 0},updateVersion:O.identity}:i<e.length-1?{allBlocks:e,focus:{localized:{blockId:e[i+1].id,cursor:-e[i+1].content.textContent.value.length},range:void 0},updateVersion:O.identity}:{allBlocks:e,focus:o,updateVersion:O.identity}})}}}function qe(h){const{redo:t}=h;return{isHandler:()=>t!=null,applyChange:s=>{const{steps:a}=t,{editorData:f,history:{index:r,momento:n}}=s,e=O.min([n.length-1,r+a]);return{editorData:n[e],history:{index:e,momento:n}}}}}function Le(h){const{undo:t}=h;return{isHandler:()=>t!=null,applyChange:s=>{const{steps:a}=t,{editorData:f,history:{index:r,momento:n}}=s,e=O.max([r-a,0]);return{editorData:n[e],history:{index:e,momento:n}}}}}const ze=[Ie,Re,De,Ue,Te,Le,qe],Ne=30,Fe=(h,t=je)=>{const s=new Se,a=new ke(h);s.pipe(Me((r,n)=>t(r,n),h)).subscribe(a);const f=r=>s.next(r);return{uiArticleObservable:a,getUIArticle:a.getValue,uiArticleReadable:we(h,r=>{const n=a.pipe(Ae(1e3/Ne)).subscribe({next:r});return()=>n.unsubscribe()}),dispatch:f}},je=(h,t)=>t.operations.reduce((a,f)=>{for(const r of ze){const n=r(f);if(n.isHandler())return n.applyChange(a)}return console.log("No handler found for operation",f),a},h),te=new Oe({length:10});var Ve={exports:{}};(function(h,t){(function(s,a){h.exports=a()})(pe,function(){return s={418:function(f,r){(function(n,e){for(var i in e)n[i]=e[i]})(r,function(n){var e={};function i(o){if(e[o])return e[o].exports;var c=e[o]={i:o,l:!1,exports:{}};return n[o].call(c.exports,c,c.exports,i),c.l=!0,c.exports}return i.m=n,i.c=e,i.i=function(o){return o},i.d=function(o,c,m){i.o(o,c)||Object.defineProperty(o,c,{configurable:!1,enumerable:!0,get:m})},i.n=function(o){var c=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(c,"a",c),c},i.o=function(o,c){return Object.prototype.hasOwnProperty.call(o,c)},i.p="",i(i.s=1)}([function(n,e,i){Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),c=function(){function m(l,p){l===void 0&&(l={}),p===void 0&&(p={splitValues:!1});var g,_=this;this.headersMap={},l&&(typeof Headers!="undefined"&&l instanceof Headers?o.getHeaderKeys(l).forEach(function(u){o.getHeaderValues(l,u).forEach(function(d){p.splitValues?_.append(u,o.splitHeaderValue(d)):_.append(u,d)})}):typeof(g=l)=="object"&&typeof g.headersMap=="object"&&typeof g.forEach=="function"?l.forEach(function(u,d){_.append(u,d)}):typeof Map!="undefined"&&l instanceof Map?l.forEach(function(u,d){_.append(d,u)}):typeof l=="string"?this.appendFromString(l):typeof l=="object"&&Object.getOwnPropertyNames(l).forEach(function(u){var d=l[u];Array.isArray(d)?d.forEach(function(b){_.append(u,b)}):_.append(u,d)}))}return m.prototype.appendFromString=function(l){for(var p=l.split(`\r
`),g=0;g<p.length;g++){var _=p[g],u=_.indexOf(":");if(u>0){var d=_.substring(0,u).trim(),b=_.substring(u+1).trim();this.append(d,b)}}},m.prototype.delete=function(l,p){var g=o.normalizeName(l);if(p===void 0)delete this.headersMap[g];else{var _=this.headersMap[g];if(_){var u=_.indexOf(p);u>=0&&_.splice(u,1),_.length===0&&delete this.headersMap[g]}}},m.prototype.append=function(l,p){var g=this,_=o.normalizeName(l);Array.isArray(this.headersMap[_])||(this.headersMap[_]=[]),Array.isArray(p)?p.forEach(function(u){g.headersMap[_].push(o.normalizeValue(u))}):this.headersMap[_].push(o.normalizeValue(p))},m.prototype.set=function(l,p){var g=o.normalizeName(l);if(Array.isArray(p)){var _=[];p.forEach(function(u){_.push(o.normalizeValue(u))}),this.headersMap[g]=_}else this.headersMap[g]=[o.normalizeValue(p)]},m.prototype.has=function(l,p){var g=this.headersMap[o.normalizeName(l)];if(!Array.isArray(g))return!1;if(p!==void 0){var _=o.normalizeValue(p);return g.indexOf(_)>=0}return!0},m.prototype.get=function(l){var p=this.headersMap[o.normalizeName(l)];return p!==void 0?p.concat():[]},m.prototype.forEach=function(l){var p=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(g){l(g,p.headersMap[g])},this)},m.prototype.toHeaders=function(){if(typeof Headers!="undefined"){var l=new Headers;return this.forEach(function(p,g){g.forEach(function(_){l.append(p,_)})}),l}throw new Error("Headers class is not defined")},m}();e.BrowserHeaders=c},function(n,e,i){Object.defineProperty(e,"__esModule",{value:!0});var o=i(0);e.BrowserHeaders=o.BrowserHeaders},function(n,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.iterateHeaders=function(o,c){for(var m=o[Symbol.iterator](),l=m.next();!l.done;)c(l.value[0]),l=m.next()},e.iterateHeadersKeys=function(o,c){for(var m=o.keys(),l=m.next();!l.done;)c(l.value),l=m.next()}},function(n,e,i){Object.defineProperty(e,"__esModule",{value:!0});var o=i(2);e.normalizeName=function(c){if(typeof c!="string"&&(c=String(c)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(c))throw new TypeError("Invalid character in header field name");return c.toLowerCase()},e.normalizeValue=function(c){return typeof c!="string"&&(c=String(c)),c},e.getHeaderValues=function(c,m){var l=c;if(l instanceof Headers&&l.getAll)return l.getAll(m);var p=l.get(m);return p&&typeof p=="string"?[p]:p},e.getHeaderKeys=function(c){var m=c,l={},p=[];return m.keys?o.iterateHeadersKeys(m,function(g){l[g]||(l[g]=!0,p.push(g))}):m.forEach?m.forEach(function(g,_){l[_]||(l[_]=!0,p.push(_))}):o.iterateHeaders(m,function(g){var _=g[0];l[_]||(l[_]=!0,p.push(_))}),p},e.splitHeaderValue=function(c){var m=[];return c.split(", ").forEach(function(l){l.split(",").forEach(function(p){m.push(p)})}),m}}]))},617:function(f,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.ChunkParser=r.ChunkType=r.encodeASCII=r.decodeASCII=void 0;var e,i=n(65);function o(u){return(d=u)===9||d===10||d===13||u>=32&&u<=126;var d}function c(u){for(var d=0;d!==u.length;++d)if(!o(u[d]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(u))}function m(u){return(128&u.getUint8(0))==128}function l(u){return u.getUint32(1,!1)}function p(u,d,b){return u.byteLength-d>=b}function g(u,d,b){if(u.slice)return u.slice(d,b);var v=u.length;b!==void 0&&(v=b);for(var w=new Uint8Array(v-d),y=0,E=d;E<v;E++)w[y++]=u[E];return w}r.decodeASCII=c,r.encodeASCII=function(u){for(var d=new Uint8Array(u.length),b=0;b!==u.length;++b){var v=u.charCodeAt(b);if(!o(v))throw new Error("Metadata contains invalid ASCII");d[b]=v}return d},function(u){u[u.MESSAGE=1]="MESSAGE",u[u.TRAILERS=2]="TRAILERS"}(e=r.ChunkType||(r.ChunkType={}));var _=function(){function u(){this.buffer=null,this.position=0}return u.prototype.parse=function(d,b){if(d.length===0&&b)return[];var v,w=[];if(this.buffer==null)this.buffer=d,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=d,this.position=0;else{var y=this.buffer.byteLength-this.position,E=new Uint8Array(y+d.byteLength),H=g(this.buffer,this.position);E.set(H,0);var M=new Uint8Array(d);E.set(M,y),this.buffer=E,this.position=0}for(;;){if(!p(this.buffer,this.position,5))return w;var R=g(this.buffer,this.position,this.position+5),F=new DataView(R.buffer,R.byteOffset,R.byteLength),j=l(F);if(!p(this.buffer,this.position,5+j))return w;var Q=g(this.buffer,this.position+5,this.position+5+j);if(this.position+=5+j,m(F))return w.push({chunkType:e.TRAILERS,trailers:(v=Q,new i.Metadata(c(v)))}),w;w.push({chunkType:e.MESSAGE,data:Q})}},u}();r.ChunkParser=_},8:function(f,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.httpStatusToCode=r.Code=void 0,function(e){e[e.OK=0]="OK",e[e.Canceled=1]="Canceled",e[e.Unknown=2]="Unknown",e[e.InvalidArgument=3]="InvalidArgument",e[e.DeadlineExceeded=4]="DeadlineExceeded",e[e.NotFound=5]="NotFound",e[e.AlreadyExists=6]="AlreadyExists",e[e.PermissionDenied=7]="PermissionDenied",e[e.ResourceExhausted=8]="ResourceExhausted",e[e.FailedPrecondition=9]="FailedPrecondition",e[e.Aborted=10]="Aborted",e[e.OutOfRange=11]="OutOfRange",e[e.Unimplemented=12]="Unimplemented",e[e.Internal=13]="Internal",e[e.Unavailable=14]="Unavailable",e[e.DataLoss=15]="DataLoss",e[e.Unauthenticated=16]="Unauthenticated"}(n=r.Code||(r.Code={})),r.httpStatusToCode=function(e){switch(e){case 0:return n.Internal;case 200:return n.OK;case 400:return n.InvalidArgument;case 401:return n.Unauthenticated;case 403:return n.PermissionDenied;case 404:return n.NotFound;case 409:return n.Aborted;case 412:return n.FailedPrecondition;case 429:return n.ResourceExhausted;case 499:return n.Canceled;case 500:return n.Unknown;case 501:return n.Unimplemented;case 503:return n.Unavailable;case 504:return n.DeadlineExceeded;default:return n.Unknown}}},934:function(f,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.client=void 0;var e=n(65),i=n(617),o=n(8),c=n(346),m=n(57),l=n(882);r.client=function(_,u){return new p(_,u)};var p=function(){function _(u,d){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new i.ChunkParser,this.methodDefinition=u,this.props=d,this.createTransport()}return _.prototype.createTransport=function(){var u=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,d={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:u,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(d):this.transport=m.makeDefaultTransport(d)},_.prototype.onTransportHeaders=function(u,d){if(this.props.debug&&c.debug("onHeaders",u,d),this.closed)this.props.debug&&c.debug("grpc.onHeaders received after request was closed - ignoring");else if(d!==0){this.responseHeaders=u,this.props.debug&&c.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var b=g(u);this.props.debug&&c.debug("onHeaders.gRPCStatus",b);var v=b&&b>=0?b:o.httpStatusToCode(d);this.props.debug&&c.debug("onHeaders.code",v);var w=u.get("grpc-message")||[];if(this.props.debug&&c.debug("onHeaders.gRPCMessage",w),this.rawOnHeaders(u),v!==o.Code.OK){var y=this.decodeGRPCStatus(w[0]);this.rawOnError(v,y,u)}}},_.prototype.onTransportChunk=function(u){var d=this;if(this.closed)this.props.debug&&c.debug("grpc.onChunk received after request was closed - ignoring");else{var b=[];try{b=this.parser.parse(u)}catch(v){return this.props.debug&&c.debug("onChunk.parsing error",v,v.message),void this.rawOnError(o.Code.Internal,"parsing error: "+v.message)}b.forEach(function(v){if(v.chunkType===i.ChunkType.MESSAGE){var w=d.methodDefinition.responseType.deserializeBinary(v.data);d.rawOnMessage(w)}else v.chunkType===i.ChunkType.TRAILERS&&(d.responseHeaders?(d.responseTrailers=new e.Metadata(v.trailers),d.props.debug&&c.debug("onChunk.trailers",d.responseTrailers)):(d.responseHeaders=new e.Metadata(v.trailers),d.rawOnHeaders(d.responseHeaders)))})}},_.prototype.onTransportEnd=function(){if(this.props.debug&&c.debug("grpc.onEnd"),this.closed)this.props.debug&&c.debug("grpc.onEnd received after request was closed - ignoring");else if(this.responseTrailers!==void 0){var u=g(this.responseTrailers);if(u!==null){var d=this.responseTrailers.get("grpc-message"),b=this.decodeGRPCStatus(d[0]);this.rawOnEnd(u,b,this.responseTrailers)}else this.rawOnError(o.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(this.responseHeaders===void 0)return void this.rawOnError(o.Code.Unknown,"Response closed without headers");var v=g(this.responseHeaders),w=this.responseHeaders.get("grpc-message");if(this.props.debug&&c.debug("grpc.headers only response ",v,w),v===null)return void this.rawOnEnd(o.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var y=this.decodeGRPCStatus(w[0]);this.rawOnEnd(v,y,this.responseHeaders)}},_.prototype.decodeGRPCStatus=function(u){if(!u)return"";try{return decodeURIComponent(u)}catch{return u}},_.prototype.rawOnEnd=function(u,d,b){var v=this;this.props.debug&&c.debug("rawOnEnd",u,d,b),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(w){if(!v.closed)try{w(u,d,b)}catch(y){setTimeout(function(){throw y},0)}}))},_.prototype.rawOnHeaders=function(u){this.props.debug&&c.debug("rawOnHeaders",u),this.completed||this.onHeadersCallbacks.forEach(function(d){try{d(u)}catch(b){setTimeout(function(){throw b},0)}})},_.prototype.rawOnError=function(u,d,b){var v=this;b===void 0&&(b=new e.Metadata),this.props.debug&&c.debug("rawOnError",u,d),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(w){if(!v.closed)try{w(u,d,b)}catch(y){setTimeout(function(){throw y},0)}}))},_.prototype.rawOnMessage=function(u){var d=this;this.props.debug&&c.debug("rawOnMessage",u.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(b){if(!d.closed)try{b(u)}catch(v){setTimeout(function(){throw v},0)}})},_.prototype.onHeaders=function(u){this.onHeadersCallbacks.push(u)},_.prototype.onMessage=function(u){this.onMessageCallbacks.push(u)},_.prototype.onEnd=function(u){this.onEndCallbacks.push(u)},_.prototype.start=function(u){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var d=new e.Metadata(u||{});d.set("content-type","application/grpc-web+proto"),d.set("x-grpc-web","1"),this.transport.start(d)},_.prototype.send=function(u){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var d=l.frameRequest(u);this.transport.sendMessage(d)},_.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},_.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&c.debug("request.abort aborting request"),this.transport.cancel()},_}();function g(_){var u=_.get("grpc-status")||[];if(u.length>0)try{var d=u[0];return parseInt(d,10)}catch{return null}return null}},346:function(f,r){Object.defineProperty(r,"__esModule",{value:!0}),r.debug=void 0,r.debug=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];console.debug?console.debug.apply(null,n):console.log.apply(null,n)}},607:function(f,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.grpc=void 0;var e,i=n(418),o=n(57),c=n(229),m=n(540),l=n(210),p=n(859),g=n(8),_=n(938),u=n(35),d=n(934);(e=r.grpc||(r.grpc={})).setDefaultTransport=o.setDefaultTransportFactory,e.CrossBrowserHttpTransport=p.CrossBrowserHttpTransport,e.FetchReadableStreamTransport=c.FetchReadableStreamTransport,e.XhrTransport=l.XhrTransport,e.WebsocketTransport=m.WebsocketTransport,e.Code=g.Code,e.Metadata=i.BrowserHeaders,e.client=function(b,v){return d.client(b,v)},e.invoke=_.invoke,e.unary=u.unary},938:function(f,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.invoke=void 0;var e=n(934);r.invoke=function(i,o){if(i.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var c=e.client(i,{host:o.host,transport:o.transport,debug:o.debug});return o.onHeaders&&c.onHeaders(o.onHeaders),o.onMessage&&c.onMessage(o.onMessage),o.onEnd&&c.onEnd(o.onEnd),c.start(o.metadata),c.send(o.request),c.finishSend(),{close:function(){c.close()}}}},65:function(f,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.Metadata=void 0;var e=n(418);Object.defineProperty(r,"Metadata",{enumerable:!0,get:function(){return e.BrowserHeaders}})},57:function(f,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.makeDefaultTransport=r.setDefaultTransportFactory=void 0;var e=n(859),i=function(o){return e.CrossBrowserHttpTransport({withCredentials:!1})(o)};r.setDefaultTransportFactory=function(o){i=o},r.makeDefaultTransport=function(o){return i(o)}},229:function(f,r,n){var e=this&&this.__assign||function(){return(e=Object.assign||function(m){for(var l,p=1,g=arguments.length;p<g;p++)for(var _ in l=arguments[p])Object.prototype.hasOwnProperty.call(l,_)&&(m[_]=l[_]);return m}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.detectFetchSupport=r.FetchReadableStreamTransport=void 0;var i=n(65),o=n(346);r.FetchReadableStreamTransport=function(m){return function(l){return function(p,g){return p.debug&&o.debug("fetchRequest",p),new c(p,g)}(l,m)}};var c=function(){function m(l,p){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=l,this.init=p}return m.prototype.pump=function(l,p){var g=this;if(this.reader=l,this.cancelled)return this.options.debug&&o.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch(function(_){g.options.debug&&o.debug("Fetch.pump.reader.cancel exception",_)});this.reader.read().then(function(_){if(_.done)return g.options.onEnd(),p;g.options.onChunk(_.value),g.pump(g.reader,p)}).catch(function(_){g.cancelled?g.options.debug&&o.debug("Fetch.catch - request cancelled"):(g.cancelled=!0,g.options.debug&&o.debug("Fetch.catch",_.message),g.options.onEnd(_))})},m.prototype.send=function(l){var p=this;fetch(this.options.url,e(e({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:l,signal:this.controller&&this.controller.signal})).then(function(g){if(p.options.debug&&o.debug("Fetch.response",g),p.options.onHeaders(new i.Metadata(g.headers),g.status),!g.body)return g;p.pump(g.body.getReader(),g)}).catch(function(g){p.cancelled?p.options.debug&&o.debug("Fetch.catch - request cancelled"):(p.cancelled=!0,p.options.debug&&o.debug("Fetch.catch",g.message),p.options.onEnd(g))})},m.prototype.sendMessage=function(l){this.send(l)},m.prototype.finishSend=function(){},m.prototype.start=function(l){this.metadata=l},m.prototype.cancel=function(){var l=this;this.cancelled?this.options.debug&&o.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&o.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&o.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&o.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch(function(p){l.options.debug&&o.debug("Fetch.cancel.reader.cancel exception",p)})):this.options.debug&&o.debug("Fetch.cancel before reader"))},m}();r.detectFetchSupport=function(){return typeof Response!="undefined"&&Response.prototype.hasOwnProperty("body")&&typeof Headers=="function"}},859:function(f,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.CrossBrowserHttpTransport=void 0;var e=n(229),i=n(210);r.CrossBrowserHttpTransport=function(o){if(e.detectFetchSupport()){var c={credentials:o.withCredentials?"include":"same-origin"};return e.FetchReadableStreamTransport(c)}return i.XhrTransport({withCredentials:o.withCredentials})}},210:function(f,r,n){var e,i=this&&this.__extends||(e=function(u,d){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,v){b.__proto__=v}||function(b,v){for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(b[w]=v[w])})(u,d)},function(u,d){function b(){this.constructor=u}e(u,d),u.prototype=d===null?Object.create(d):(b.prototype=d.prototype,new b)});Object.defineProperty(r,"__esModule",{value:!0}),r.stringToArrayBuffer=r.MozChunkedArrayBufferXHR=r.XHR=r.XhrTransport=void 0;var o=n(65),c=n(346),m=n(849);r.XhrTransport=function(u){return function(d){if(m.detectMozXHRSupport())return new p(d,u);if(m.detectXHROverrideMimeTypeSupport())return new l(d,u);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var l=function(){function u(d,b){this.options=d,this.init=b}return u.prototype.onProgressEvent=function(){this.options.debug&&c.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var d=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var b=_(d);this.options.onChunk(b)},u.prototype.onLoadEvent=function(){this.options.debug&&c.debug("XHR.onLoadEvent"),this.options.onEnd()},u.prototype.onStateChange=function(){this.options.debug&&c.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new o.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},u.prototype.sendMessage=function(d){this.xhr.send(d)},u.prototype.finishSend=function(){},u.prototype.start=function(d){var b=this;this.metadata=d;var v=new XMLHttpRequest;this.xhr=v,v.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach(function(w,y){v.setRequestHeader(w,y.join(", "))}),v.withCredentials=Boolean(this.init.withCredentials),v.addEventListener("readystatechange",this.onStateChange.bind(this)),v.addEventListener("progress",this.onProgressEvent.bind(this)),v.addEventListener("loadend",this.onLoadEvent.bind(this)),v.addEventListener("error",function(w){b.options.debug&&c.debug("XHR.error",w),b.options.onEnd(w.error)})},u.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},u.prototype.cancel=function(){this.options.debug&&c.debug("XHR.abort"),this.xhr.abort()},u}();r.XHR=l;var p=function(u){function d(){return u!==null&&u.apply(this,arguments)||this}return i(d,u),d.prototype.configureXhr=function(){this.options.debug&&c.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},d.prototype.onProgressEvent=function(){var b=this.xhr.response;this.options.debug&&c.debug("MozXHR.onProgressEvent: ",new Uint8Array(b)),this.options.onChunk(new Uint8Array(b))},d}(l);function g(u,d){var b=u.charCodeAt(d);if(b>=55296&&b<=56319){var v=u.charCodeAt(d+1);v>=56320&&v<=57343&&(b=65536+(b-55296<<10)+(v-56320))}return b}function _(u){for(var d=new Uint8Array(u.length),b=0,v=0;v<u.length;v++){var w=String.prototype.codePointAt?u.codePointAt(v):g(u,v);d[b++]=255&w}return d}r.MozChunkedArrayBufferXHR=p,r.stringToArrayBuffer=_},849:function(f,r){var n;function e(){if(n!==void 0)return n;if(XMLHttpRequest){n=new XMLHttpRequest;try{n.open("GET","https://localhost")}catch{}}return n}function i(o){var c=e();if(!c)return!1;try{return c.responseType=o,c.responseType===o}catch{}return!1}Object.defineProperty(r,"__esModule",{value:!0}),r.detectXHROverrideMimeTypeSupport=r.detectMozXHRSupport=r.xhrSupportsResponseType=void 0,r.xhrSupportsResponseType=i,r.detectMozXHRSupport=function(){return typeof XMLHttpRequest!="undefined"&&i("moz-chunked-arraybuffer")},r.detectXHROverrideMimeTypeSupport=function(){return typeof XMLHttpRequest!="undefined"&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(f,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.WebsocketTransport=void 0;var e,i=n(346),o=n(617);(function(m){m[m.FINISH_SEND=1]="FINISH_SEND"})(e||(e={}));var c=new Uint8Array([1]);r.WebsocketTransport=function(){return function(m){return function(l){l.debug&&i.debug("websocketRequest",l);var p,g=function(d){if(d.substr(0,8)==="https://")return"wss://"+d.substr(8);if(d.substr(0,7)==="http://")return"ws://"+d.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(l.url),_=[];function u(d){if(d===e.FINISH_SEND)p.send(c);else{var b=d,v=new Int8Array(b.byteLength+1);v.set(new Uint8Array([0])),v.set(b,1),p.send(v)}}return{sendMessage:function(d){p&&p.readyState!==p.CONNECTING?u(d):_.push(d)},finishSend:function(){p&&p.readyState!==p.CONNECTING?u(e.FINISH_SEND):_.push(e.FINISH_SEND)},start:function(d){(p=new WebSocket(g,["grpc-websockets"])).binaryType="arraybuffer",p.onopen=function(){var b;l.debug&&i.debug("websocketRequest.onopen"),p.send((b="",d.forEach(function(v,w){b+=v+": "+w.join(", ")+`\r
`}),o.encodeASCII(b))),_.forEach(function(v){u(v)})},p.onclose=function(b){l.debug&&i.debug("websocketRequest.onclose",b),l.onEnd()},p.onerror=function(b){l.debug&&i.debug("websocketRequest.onerror",b)},p.onmessage=function(b){l.onChunk(new Uint8Array(b.data))}},cancel:function(){l.debug&&i.debug("websocket.abort"),p.close()}}}(m)}}},35:function(f,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.unary=void 0;var e=n(65),i=n(934);r.unary=function(o,c){if(o.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(o.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var m=null,l=null,p=i.client(o,{host:c.host,transport:c.transport,debug:c.debug});return p.onHeaders(function(g){m=g}),p.onMessage(function(g){l=g}),p.onEnd(function(g,_,u){c.onEnd({status:g,statusMessage:_,headers:m||new e.Metadata,message:l,trailers:u})}),p.start(c.metadata),p.send(c.request),p.finishSend(),{close:function(){p.close()}}}},882:function(f,r){Object.defineProperty(r,"__esModule",{value:!0}),r.frameRequest=void 0,r.frameRequest=function(n){var e=n.serializeBinary(),i=new ArrayBuffer(e.byteLength+5);return new DataView(i,1,4).setUint32(0,e.length,!1),new Uint8Array(i,5).set(e),new Uint8Array(i)}}},a={},function f(r){if(a[r])return a[r].exports;var n=a[r]={exports:{}};return s[r].call(n.exports,n,n.exports,f),n.exports}(607);var s,a})})(Ve);var Be={exports:{}};(function(h,t){(function(a,f){h.exports=f()})(pe,function(){return function(s){var a={};function f(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return s[r].call(n.exports,n,n.exports,f),n.l=!0,n.exports}return f.m=s,f.c=a,f.i=function(r){return r},f.d=function(r,n,e){f.o(r,n)||Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:e})},f.n=function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return f.d(n,"a",n),n},f.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},f.p="",f(f.s=1)}([function(s,a,f){Object.defineProperty(a,"__esModule",{value:!0});var r=f(3);function n(i){return typeof i=="object"&&typeof i.headersMap=="object"&&typeof i.forEach=="function"}var e=function(){function i(o,c){o===void 0&&(o={}),c===void 0&&(c={splitValues:!1});var m=this;if(this.headersMap={},o)if(typeof Headers!="undefined"&&o instanceof Headers){var l=r.getHeaderKeys(o);l.forEach(function(g){var _=r.getHeaderValues(o,g);_.forEach(function(u){c.splitValues?m.append(g,r.splitHeaderValue(u)):m.append(g,u)})})}else if(n(o))o.forEach(function(g,_){m.append(g,_)});else if(typeof Map!="undefined"&&o instanceof Map){var p=o;p.forEach(function(g,_){m.append(_,g)})}else typeof o=="string"?this.appendFromString(o):typeof o=="object"&&Object.getOwnPropertyNames(o).forEach(function(g){var _=o,u=_[g];Array.isArray(u)?u.forEach(function(d){m.append(g,d)}):m.append(g,u)})}return i.prototype.appendFromString=function(o){for(var c=o.split(`\r
`),m=0;m<c.length;m++){var l=c[m],p=l.indexOf(":");if(p>0){var g=l.substring(0,p).trim(),_=l.substring(p+1).trim();this.append(g,_)}}},i.prototype.delete=function(o,c){var m=r.normalizeName(o);if(c===void 0)delete this.headersMap[m];else{var l=this.headersMap[m];if(l){var p=l.indexOf(c);p>=0&&l.splice(p,1),l.length===0&&delete this.headersMap[m]}}},i.prototype.append=function(o,c){var m=this,l=r.normalizeName(o);Array.isArray(this.headersMap[l])||(this.headersMap[l]=[]),Array.isArray(c)?c.forEach(function(p){m.headersMap[l].push(r.normalizeValue(p))}):this.headersMap[l].push(r.normalizeValue(c))},i.prototype.set=function(o,c){var m=r.normalizeName(o);if(Array.isArray(c)){var l=[];c.forEach(function(p){l.push(r.normalizeValue(p))}),this.headersMap[m]=l}else this.headersMap[m]=[r.normalizeValue(c)]},i.prototype.has=function(o,c){var m=this.headersMap[r.normalizeName(o)],l=Array.isArray(m);if(!l)return!1;if(c!==void 0){var p=r.normalizeValue(c);return m.indexOf(p)>=0}else return!0},i.prototype.get=function(o){var c=this.headersMap[r.normalizeName(o)];return c!==void 0?c.concat():[]},i.prototype.forEach=function(o){var c=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(m){o(m,c.headersMap[m])},this)},i.prototype.toHeaders=function(){if(typeof Headers!="undefined"){var o=new Headers;return this.forEach(function(c,m){m.forEach(function(l){o.append(c,l)})}),o}else throw new Error("Headers class is not defined")},i}();a.BrowserHeaders=e},function(s,a,f){Object.defineProperty(a,"__esModule",{value:!0});var r=f(0);a.BrowserHeaders=r.BrowserHeaders},function(s,a,f){Object.defineProperty(a,"__esModule",{value:!0});function r(e,i){for(var o=e[Symbol.iterator](),c=o.next();!c.done;)i(c.value[0]),c=o.next()}a.iterateHeaders=r;function n(e,i){for(var o=e.keys(),c=o.next();!c.done;)i(c.value),c=o.next()}a.iterateHeadersKeys=n},function(s,a,f){Object.defineProperty(a,"__esModule",{value:!0});var r=f(2);function n(l){if(typeof l!="string"&&(l=String(l)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(l))throw new TypeError("Invalid character in header field name");return l.toLowerCase()}a.normalizeName=n;function e(l){return typeof l!="string"&&(l=String(l)),l}a.normalizeValue=e;function i(l,p){var g=l;if(g instanceof Headers&&g.getAll)return g.getAll(p);var _=g.get(p);return _&&typeof _=="string"?[_]:_}a.getHeaderValues=i;function o(l){return l}function c(l){var p=l,g={},_=[];return p.keys?r.iterateHeadersKeys(p,function(u){g[u]||(g[u]=!0,_.push(u))}):p.forEach?p.forEach(function(u,d){g[d]||(g[d]=!0,_.push(d))}):r.iterateHeaders(p,function(u){var d=u[0];g[d]||(g[d]=!0,_.push(d))}),_}a.getHeaderKeys=c;function m(l){var p=[],g=l.split(", ");return g.forEach(function(_){_.split(",").forEach(function(u){p.push(u)})}),p}a.splitHeaderValue=m}])})})(Be);var q=(h=>(h[h.TITLE=0]="TITLE",h[h.PARAGRAPH=1]="PARAGRAPH",h[h.BLOCKQUOTE=2]="BLOCKQUOTE",h[h.UNRECOGNIZED=-1]="UNRECOGNIZED",h))(q||{}),se=(()=>{if(typeof se!="undefined")return se;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw"Unable to locate global object"})();ee.util.Long!==ie&&(ee.util.Long=ie,ee.configure());function $e(h){return{insertText(t){h({operations:[{insertText:{value:t}}]})},backspace(){h({operations:[{backspace:{}}]})},moveCursorRight(t=1){h({operations:[{moveCursorRight:{steps:t}}]})},moveCursorLeft(t=1){h({operations:[{moveCursorLeft:{steps:t}}]})},undo(t){h({operations:[{undo:{steps:t}}]})},redo(t){h({operations:[{redo:{steps:t}}]})},carriageReturn(){h({operations:[{carriageReturn:{}}]})}}}const Xe=()=>{const h={article:{id:te(),version:0,blocks:[{id:"1",version:0,content:{textContent:{type:q.TITLE,value:"Lorem Ipsum"}}},{id:2,version:0,content:{textContent:{type:q.PARAGRAPH,value:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}}},{id:te(),version:0,content:{textContent:{type:q.PARAGRAPH,value:"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?"}}}],authorId:""},focus:{localized:{blockId:"1",cursor:0}}};return{editorData:h,history:{index:0,momento:[h]}}};function Ke(h){return t=>{const s=t.key;switch(!0){case(t.metaKey&&!t.shiftKey&&t.key.toLowerCase()=="z"):{h.undo(5),t.preventDefault();return}case(t.metaKey&&t.shiftKey&&t.key.toLowerCase()=="z"):{h.redo(5),t.preventDefault();return}}switch(!0){case s.length==1:{h.insertText(s),t.preventDefault();break}case s=="Backspace":{h.backspace(),t.preventDefault();break}case s=="ArrowLeft":{h.moveCursorLeft(1),t.preventDefault();break}case s=="ArrowRight":{h.moveCursorRight(1),t.preventDefault();break}case s=="Enter":{h.carriageReturn(),t.preventDefault();break}}}}function Ge(h){let t;return{c(){t=L("span"),this.h()},l(s){t=z(s,"SPAN",{class:!0}),N(t).forEach(C),this.h()},h(){P(t,"class","caret  svelte-16nu1js")},m(s,a){x(s,t,a)},p:V,i:V,o:V,d(s){s&&C(t)}}}class ge extends B{constructor(t){super();$(this,t,null,Ge,X,{})}}function We(h){let t;return{c(){t=Y(h[0])},l(s){t=Z(s,h[0])},m(s,a){x(s,t,a)},p(s,a){a&1&&J(t,s[0])},i:V,o:V,d(s){s&&C(t)}}}function Qe(h){let t,s,a,f;const r=[Ze,Ye],n=[];function e(i,o){return i[2]==0?0:1}return t=e(h),s=n[t]=r[t](h),{c(){s.c(),a=S()},l(i){s.l(i),a=S()},m(i,o){n[t].m(i,o),x(i,a,o),f=!0},p(i,o){let c=t;t=e(i),t===c?n[t].p(i,o):(K(),A(n[c],1,1,()=>{n[c]=null}),G(),s=n[t],s?s.p(i,o):(s=n[t]=r[t](i),s.c()),k(s,1),s.m(a.parentNode,a))},i(i){f||(k(s),f=!0)},o(i){A(s),f=!1},d(i){n[t].d(i),i&&C(a)}}}function Ye(h){let t=h[0].slice(0,h[2])+"",s,a,f=h[0].slice(h[2])+"",r,n;return a=new ge({}),{c(){s=Y(t),T(a.$$.fragment),r=Y(f)},l(e){s=Z(e,t),I(a.$$.fragment,e),r=Z(e,f)},m(e,i){x(e,s,i),D(a,e,i),x(e,r,i),n=!0},p(e,i){(!n||i&5)&&t!==(t=e[0].slice(0,e[2])+"")&&J(s,t),(!n||i&5)&&f!==(f=e[0].slice(e[2])+"")&&J(r,f)},i(e){n||(k(a.$$.fragment,e),n=!0)},o(e){A(a.$$.fragment,e),n=!1},d(e){e&&C(s),U(a,e),e&&C(r)}}}function Ze(h){let t,s,a;return s=new ge({}),{c(){t=Y(h[0]),T(s.$$.fragment)},l(f){t=Z(f,h[0]),I(s.$$.fragment,f)},m(f,r){x(f,t,r),D(s,f,r),a=!0},p(f,r){(!a||r&1)&&J(t,f[0])},i(f){a||(k(s.$$.fragment,f),a=!0)},o(f){A(s.$$.fragment,f),a=!1},d(f){f&&C(t),U(s,f)}}}function Je(h){let t,s,a,f;const r=[Qe,We],n=[];function e(i,o){return i[1]?0:1}return t=e(h),s=n[t]=r[t](h),{c(){s.c(),a=S()},l(i){s.l(i),a=S()},m(i,o){n[t].m(i,o),x(i,a,o),f=!0},p(i,[o]){let c=t;t=e(i),t===c?n[t].p(i,o):(K(),A(n[c],1,1,()=>{n[c]=null}),G(),s=n[t],s?s.p(i,o):(s=n[t]=r[t](i),s.c()),k(s,1),s.m(a.parentNode,a))},i(i){f||(k(s),f=!0)},o(i){A(s),f=!1},d(i){n[t].d(i),i&&C(a)}}}function et(h,t,s){let{text:a}=t,{isSelected:f}=t,{cursorPosition:r}=t;return h.$$set=n=>{"text"in n&&s(0,a=n.text),"isSelected"in n&&s(1,f=n.isSelected),"cursorPosition"in n&&s(2,r=n.cursorPosition)},[a,f,r]}class oe extends B{constructor(t){super();$(this,t,et,Je,X,{text:0,isSelected:1,cursorPosition:2})}}function tt(h){let t,s,a,f,r=!h[1]&&ae();return a=new oe({props:{cursorPosition:h[3],isSelected:h[2],text:h[1]}}),{c(){t=L("blockquote"),r&&r.c(),s=S(),T(a.$$.fragment),this.h()},l(n){t=z(n,"BLOCKQUOTE",{class:!0});var e=N(t);r&&r.l(e),s=S(),I(a.$$.fragment,e),e.forEach(C),this.h()},h(){P(t,"class","outline-none whitespace-pre-wrap")},m(n,e){x(n,t,e),r&&r.m(t,null),re(t,s),D(a,t,null),f=!0},p(n,e){n[1]?r&&(r.d(1),r=null):r||(r=ae(),r.c(),r.m(t,s));const i={};e&8&&(i.cursorPosition=n[3]),e&4&&(i.isSelected=n[2]),e&2&&(i.text=n[1]),a.$set(i)},i(n){f||(k(a.$$.fragment,n),f=!0)},o(n){A(a.$$.fragment,n),f=!1},d(n){n&&C(t),r&&r.d(),U(a)}}}function rt(h){let t,s,a,f,r=!h[1]&&ue();return a=new oe({props:{cursorPosition:h[3],isSelected:h[2],text:h[1]}}),{c(){t=L("p"),r&&r.c(),s=S(),T(a.$$.fragment),this.h()},l(n){t=z(n,"P",{class:!0});var e=N(t);r&&r.l(e),s=S(),I(a.$$.fragment,e),e.forEach(C),this.h()},h(){P(t,"class","outline-none whitespace-pre-wrap")},m(n,e){x(n,t,e),r&&r.m(t,null),re(t,s),D(a,t,null),f=!0},p(n,e){n[1]?r&&(r.d(1),r=null):r||(r=ue(),r.c(),r.m(t,s));const i={};e&8&&(i.cursorPosition=n[3]),e&4&&(i.isSelected=n[2]),e&2&&(i.text=n[1]),a.$set(i)},i(n){f||(k(a.$$.fragment,n),f=!0)},o(n){A(a.$$.fragment,n),f=!1},d(n){n&&C(t),r&&r.d(),U(a)}}}function nt(h){let t,s,a,f,r,n=!h[1]&&ce();return a=new oe({props:{cursorPosition:h[3],isSelected:h[2],text:h[1]}}),{c(){t=L("h1"),n&&n.c(),s=S(),T(a.$$.fragment),this.h()},l(e){t=z(e,"H1",{placeholder:!0,class:!0});var i=N(t);n&&n.l(i),s=S(),I(a.$$.fragment,i),i.forEach(C),this.h()},h(){P(t,"placeholder","Title"),P(t,"class",f=`${h[0]==0&&h[5]?"before:content-[attr(placeholder)] relative before:absolute before:text-medium-gray":""} outline-none whitespace-pre-wrap`)},m(e,i){x(e,t,i),n&&n.m(t,null),re(t,s),D(a,t,null),r=!0},p(e,i){e[1]?n&&(n.d(1),n=null):n||(n=ce(),n.c(),n.m(t,s));const o={};i&8&&(o.cursorPosition=e[3]),i&4&&(o.isSelected=e[2]),i&2&&(o.text=e[1]),a.$set(o),(!r||i&33&&f!==(f=`${e[0]==0&&e[5]?"before:content-[attr(placeholder)] relative before:absolute before:text-medium-gray":""} outline-none whitespace-pre-wrap`))&&P(t,"class",f)},i(e){r||(k(a.$$.fragment,e),r=!0)},o(e){A(a.$$.fragment,e),r=!1},d(e){e&&C(t),n&&n.d(),U(a)}}}function ae(h){let t;return{c(){t=L("span"),this.h()},l(s){t=z(s,"SPAN",{class:!0}),N(t).forEach(C),this.h()},h(){P(t,"class","inline-block")},m(s,a){x(s,t,a)},d(s){s&&C(t)}}}function ue(h){let t;return{c(){t=L("span"),this.h()},l(s){t=z(s,"SPAN",{class:!0}),N(t).forEach(C),this.h()},h(){P(t,"class","inline-block")},m(s,a){x(s,t,a)},d(s){s&&C(t)}}}function ce(h){let t;return{c(){t=L("span"),this.h()},l(s){t=z(s,"SPAN",{class:!0}),N(t).forEach(C),this.h()},h(){P(t,"class","inline-block")},m(s,a){x(s,t,a)},d(s){s&&C(t)}}}function ot(h){let t,s,a,f;const r=[nt,rt,tt],n=[];function e(i,o){return q.TITLE==i[4]?0:q.PARAGRAPH==i[4]?1:q.BLOCKQUOTE==i[4]?2:-1}return~(t=e(h))&&(s=n[t]=r[t](h)),{c(){s&&s.c(),a=S()},l(i){s&&s.l(i),a=S()},m(i,o){~t&&n[t].m(i,o),x(i,a,o),f=!0},p(i,[o]){let c=t;t=e(i),t===c?~t&&n[t].p(i,o):(s&&(K(),A(n[c],1,1,()=>{n[c]=null}),G()),~t?(s=n[t],s?s.p(i,o):(s=n[t]=r[t](i),s.c()),k(s,1),s.m(a.parentNode,a)):s=null)},i(i){f||(k(s),f=!0)},o(i){A(s),f=!1},d(i){~t&&n[t].d(i),i&&C(a)}}}function it(h,t,s){let a,{index:f}=t,{text:r}=t,{isSelected:n}=t,{cursorPosition:e}=t,{type:i}=t;return h.$$set=o=>{"index"in o&&s(0,f=o.index),"text"in o&&s(1,r=o.text),"isSelected"in o&&s(2,n=o.isSelected),"cursorPosition"in o&&s(3,e=o.cursorPosition),"type"in o&&s(4,i=o.type)},h.$$.update=()=>{h.$$.dirty&2&&s(5,a=O.isEmpty(r))},[f,r,n,e,i,a]}class st extends B{constructor(t){super();$(this,t,it,ot,X,{index:0,text:1,isSelected:2,cursorPosition:3,type:4})}}function le(h,t,s){const a=h.slice();return a[6]=t[s],a[8]=s,a}function de(h){var a,f,r,n;let t,s;return t=new st({props:{index:h[8],type:h[6].content.textContent.type,text:h[6].content.textContent.value,isSelected:h[6].id==((f=(a=h[0].focus)==null?void 0:a.localized)==null?void 0:f.blockId),cursorPosition:(n=(r=h[0].focus)==null?void 0:r.localized)==null?void 0:n.cursor}}),{c(){T(t.$$.fragment)},l(e){I(t.$$.fragment,e)},m(e,i){D(t,e,i),s=!0},p(e,i){var c,m,l,p;const o={};i&1&&(o.index=e[8]),i&1&&(o.type=e[6].content.textContent.type),i&1&&(o.text=e[6].content.textContent.value),i&1&&(o.isSelected=e[6].id==((m=(c=e[0].focus)==null?void 0:c.localized)==null?void 0:m.blockId)),i&1&&(o.cursorPosition=(p=(l=e[0].focus)==null?void 0:l.localized)==null?void 0:p.cursor),t.$set(o)},i(e){s||(k(t.$$.fragment,e),s=!0)},o(e){A(t.$$.fragment,e),s=!1},d(e){U(t,e)}}}function fe(h,t){let s,a,f,r=t[6].content.textContent!=null&&de(t);return{key:h,first:null,c(){s=S(),r&&r.c(),a=S(),this.h()},l(n){s=S(),r&&r.l(n),a=S(),this.h()},h(){this.first=s},m(n,e){x(n,s,e),r&&r.m(n,e),x(n,a,e),f=!0},p(n,e){t=n,t[6].content.textContent!=null?r?(r.p(t,e),e&1&&k(r,1)):(r=de(t),r.c(),k(r,1),r.m(a.parentNode,a)):r&&(K(),A(r,1,1,()=>{r=null}),G())},i(n){f||(k(r),f=!0)},o(n){A(r),f=!1},d(n){n&&C(s),r&&r.d(n),n&&C(a)}}}function at(h){let t=[],s=new Map,a,f,r=h[0].article.blocks;const n=e=>e[6].id;for(let e=0;e<r.length;e+=1){let i=le(h,r,e),o=n(i);s.set(o,t[e]=fe(o,i))}return{c(){for(let e=0;e<t.length;e+=1)t[e].c();a=S()},l(e){for(let i=0;i<t.length;i+=1)t[i].l(e);a=S()},m(e,i){for(let o=0;o<t.length;o+=1)t[o].m(e,i);x(e,a,i),f=!0},p(e,[i]){i&1&&(r=e[0].article.blocks,K(),t=_e(t,i,n,1,e,r,s,a.parentNode,ve,fe,a,le),G())},i(e){if(!f){for(let i=0;i<r.length;i+=1)k(t[i]);f=!0}},o(e){for(let i=0;i<t.length;i+=1)A(t[i]);f=!1},d(e){for(let i=0;i<t.length;i+=1)t[i].d(e);e&&C(a)}}}function ut(h,t,s){let a,f;const r=Fe(Xe()),n=$e(r.dispatch),e=r.uiArticleReadable;me(h,e,o=>s(2,f=o));const i=Ke(n);return be(()=>{document.onkeydown=i,document.onselectionchange=()=>{document.getSelection()}}),h.$$.update=()=>{h.$$.dirty&4&&s(0,a=f.editorData)},[a,e,f]}class ct extends B{constructor(t){super();$(this,t,ut,at,X,{})}}function lt(h){let t,s;return t=new ct({}),{c(){T(t.$$.fragment)},l(a){I(t.$$.fragment,a)},m(a,f){D(t,a,f),s=!0},i(a){s||(k(t.$$.fragment,a),s=!0)},o(a){A(t.$$.fragment,a),s=!1},d(a){U(t,a)}}}function dt(h){let t,s;return t=new xe({props:{$$slots:{default:[lt]},$$scope:{ctx:h}}}),{c(){T(t.$$.fragment)},l(a){I(t.$$.fragment,a)},m(a,f){D(t,a,f),s=!0},p(a,[f]){const r={};f&1&&(r.$$scope={dirty:f,ctx:a}),t.$set(r)},i(a){s||(k(t.$$.fragment,a),s=!0)},o(a){A(t.$$.fragment,a),s=!1},d(a){U(t,a)}}}class yt extends B{constructor(t){super();$(this,t,null,dt,X,{})}}export{yt as default};
