var pr=Object.defineProperty,mr=Object.defineProperties;var wr=Object.getOwnPropertyDescriptors;var ut=Object.getOwnPropertySymbols;var gr=Object.prototype.hasOwnProperty,vr=Object.prototype.propertyIsEnumerable;var dt=(t,e,i)=>e in t?pr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ue=(t,e)=>{for(var i in e||(e={}))gr.call(e,i)&&dt(t,i,e[i]);if(ut)for(var i of ut(e))vr.call(e,i)&&dt(t,i,e[i]);return t},de=(t,e)=>mr(t,wr(e));import{S as ve,i as Ie,s as Se,I as Ir,e as L,c as N,a as _,d as k,b as I,g as H,T as Ae,J as Sr,K as xr,L as Cr,q as W,o as Z,U as Mt,k as X,w as j,m as z,x as K,H as F,y as ee,B as te,M as ne,N as ie,E as re,l as ft,C as $e,O as He,t as he,h as pe,Y as Br,j as Tt,V as kr,Z as Ar,P as Er,v as Fr,_ as Mr,n as Tr,p as _r}from"../../../chunks/index-f40bfaf5.js";import{S as Rr}from"../../../chunks/SecurityCheckPage-22ac2472.js";import{i as Dr,j as _t,k as Ye,m as Pr,_ as br,n as Ur,a as Lr,b as Nr,P as Or,S as yr,h as Vr,e as $r}from"../../../chunks/StandardTopBar-bb280db2.js";import{O as oe,i as le,b as Rt,r as Hr,o as xe,c as ge,d as Jr,e as Gr,S as Dt,a as Pt,m as M,L as ht,B as Wr,s as Zr}from"../../../chunks/minimal-323bfef2.js";/* empty css                          */import"../../../chunks/singletons-0b89c4cc.js";import"../../../chunks/_commonjsHelpers-7d66b65f.js";var Yr=new oe(function(t){return t.complete()});function qr(t){return t&&le(t.schedule)}var bt=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Ut(t){return le(t==null?void 0:t.then)}function Lt(t){return le(t[Rt])}function Nt(t){return Symbol.asyncIterator&&le(t==null?void 0:t[Symbol.asyncIterator])}function Ot(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Xr(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var yt=Xr();function Vt(t){return le(t==null?void 0:t[yt])}function $t(t){return Dr(this,arguments,function(){var i,o,s,u;return _t(this,function(f){switch(f.label){case 0:i=t.getReader(),f.label=1;case 1:f.trys.push([1,,9,10]),f.label=2;case 2:return[4,Ye(i.read())];case 3:return o=f.sent(),s=o.value,u=o.done,u?[4,Ye(void 0)]:[3,5];case 4:return[2,f.sent()];case 5:return[4,Ye(s)];case 6:return[4,f.sent()];case 7:return f.sent(),[3,2];case 8:return[3,10];case 9:return i.releaseLock(),[7];case 10:return[2]}})})}function Ht(t){return le(t==null?void 0:t.getReader)}function Ee(t){if(t instanceof oe)return t;if(t!=null){if(Lt(t))return zr(t);if(bt(t))return Qr(t);if(Ut(t))return jr(t);if(Nt(t))return Jt(t);if(Vt(t))return Kr(t);if(Ht(t))return en(t)}throw Ot(t)}function zr(t){return new oe(function(e){var i=t[Rt]();if(le(i.subscribe))return i.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Qr(t){return new oe(function(e){for(var i=0;i<t.length&&!e.closed;i++)e.next(t[i]);e.complete()})}function jr(t){return new oe(function(e){t.then(function(i){e.closed||(e.next(i),e.complete())},function(i){return e.error(i)}).then(null,Hr)})}function Kr(t){return new oe(function(e){var i,o;try{for(var s=br(t),u=s.next();!u.done;u=s.next()){var f=u.value;if(e.next(f),e.closed)return}}catch(l){i={error:l}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}e.complete()})}function Jt(t){return new oe(function(e){tn(t,e).catch(function(i){return e.error(i)})})}function en(t){return Jt($t(t))}function tn(t,e){var i,o,s,u;return Pr(this,void 0,void 0,function(){var f,l;return _t(this,function(p){switch(p.label){case 0:p.trys.push([0,5,6,11]),i=Ur(t),p.label=1;case 1:return[4,i.next()];case 2:if(o=p.sent(),!!o.done)return[3,4];if(f=o.value,e.next(f),e.closed)return[2];p.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=p.sent(),s={error:l},[3,11];case 6:return p.trys.push([6,,9,10]),o&&!o.done&&(u=i.return)?[4,u.call(i)]:[3,8];case 7:p.sent(),p.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function we(t,e,i,o,s){o===void 0&&(o=0),s===void 0&&(s=!1);var u=e.schedule(function(){i(),s?t.add(this.schedule(null,o)):this.unsubscribe()},o);if(t.add(u),!s)return u}function Gt(t,e){return e===void 0&&(e=0),xe(function(i,o){i.subscribe(ge(o,function(s){return we(o,t,function(){return o.next(s)},e)},function(){return we(o,t,function(){return o.complete()},e)},function(s){return we(o,t,function(){return o.error(s)},e)}))})}function Wt(t,e){return e===void 0&&(e=0),xe(function(i,o){o.add(t.schedule(function(){return i.subscribe(o)},e))})}function rn(t,e){return Ee(t).pipe(Wt(e),Gt(e))}function nn(t,e){return Ee(t).pipe(Wt(e),Gt(e))}function on(t,e){return new oe(function(i){var o=0;return e.schedule(function(){o===t.length?i.complete():(i.next(t[o++]),i.closed||this.schedule())})})}function an(t,e){return new oe(function(i){var o;return we(i,e,function(){o=t[yt](),we(i,e,function(){var s,u,f;try{s=o.next(),u=s.value,f=s.done}catch(l){i.error(l);return}f?i.complete():i.next(u)},0,!0)}),function(){return le(o==null?void 0:o.return)&&o.return()}})}function Zt(t,e){if(!t)throw new Error("Iterable cannot be null");return new oe(function(i){we(i,e,function(){var o=t[Symbol.asyncIterator]();we(i,e,function(){o.next().then(function(s){s.done?i.complete():i.next(s.value)})},0,!0)})})}function sn(t,e){return Zt($t(t),e)}function cn(t,e){if(t!=null){if(Lt(t))return rn(t,e);if(bt(t))return on(t,e);if(Ut(t))return nn(t,e);if(Nt(t))return Zt(t,e);if(Vt(t))return an(t,e);if(Ht(t))return sn(t,e)}throw Ot(t)}function ln(t,e){return e?cn(t,e):Ee(t)}function un(t){return t instanceof Date&&!isNaN(t)}function Yt(t,e){return xe(function(i,o){var s=0;i.subscribe(ge(o,function(u){o.next(t.call(e,u,s++))}))})}function dn(t,e,i,o,s,u,f,l){var p=[],g=0,w=0,S=!1,C=function(){S&&!p.length&&!g&&e.complete()},v=function(B){return g<o?x(B):p.push(B)},x=function(B){u&&e.next(B),g++;var E=!1;Ee(i(B,w++)).subscribe(ge(e,function(A){s==null||s(A),u?v(A):e.next(A)},function(){E=!0},void 0,function(){if(E)try{g--;for(var A=function(){var b=p.shift();f?we(e,f,function(){return x(b)}):x(b)};p.length&&g<o;)A();C()}catch(b){e.error(b)}}))};return t.subscribe(ge(e,v,function(){S=!0,C()})),function(){l==null||l()}}function Qe(t,e,i){return i===void 0&&(i=1/0),le(e)?Qe(function(o,s){return Yt(function(u,f){return e(o,u,s,f)})(Ee(t(o,s)))},i):(typeof e=="number"&&(i=e),xe(function(o,s){return dn(o,s,t,i)}))}function fn(t,e,i){t===void 0&&(t=0),i===void 0&&(i=Jr);var o=-1;return e!=null&&(qr(e)?i=e:o=e),new oe(function(s){var u=un(t)?+t-i.now():t;u<0&&(u=0);var f=0;return i.schedule(function(){s.closed||(s.next(f++),0<=o?this.schedule(void 0,o):s.complete())},u)})}function hn(t,e){return le(e)?Qe(t,e,1):Qe(t,1)}function pn(t){return t<=0?function(){return Yr}:xe(function(e,i){var o=0;e.subscribe(ge(i,function(s){++o<=t&&(i.next(s),t<=o&&i.complete())}))})}function qt(t){t===void 0&&(t={});var e=t.connector,i=e===void 0?function(){return new Dt}:e,o=t.resetOnError,s=o===void 0?!0:o,u=t.resetOnComplete,f=u===void 0?!0:u,l=t.resetOnRefCountZero,p=l===void 0?!0:l;return function(g){var w=null,S=null,C=null,v=0,x=!1,B=!1,E=function(){S==null||S.unsubscribe(),S=null},A=function(){E(),w=C=null,x=B=!1},b=function(){var U=w;A(),U==null||U.unsubscribe()};return xe(function(U,J){v++,!B&&!x&&E();var O=C=C!=null?C:i();J.add(function(){v--,v===0&&!B&&!x&&(S=qe(b,p))}),O.subscribe(J),w||(w=new Gr({next:function(Y){return O.next(Y)},error:function(Y){B=!0,E(),S=qe(A,s,Y),O.error(Y)},complete:function(){x=!0,E(),S=qe(A,f),O.complete()}}),ln(U).subscribe(w))})(g)}}function qe(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e===!0?(t(),null):e===!1?null:e.apply(void 0,Lr([],Nr(i))).pipe(pn(1)).subscribe(function(){return t()})}var Xt={leading:!0,trailing:!1};function mn(t,e){return e===void 0&&(e=Xt),xe(function(i,o){var s=e.leading,u=e.trailing,f=!1,l=null,p=null,g=!1,w=function(){p==null||p.unsubscribe(),p=null,u&&(v(),g&&o.complete())},S=function(){p=null,g&&o.complete()},C=function(x){return p=Ee(t(x)).subscribe(ge(o,w,S))},v=function(){if(f){f=!1;var x=l;l=null,o.next(x),!g&&C(x)}};i.subscribe(ge(o,function(x){f=!0,l=x,!(p&&!p.closed)&&(s?v():C(x))},function(){g=!0,!(u&&f&&p&&!p.closed)&&o.complete()}))})}function wn(t,e,i){e===void 0&&(e=Pt),i===void 0&&(i=Xt);var o=fn(t,e);return mn(function(){return o},i)}function pt(){return{uid:"",streamId:"",name:"",isMobile:!1}}const Te={encode(t,e=M.Writer.create()){return t.uid!==""&&e.uint32(34).string(t.uid),t.streamId!==""&&e.uint32(10).string(t.streamId),t.name!==""&&e.uint32(18).string(t.name),t.isMobile===!0&&e.uint32(24).bool(t.isMobile),e},decode(t,e){const i=t instanceof M.Reader?t:new M.Reader(t);let o=e===void 0?i.len:i.pos+e;const s=pt();for(;i.pos<o;){const u=i.uint32();switch(u>>>3){case 4:s.uid=i.string();break;case 1:s.streamId=i.string();break;case 2:s.name=i.string();break;case 3:s.isMobile=i.bool();break;default:i.skipType(u&7);break}}return s},fromJSON(t){return{uid:P(t.uid)?String(t.uid):"",streamId:P(t.streamId)?String(t.streamId):"",name:P(t.name)?String(t.name):"",isMobile:P(t.isMobile)?Boolean(t.isMobile):!1}},toJSON(t){const e={};return t.uid!==void 0&&(e.uid=t.uid),t.streamId!==void 0&&(e.streamId=t.streamId),t.name!==void 0&&(e.name=t.name),t.isMobile!==void 0&&(e.isMobile=t.isMobile),e},fromPartial(t){var i,o,s,u;const e=pt();return e.uid=(i=t.uid)!=null?i:"",e.streamId=(o=t.streamId)!=null?o:"",e.name=(s=t.name)!=null?s:"",e.isMobile=(u=t.isMobile)!=null?u:!1,e}};function mt(){return{offer:""}}const _e={encode(t,e=M.Writer.create()){return t.offer!==""&&e.uint32(26).string(t.offer),e},decode(t,e){const i=t instanceof M.Reader?t:new M.Reader(t);let o=e===void 0?i.len:i.pos+e;const s=mt();for(;i.pos<o;){const u=i.uint32();switch(u>>>3){case 3:s.offer=i.string();break;default:i.skipType(u&7);break}}return s},fromJSON(t){return{offer:P(t.offer)?String(t.offer):""}},toJSON(t){const e={};return t.offer!==void 0&&(e.offer=t.offer),e},fromPartial(t){var i;const e=mt();return e.offer=(i=t.offer)!=null?i:"",e}};function wt(){return{offer:""}}const Re={encode(t,e=M.Writer.create()){return t.offer!==""&&e.uint32(26).string(t.offer),e},decode(t,e){const i=t instanceof M.Reader?t:new M.Reader(t);let o=e===void 0?i.len:i.pos+e;const s=wt();for(;i.pos<o;){const u=i.uint32();switch(u>>>3){case 3:s.offer=i.string();break;default:i.skipType(u&7);break}}return s},fromJSON(t){return{offer:P(t.offer)?String(t.offer):""}},toJSON(t){const e={};return t.offer!==void 0&&(e.offer=t.offer),e},fromPartial(t){var i;const e=wt();return e.offer=(i=t.offer)!=null?i:"",e}};function gt(){return{answer:""}}const De={encode(t,e=M.Writer.create()){return t.answer!==""&&e.uint32(26).string(t.answer),e},decode(t,e){const i=t instanceof M.Reader?t:new M.Reader(t);let o=e===void 0?i.len:i.pos+e;const s=gt();for(;i.pos<o;){const u=i.uint32();switch(u>>>3){case 3:s.answer=i.string();break;default:i.skipType(u&7);break}}return s},fromJSON(t){return{answer:P(t.answer)?String(t.answer):""}},toJSON(t){const e={};return t.answer!==void 0&&(e.answer=t.answer),e},fromPartial(t){var i;const e=gt();return e.answer=(i=t.answer)!=null?i:"",e}};function vt(){return{iceCandidate:""}}const Pe={encode(t,e=M.Writer.create()){return t.iceCandidate!==""&&e.uint32(26).string(t.iceCandidate),e},decode(t,e){const i=t instanceof M.Reader?t:new M.Reader(t);let o=e===void 0?i.len:i.pos+e;const s=vt();for(;i.pos<o;){const u=i.uint32();switch(u>>>3){case 3:s.iceCandidate=i.string();break;default:i.skipType(u&7);break}}return s},fromJSON(t){return{iceCandidate:P(t.iceCandidate)?String(t.iceCandidate):""}},toJSON(t){const e={};return t.iceCandidate!==void 0&&(e.iceCandidate=t.iceCandidate),e},fromPartial(t){var i;const e=vt();return e.iceCandidate=(i=t.iceCandidate)!=null?i:"",e}};function It(){return{setName:void 0,p2pMessage:void 0}}const gn={encode(t,e=M.Writer.create()){return t.setName!==void 0&&be.encode(t.setName,e.uint32(10).fork()).ldelim(),t.p2pMessage!==void 0&&se.encode(t.p2pMessage,e.uint32(18).fork()).ldelim(),e},decode(t,e){const i=t instanceof M.Reader?t:new M.Reader(t);let o=e===void 0?i.len:i.pos+e;const s=It();for(;i.pos<o;){const u=i.uint32();switch(u>>>3){case 1:s.setName=be.decode(i,i.uint32());break;case 2:s.p2pMessage=se.decode(i,i.uint32());break;default:i.skipType(u&7);break}}return s},fromJSON(t){return{setName:P(t.setName)?be.fromJSON(t.setName):void 0,p2pMessage:P(t.p2pMessage)?se.fromJSON(t.p2pMessage):void 0}},toJSON(t){const e={};return t.setName!==void 0&&(e.setName=t.setName?be.toJSON(t.setName):void 0),t.p2pMessage!==void 0&&(e.p2pMessage=t.p2pMessage?se.toJSON(t.p2pMessage):void 0),e},fromPartial(t){const e=It();return e.setName=t.setName!==void 0&&t.setName!==null?be.fromPartial(t.setName):void 0,e.p2pMessage=t.p2pMessage!==void 0&&t.p2pMessage!==null?se.fromPartial(t.p2pMessage):void 0,e}};function St(){return{id:"",name:""}}const be={encode(t,e=M.Writer.create()){return t.id!==""&&e.uint32(10).string(t.id),t.name!==""&&e.uint32(18).string(t.name),e},decode(t,e){const i=t instanceof M.Reader?t:new M.Reader(t);let o=e===void 0?i.len:i.pos+e;const s=St();for(;i.pos<o;){const u=i.uint32();switch(u>>>3){case 1:s.id=i.string();break;case 2:s.name=i.string();break;default:i.skipType(u&7);break}}return s},fromJSON(t){return{id:P(t.id)?String(t.id):"",name:P(t.name)?String(t.name):""}},toJSON(t){const e={};return t.id!==void 0&&(e.id=t.id),t.name!==void 0&&(e.name=t.name),e},fromPartial(t){var i,o;const e=St();return e.id=(i=t.id)!=null?i:"",e.name=(o=t.name)!=null?o:"",e}};function xt(){return{connectedDevices:[]}}const Ue={encode(t,e=M.Writer.create()){for(const i of t.connectedDevices)Te.encode(i,e.uint32(18).fork()).ldelim();return e},decode(t,e){const i=t instanceof M.Reader?t:new M.Reader(t);let o=e===void 0?i.len:i.pos+e;const s=xt();for(;i.pos<o;){const u=i.uint32();switch(u>>>3){case 2:s.connectedDevices.push(Te.decode(i,i.uint32()));break;default:i.skipType(u&7);break}}return s},fromJSON(t){return{connectedDevices:Array.isArray(t==null?void 0:t.connectedDevices)?t.connectedDevices.map(e=>Te.fromJSON(e)):[]}},toJSON(t){const e={};return t.connectedDevices?e.connectedDevices=t.connectedDevices.map(i=>i?Te.toJSON(i):void 0):e.connectedDevices=[],e},fromPartial(t){var i;const e=xt();return e.connectedDevices=((i=t.connectedDevices)==null?void 0:i.map(o=>Te.fromPartial(o)))||[],e}};function Ct(){return{serverState:void 0,p2pMessage:void 0}}const vn={encode(t,e=M.Writer.create()){return t.serverState!==void 0&&Ue.encode(t.serverState,e.uint32(10).fork()).ldelim(),t.p2pMessage!==void 0&&se.encode(t.p2pMessage,e.uint32(18).fork()).ldelim(),e},decode(t,e){const i=t instanceof M.Reader?t:new M.Reader(t);let o=e===void 0?i.len:i.pos+e;const s=Ct();for(;i.pos<o;){const u=i.uint32();switch(u>>>3){case 1:s.serverState=Ue.decode(i,i.uint32());break;case 2:s.p2pMessage=se.decode(i,i.uint32());break;default:i.skipType(u&7);break}}return s},fromJSON(t){return{serverState:P(t.serverState)?Ue.fromJSON(t.serverState):void 0,p2pMessage:P(t.p2pMessage)?se.fromJSON(t.p2pMessage):void 0}},toJSON(t){const e={};return t.serverState!==void 0&&(e.serverState=t.serverState?Ue.toJSON(t.serverState):void 0),t.p2pMessage!==void 0&&(e.p2pMessage=t.p2pMessage?se.toJSON(t.p2pMessage):void 0),e},fromPartial(t){const e=Ct();return e.serverState=t.serverState!==void 0&&t.serverState!==null?Ue.fromPartial(t.serverState):void 0,e.p2pMessage=t.p2pMessage!==void 0&&t.p2pMessage!==null?se.fromPartial(t.p2pMessage):void 0,e}};function Bt(){return{senderId:"",receiverId:"",senderUid:"",rtcOffer:void 0,rtcAnswer:void 0,iceCandidate:void 0,initialRtcOffer:void 0}}const se={encode(t,e=M.Writer.create()){return t.senderId!==""&&e.uint32(10).string(t.senderId),t.receiverId!==""&&e.uint32(18).string(t.receiverId),t.senderUid!==""&&e.uint32(26).string(t.senderUid),t.rtcOffer!==void 0&&Re.encode(t.rtcOffer,e.uint32(34).fork()).ldelim(),t.rtcAnswer!==void 0&&De.encode(t.rtcAnswer,e.uint32(42).fork()).ldelim(),t.iceCandidate!==void 0&&Pe.encode(t.iceCandidate,e.uint32(50).fork()).ldelim(),t.initialRtcOffer!==void 0&&_e.encode(t.initialRtcOffer,e.uint32(58).fork()).ldelim(),e},decode(t,e){const i=t instanceof M.Reader?t:new M.Reader(t);let o=e===void 0?i.len:i.pos+e;const s=Bt();for(;i.pos<o;){const u=i.uint32();switch(u>>>3){case 1:s.senderId=i.string();break;case 2:s.receiverId=i.string();break;case 3:s.senderUid=i.string();break;case 4:s.rtcOffer=Re.decode(i,i.uint32());break;case 5:s.rtcAnswer=De.decode(i,i.uint32());break;case 6:s.iceCandidate=Pe.decode(i,i.uint32());break;case 7:s.initialRtcOffer=_e.decode(i,i.uint32());break;default:i.skipType(u&7);break}}return s},fromJSON(t){return{senderId:P(t.senderId)?String(t.senderId):"",receiverId:P(t.receiverId)?String(t.receiverId):"",senderUid:P(t.senderUid)?String(t.senderUid):"",rtcOffer:P(t.rtcOffer)?Re.fromJSON(t.rtcOffer):void 0,rtcAnswer:P(t.rtcAnswer)?De.fromJSON(t.rtcAnswer):void 0,iceCandidate:P(t.iceCandidate)?Pe.fromJSON(t.iceCandidate):void 0,initialRtcOffer:P(t.initialRtcOffer)?_e.fromJSON(t.initialRtcOffer):void 0}},toJSON(t){const e={};return t.senderId!==void 0&&(e.senderId=t.senderId),t.receiverId!==void 0&&(e.receiverId=t.receiverId),t.senderUid!==void 0&&(e.senderUid=t.senderUid),t.rtcOffer!==void 0&&(e.rtcOffer=t.rtcOffer?Re.toJSON(t.rtcOffer):void 0),t.rtcAnswer!==void 0&&(e.rtcAnswer=t.rtcAnswer?De.toJSON(t.rtcAnswer):void 0),t.iceCandidate!==void 0&&(e.iceCandidate=t.iceCandidate?Pe.toJSON(t.iceCandidate):void 0),t.initialRtcOffer!==void 0&&(e.initialRtcOffer=t.initialRtcOffer?_e.toJSON(t.initialRtcOffer):void 0),e},fromPartial(t){var i,o,s;const e=Bt();return e.senderId=(i=t.senderId)!=null?i:"",e.receiverId=(o=t.receiverId)!=null?o:"",e.senderUid=(s=t.senderUid)!=null?s:"",e.rtcOffer=t.rtcOffer!==void 0&&t.rtcOffer!==null?Re.fromPartial(t.rtcOffer):void 0,e.rtcAnswer=t.rtcAnswer!==void 0&&t.rtcAnswer!==null?De.fromPartial(t.rtcAnswer):void 0,e.iceCandidate=t.iceCandidate!==void 0&&t.iceCandidate!==null?Pe.fromPartial(t.iceCandidate):void 0,e.initialRtcOffer=t.initialRtcOffer!==void 0&&t.initialRtcOffer!==null?_e.fromPartial(t.initialRtcOffer):void 0,e}};function kt(){return{forward:0,right:0}}const Le={encode(t,e=M.Writer.create()){return t.forward!==0&&e.uint32(8).int32(t.forward),t.right!==0&&e.uint32(16).int32(t.right),e},decode(t,e){const i=t instanceof M.Reader?t:new M.Reader(t);let o=e===void 0?i.len:i.pos+e;const s=kt();for(;i.pos<o;){const u=i.uint32();switch(u>>>3){case 1:s.forward=i.int32();break;case 2:s.right=i.int32();break;default:i.skipType(u&7);break}}return s},fromJSON(t){return{forward:P(t.forward)?Number(t.forward):0,right:P(t.right)?Number(t.right):0}},toJSON(t){const e={};return t.forward!==void 0&&(e.forward=Math.round(t.forward)),t.right!==void 0&&(e.right=Math.round(t.right)),e},fromPartial(t){var i,o;const e=kt();return e.forward=(i=t.forward)!=null?i:0,e.right=(o=t.right)!=null?o:0,e}};function At(){return{directionCommand:void 0}}const In={encode(t,e=M.Writer.create()){return t.directionCommand!==void 0&&Le.encode(t.directionCommand,e.uint32(10).fork()).ldelim(),e},decode(t,e){const i=t instanceof M.Reader?t:new M.Reader(t);let o=e===void 0?i.len:i.pos+e;const s=At();for(;i.pos<o;){const u=i.uint32();switch(u>>>3){case 1:s.directionCommand=Le.decode(i,i.uint32());break;default:i.skipType(u&7);break}}return s},fromJSON(t){return{directionCommand:P(t.directionCommand)?Le.fromJSON(t.directionCommand):void 0}},toJSON(t){const e={};return t.directionCommand!==void 0&&(e.directionCommand=t.directionCommand?Le.toJSON(t.directionCommand):void 0),e},fromPartial(t){const e=At();return e.directionCommand=t.directionCommand!==void 0&&t.directionCommand!==null?Le.fromPartial(t.directionCommand):void 0,e}};M.util.Long!==ht&&(M.util.Long=ht,M.configure());function P(t){return t!=null}var je={},Je={};Je.byteLength=Cn;Je.toByteArray=kn;Je.fromByteArray=Fn;var ce=[],Q=[],Sn=typeof Uint8Array!="undefined"?Uint8Array:Array,Xe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ke=0,xn=Xe.length;ke<xn;++ke)ce[ke]=Xe[ke],Q[Xe.charCodeAt(ke)]=ke;Q["-".charCodeAt(0)]=62;Q["_".charCodeAt(0)]=63;function zt(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");i===-1&&(i=e);var o=i===e?0:4-i%4;return[i,o]}function Cn(t){var e=zt(t),i=e[0],o=e[1];return(i+o)*3/4-o}function Bn(t,e,i){return(e+i)*3/4-i}function kn(t){var e,i=zt(t),o=i[0],s=i[1],u=new Sn(Bn(t,o,s)),f=0,l=s>0?o-4:o,p;for(p=0;p<l;p+=4)e=Q[t.charCodeAt(p)]<<18|Q[t.charCodeAt(p+1)]<<12|Q[t.charCodeAt(p+2)]<<6|Q[t.charCodeAt(p+3)],u[f++]=e>>16&255,u[f++]=e>>8&255,u[f++]=e&255;return s===2&&(e=Q[t.charCodeAt(p)]<<2|Q[t.charCodeAt(p+1)]>>4,u[f++]=e&255),s===1&&(e=Q[t.charCodeAt(p)]<<10|Q[t.charCodeAt(p+1)]<<4|Q[t.charCodeAt(p+2)]>>2,u[f++]=e>>8&255,u[f++]=e&255),u}function An(t){return ce[t>>18&63]+ce[t>>12&63]+ce[t>>6&63]+ce[t&63]}function En(t,e,i){for(var o,s=[],u=e;u<i;u+=3)o=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(t[u+2]&255),s.push(An(o));return s.join("")}function Fn(t){for(var e,i=t.length,o=i%3,s=[],u=16383,f=0,l=i-o;f<l;f+=u)s.push(En(t,f,f+u>l?l:f+u));return o===1?(e=t[i-1],s.push(ce[e>>2]+ce[e<<4&63]+"==")):o===2&&(e=(t[i-2]<<8)+t[i-1],s.push(ce[e>>10]+ce[e>>4&63]+ce[e<<2&63]+"=")),s.join("")}var Ke={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ke.read=function(t,e,i,o,s){var u,f,l=s*8-o-1,p=(1<<l)-1,g=p>>1,w=-7,S=i?s-1:0,C=i?-1:1,v=t[e+S];for(S+=C,u=v&(1<<-w)-1,v>>=-w,w+=l;w>0;u=u*256+t[e+S],S+=C,w-=8);for(f=u&(1<<-w)-1,u>>=-w,w+=o;w>0;f=f*256+t[e+S],S+=C,w-=8);if(u===0)u=1-g;else{if(u===p)return f?NaN:(v?-1:1)*(1/0);f=f+Math.pow(2,o),u=u-g}return(v?-1:1)*f*Math.pow(2,u-o)};Ke.write=function(t,e,i,o,s,u){var f,l,p,g=u*8-s-1,w=(1<<g)-1,S=w>>1,C=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=o?0:u-1,x=o?1:-1,B=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,f=w):(f=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-f))<1&&(f--,p*=2),f+S>=1?e+=C/p:e+=C*Math.pow(2,1-S),e*p>=2&&(f++,p/=2),f+S>=w?(l=0,f=w):f+S>=1?(l=(e*p-1)*Math.pow(2,s),f=f+S):(l=e*Math.pow(2,S-1)*Math.pow(2,s),f=0));s>=8;t[i+v]=l&255,v+=x,l/=256,s-=8);for(f=f<<s|l,g+=s;g>0;t[i+v]=f&255,v+=x,f/=256,g-=8);t[i+v-x]|=B*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Je,i=Ke,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=b,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=u(),!l.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const a=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(a,r),a.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(!!l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(!!l.isBuffer(this))return this.byteOffset}});function f(a){if(a>s)throw new RangeError('The value "'+a+'" is invalid for option "size"');const r=new Uint8Array(a);return Object.setPrototypeOf(r,l.prototype),r}function l(a,r,n){if(typeof a=="number"){if(typeof r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(a)}return p(a,r,n)}l.poolSize=8192;function p(a,r,n){if(typeof a=="string")return C(a,r);if(ArrayBuffer.isView(a))return x(a);if(a==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(ae(a,ArrayBuffer)||a&&ae(a.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(ae(a,SharedArrayBuffer)||a&&ae(a.buffer,SharedArrayBuffer)))return B(a,r,n);if(typeof a=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const c=a.valueOf&&a.valueOf();if(c!=null&&c!==a)return l.from(c,r,n);const d=E(a);if(d)return d;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof a[Symbol.toPrimitive]=="function")return l.from(a[Symbol.toPrimitive]("string"),r,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}l.from=function(a,r,n){return p(a,r,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function g(a){if(typeof a!="number")throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function w(a,r,n){return g(a),a<=0?f(a):r!==void 0?typeof n=="string"?f(a).fill(r,n):f(a).fill(r):f(a)}l.alloc=function(a,r,n){return w(a,r,n)};function S(a){return g(a),f(a<0?0:A(a)|0)}l.allocUnsafe=function(a){return S(a)},l.allocUnsafeSlow=function(a){return S(a)};function C(a,r){if((typeof r!="string"||r==="")&&(r="utf8"),!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);const n=U(a,r)|0;let c=f(n);const d=c.write(a,r);return d!==n&&(c=c.slice(0,d)),c}function v(a){const r=a.length<0?0:A(a.length)|0,n=f(r);for(let c=0;c<r;c+=1)n[c]=a[c]&255;return n}function x(a){if(ae(a,Uint8Array)){const r=new Uint8Array(a);return B(r.buffer,r.byteOffset,r.byteLength)}return v(a)}function B(a,r,n){if(r<0||a.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<r+(n||0))throw new RangeError('"length" is outside of buffer bounds');let c;return r===void 0&&n===void 0?c=new Uint8Array(a):n===void 0?c=new Uint8Array(a,r):c=new Uint8Array(a,r,n),Object.setPrototypeOf(c,l.prototype),c}function E(a){if(l.isBuffer(a)){const r=A(a.length)|0,n=f(r);return n.length===0||a.copy(n,0,0,r),n}if(a.length!==void 0)return typeof a.length!="number"||Ze(a.length)?f(0):v(a);if(a.type==="Buffer"&&Array.isArray(a.data))return v(a.data)}function A(a){if(a>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return a|0}function b(a){return+a!=a&&(a=0),l.alloc(+a)}l.isBuffer=function(r){return r!=null&&r._isBuffer===!0&&r!==l.prototype},l.compare=function(r,n){if(ae(r,Uint8Array)&&(r=l.from(r,r.offset,r.byteLength)),ae(n,Uint8Array)&&(n=l.from(n,n.offset,n.byteLength)),!l.isBuffer(r)||!l.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===n)return 0;let c=r.length,d=n.length;for(let h=0,m=Math.min(c,d);h<m;++h)if(r[h]!==n[h]){c=r[h],d=n[h];break}return c<d?-1:d<c?1:0},l.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(r,n){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return l.alloc(0);let c;if(n===void 0)for(n=0,c=0;c<r.length;++c)n+=r[c].length;const d=l.allocUnsafe(n);let h=0;for(c=0;c<r.length;++c){let m=r[c];if(ae(m,Uint8Array))h+m.length>d.length?(l.isBuffer(m)||(m=l.from(m)),m.copy(d,h)):Uint8Array.prototype.set.call(d,m,h);else if(l.isBuffer(m))m.copy(d,h);else throw new TypeError('"list" argument must be an Array of Buffers');h+=m.length}return d};function U(a,r){if(l.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||ae(a,ArrayBuffer))return a.byteLength;if(typeof a!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);const n=a.length,c=arguments.length>2&&arguments[2]===!0;if(!c&&n===0)return 0;let d=!1;for(;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return We(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return lt(a).length;default:if(d)return c?-1:We(a).length;r=(""+r).toLowerCase(),d=!0}}l.byteLength=U;function J(a,r,n){let c=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,r>>>=0,n<=r))return"";for(a||(a="utf8");;)switch(a){case"hex":return or(this,r,n);case"utf8":case"utf-8":return et(this,r,n);case"ascii":return nr(this,r,n);case"latin1":case"binary":return ir(this,r,n);case"base64":return tr(this,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ar(this,r,n);default:if(c)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),c=!0}}l.prototype._isBuffer=!0;function O(a,r,n){const c=a[r];a[r]=a[n],a[n]=c}l.prototype.swap16=function(){const r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<r;n+=2)O(this,n,n+1);return this},l.prototype.swap32=function(){const r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<r;n+=4)O(this,n,n+3),O(this,n+1,n+2);return this},l.prototype.swap64=function(){const r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<r;n+=8)O(this,n,n+7),O(this,n+1,n+6),O(this,n+2,n+5),O(this,n+3,n+4);return this},l.prototype.toString=function(){const r=this.length;return r===0?"":arguments.length===0?et(this,0,r):J.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(r){if(!l.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:l.compare(this,r)===0},l.prototype.inspect=function(){let r="";const n=t.INSPECT_MAX_BYTES;return r=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(r+=" ... "),"<Buffer "+r+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(r,n,c,d,h){if(ae(r,Uint8Array)&&(r=l.from(r,r.offset,r.byteLength)),!l.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(n===void 0&&(n=0),c===void 0&&(c=r?r.length:0),d===void 0&&(d=0),h===void 0&&(h=this.length),n<0||c>r.length||d<0||h>this.length)throw new RangeError("out of range index");if(d>=h&&n>=c)return 0;if(d>=h)return-1;if(n>=c)return 1;if(n>>>=0,c>>>=0,d>>>=0,h>>>=0,this===r)return 0;let m=h-d,T=c-n;const y=Math.min(m,T),D=this.slice(d,h),V=r.slice(n,c);for(let R=0;R<y;++R)if(D[R]!==V[R]){m=D[R],T=V[R];break}return m<T?-1:T<m?1:0};function Y(a,r,n,c,d){if(a.length===0)return-1;if(typeof n=="string"?(c=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,Ze(n)&&(n=d?0:a.length-1),n<0&&(n=a.length+n),n>=a.length){if(d)return-1;n=a.length-1}else if(n<0)if(d)n=0;else return-1;if(typeof r=="string"&&(r=l.from(r,c)),l.isBuffer(r))return r.length===0?-1:Fe(a,r,n,c,d);if(typeof r=="number")return r=r&255,typeof Uint8Array.prototype.indexOf=="function"?d?Uint8Array.prototype.indexOf.call(a,r,n):Uint8Array.prototype.lastIndexOf.call(a,r,n):Fe(a,[r],n,c,d);throw new TypeError("val must be string, number or Buffer")}function Fe(a,r,n,c,d){let h=1,m=a.length,T=r.length;if(c!==void 0&&(c=String(c).toLowerCase(),c==="ucs2"||c==="ucs-2"||c==="utf16le"||c==="utf-16le")){if(a.length<2||r.length<2)return-1;h=2,m/=2,T/=2,n/=2}function y(V,R){return h===1?V[R]:V.readUInt16BE(R*h)}let D;if(d){let V=-1;for(D=n;D<m;D++)if(y(a,D)===y(r,V===-1?0:D-V)){if(V===-1&&(V=D),D-V+1===T)return V*h}else V!==-1&&(D-=D-V),V=-1}else for(n+T>m&&(n=m-T),D=n;D>=0;D--){let V=!0;for(let R=0;R<T;R++)if(y(a,D+R)!==y(r,R)){V=!1;break}if(V)return D}return-1}l.prototype.includes=function(r,n,c){return this.indexOf(r,n,c)!==-1},l.prototype.indexOf=function(r,n,c){return Y(this,r,n,c,!0)},l.prototype.lastIndexOf=function(r,n,c){return Y(this,r,n,c,!1)};function Ne(a,r,n,c){n=Number(n)||0;const d=a.length-n;c?(c=Number(c),c>d&&(c=d)):c=d;const h=r.length;c>h/2&&(c=h/2);let m;for(m=0;m<c;++m){const T=parseInt(r.substr(m*2,2),16);if(Ze(T))return m;a[n+m]=T}return m}function Qt(a,r,n,c){return Oe(We(r,a.length-n),a,n,c)}function jt(a,r,n,c){return Oe(ur(r),a,n,c)}function Kt(a,r,n,c){return Oe(lt(r),a,n,c)}function er(a,r,n,c){return Oe(dr(r,a.length-n),a,n,c)}l.prototype.write=function(r,n,c,d){if(n===void 0)d="utf8",c=this.length,n=0;else if(c===void 0&&typeof n=="string")d=n,c=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(c)?(c=c>>>0,d===void 0&&(d="utf8")):(d=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const h=this.length-n;if((c===void 0||c>h)&&(c=h),r.length>0&&(c<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let m=!1;for(;;)switch(d){case"hex":return Ne(this,r,n,c);case"utf8":case"utf-8":return Qt(this,r,n,c);case"ascii":case"latin1":case"binary":return jt(this,r,n,c);case"base64":return Kt(this,r,n,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return er(this,r,n,c);default:if(m)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),m=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function tr(a,r,n){return r===0&&n===a.length?e.fromByteArray(a):e.fromByteArray(a.slice(r,n))}function et(a,r,n){n=Math.min(a.length,n);const c=[];let d=r;for(;d<n;){const h=a[d];let m=null,T=h>239?4:h>223?3:h>191?2:1;if(d+T<=n){let y,D,V,R;switch(T){case 1:h<128&&(m=h);break;case 2:y=a[d+1],(y&192)===128&&(R=(h&31)<<6|y&63,R>127&&(m=R));break;case 3:y=a[d+1],D=a[d+2],(y&192)===128&&(D&192)===128&&(R=(h&15)<<12|(y&63)<<6|D&63,R>2047&&(R<55296||R>57343)&&(m=R));break;case 4:y=a[d+1],D=a[d+2],V=a[d+3],(y&192)===128&&(D&192)===128&&(V&192)===128&&(R=(h&15)<<18|(y&63)<<12|(D&63)<<6|V&63,R>65535&&R<1114112&&(m=R))}}m===null?(m=65533,T=1):m>65535&&(m-=65536,c.push(m>>>10&1023|55296),m=56320|m&1023),c.push(m),d+=T}return rr(c)}const tt=4096;function rr(a){const r=a.length;if(r<=tt)return String.fromCharCode.apply(String,a);let n="",c=0;for(;c<r;)n+=String.fromCharCode.apply(String,a.slice(c,c+=tt));return n}function nr(a,r,n){let c="";n=Math.min(a.length,n);for(let d=r;d<n;++d)c+=String.fromCharCode(a[d]&127);return c}function ir(a,r,n){let c="";n=Math.min(a.length,n);for(let d=r;d<n;++d)c+=String.fromCharCode(a[d]);return c}function or(a,r,n){const c=a.length;(!r||r<0)&&(r=0),(!n||n<0||n>c)&&(n=c);let d="";for(let h=r;h<n;++h)d+=fr[a[h]];return d}function ar(a,r,n){const c=a.slice(r,n);let d="";for(let h=0;h<c.length-1;h+=2)d+=String.fromCharCode(c[h]+c[h+1]*256);return d}l.prototype.slice=function(r,n){const c=this.length;r=~~r,n=n===void 0?c:~~n,r<0?(r+=c,r<0&&(r=0)):r>c&&(r=c),n<0?(n+=c,n<0&&(n=0)):n>c&&(n=c),n<r&&(n=r);const d=this.subarray(r,n);return Object.setPrototypeOf(d,l.prototype),d};function $(a,r,n){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+r>n)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(r,n,c){r=r>>>0,n=n>>>0,c||$(r,n,this.length);let d=this[r],h=1,m=0;for(;++m<n&&(h*=256);)d+=this[r+m]*h;return d},l.prototype.readUintBE=l.prototype.readUIntBE=function(r,n,c){r=r>>>0,n=n>>>0,c||$(r,n,this.length);let d=this[r+--n],h=1;for(;n>0&&(h*=256);)d+=this[r+--n]*h;return d},l.prototype.readUint8=l.prototype.readUInt8=function(r,n){return r=r>>>0,n||$(r,1,this.length),this[r]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(r,n){return r=r>>>0,n||$(r,2,this.length),this[r]|this[r+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(r,n){return r=r>>>0,n||$(r,2,this.length),this[r]<<8|this[r+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(r,n){return r=r>>>0,n||$(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(r,n){return r=r>>>0,n||$(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])},l.prototype.readBigUInt64LE=me(function(r){r=r>>>0,Be(r,"offset");const n=this[r],c=this[r+7];(n===void 0||c===void 0)&&Me(r,this.length-8);const d=n+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24,h=this[++r]+this[++r]*2**8+this[++r]*2**16+c*2**24;return BigInt(d)+(BigInt(h)<<BigInt(32))}),l.prototype.readBigUInt64BE=me(function(r){r=r>>>0,Be(r,"offset");const n=this[r],c=this[r+7];(n===void 0||c===void 0)&&Me(r,this.length-8);const d=n*2**24+this[++r]*2**16+this[++r]*2**8+this[++r],h=this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+c;return(BigInt(d)<<BigInt(32))+BigInt(h)}),l.prototype.readIntLE=function(r,n,c){r=r>>>0,n=n>>>0,c||$(r,n,this.length);let d=this[r],h=1,m=0;for(;++m<n&&(h*=256);)d+=this[r+m]*h;return h*=128,d>=h&&(d-=Math.pow(2,8*n)),d},l.prototype.readIntBE=function(r,n,c){r=r>>>0,n=n>>>0,c||$(r,n,this.length);let d=n,h=1,m=this[r+--d];for(;d>0&&(h*=256);)m+=this[r+--d]*h;return h*=128,m>=h&&(m-=Math.pow(2,8*n)),m},l.prototype.readInt8=function(r,n){return r=r>>>0,n||$(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r]},l.prototype.readInt16LE=function(r,n){r=r>>>0,n||$(r,2,this.length);const c=this[r]|this[r+1]<<8;return c&32768?c|4294901760:c},l.prototype.readInt16BE=function(r,n){r=r>>>0,n||$(r,2,this.length);const c=this[r+1]|this[r]<<8;return c&32768?c|4294901760:c},l.prototype.readInt32LE=function(r,n){return r=r>>>0,n||$(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},l.prototype.readInt32BE=function(r,n){return r=r>>>0,n||$(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},l.prototype.readBigInt64LE=me(function(r){r=r>>>0,Be(r,"offset");const n=this[r],c=this[r+7];(n===void 0||c===void 0)&&Me(r,this.length-8);const d=this[r+4]+this[r+5]*2**8+this[r+6]*2**16+(c<<24);return(BigInt(d)<<BigInt(32))+BigInt(n+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24)}),l.prototype.readBigInt64BE=me(function(r){r=r>>>0,Be(r,"offset");const n=this[r],c=this[r+7];(n===void 0||c===void 0)&&Me(r,this.length-8);const d=(n<<24)+this[++r]*2**16+this[++r]*2**8+this[++r];return(BigInt(d)<<BigInt(32))+BigInt(this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+c)}),l.prototype.readFloatLE=function(r,n){return r=r>>>0,n||$(r,4,this.length),i.read(this,r,!0,23,4)},l.prototype.readFloatBE=function(r,n){return r=r>>>0,n||$(r,4,this.length),i.read(this,r,!1,23,4)},l.prototype.readDoubleLE=function(r,n){return r=r>>>0,n||$(r,8,this.length),i.read(this,r,!0,52,8)},l.prototype.readDoubleBE=function(r,n){return r=r>>>0,n||$(r,8,this.length),i.read(this,r,!1,52,8)};function q(a,r,n,c,d,h){if(!l.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>d||r<h)throw new RangeError('"value" argument is out of bounds');if(n+c>a.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(r,n,c,d){if(r=+r,n=n>>>0,c=c>>>0,!d){const T=Math.pow(2,8*c)-1;q(this,r,n,c,T,0)}let h=1,m=0;for(this[n]=r&255;++m<c&&(h*=256);)this[n+m]=r/h&255;return n+c},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(r,n,c,d){if(r=+r,n=n>>>0,c=c>>>0,!d){const T=Math.pow(2,8*c)-1;q(this,r,n,c,T,0)}let h=c-1,m=1;for(this[n+h]=r&255;--h>=0&&(m*=256);)this[n+h]=r/m&255;return n+c},l.prototype.writeUint8=l.prototype.writeUInt8=function(r,n,c){return r=+r,n=n>>>0,c||q(this,r,n,1,255,0),this[n]=r&255,n+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(r,n,c){return r=+r,n=n>>>0,c||q(this,r,n,2,65535,0),this[n]=r&255,this[n+1]=r>>>8,n+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(r,n,c){return r=+r,n=n>>>0,c||q(this,r,n,2,65535,0),this[n]=r>>>8,this[n+1]=r&255,n+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(r,n,c){return r=+r,n=n>>>0,c||q(this,r,n,4,4294967295,0),this[n+3]=r>>>24,this[n+2]=r>>>16,this[n+1]=r>>>8,this[n]=r&255,n+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(r,n,c){return r=+r,n=n>>>0,c||q(this,r,n,4,4294967295,0),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=r&255,n+4};function rt(a,r,n,c,d){ct(r,c,d,a,n,7);let h=Number(r&BigInt(4294967295));a[n++]=h,h=h>>8,a[n++]=h,h=h>>8,a[n++]=h,h=h>>8,a[n++]=h;let m=Number(r>>BigInt(32)&BigInt(4294967295));return a[n++]=m,m=m>>8,a[n++]=m,m=m>>8,a[n++]=m,m=m>>8,a[n++]=m,n}function nt(a,r,n,c,d){ct(r,c,d,a,n,7);let h=Number(r&BigInt(4294967295));a[n+7]=h,h=h>>8,a[n+6]=h,h=h>>8,a[n+5]=h,h=h>>8,a[n+4]=h;let m=Number(r>>BigInt(32)&BigInt(4294967295));return a[n+3]=m,m=m>>8,a[n+2]=m,m=m>>8,a[n+1]=m,m=m>>8,a[n]=m,n+8}l.prototype.writeBigUInt64LE=me(function(r,n=0){return rt(this,r,n,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=me(function(r,n=0){return nt(this,r,n,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(r,n,c,d){if(r=+r,n=n>>>0,!d){const y=Math.pow(2,8*c-1);q(this,r,n,c,y-1,-y)}let h=0,m=1,T=0;for(this[n]=r&255;++h<c&&(m*=256);)r<0&&T===0&&this[n+h-1]!==0&&(T=1),this[n+h]=(r/m>>0)-T&255;return n+c},l.prototype.writeIntBE=function(r,n,c,d){if(r=+r,n=n>>>0,!d){const y=Math.pow(2,8*c-1);q(this,r,n,c,y-1,-y)}let h=c-1,m=1,T=0;for(this[n+h]=r&255;--h>=0&&(m*=256);)r<0&&T===0&&this[n+h+1]!==0&&(T=1),this[n+h]=(r/m>>0)-T&255;return n+c},l.prototype.writeInt8=function(r,n,c){return r=+r,n=n>>>0,c||q(this,r,n,1,127,-128),r<0&&(r=255+r+1),this[n]=r&255,n+1},l.prototype.writeInt16LE=function(r,n,c){return r=+r,n=n>>>0,c||q(this,r,n,2,32767,-32768),this[n]=r&255,this[n+1]=r>>>8,n+2},l.prototype.writeInt16BE=function(r,n,c){return r=+r,n=n>>>0,c||q(this,r,n,2,32767,-32768),this[n]=r>>>8,this[n+1]=r&255,n+2},l.prototype.writeInt32LE=function(r,n,c){return r=+r,n=n>>>0,c||q(this,r,n,4,2147483647,-2147483648),this[n]=r&255,this[n+1]=r>>>8,this[n+2]=r>>>16,this[n+3]=r>>>24,n+4},l.prototype.writeInt32BE=function(r,n,c){return r=+r,n=n>>>0,c||q(this,r,n,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=r&255,n+4},l.prototype.writeBigInt64LE=me(function(r,n=0){return rt(this,r,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=me(function(r,n=0){return nt(this,r,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function it(a,r,n,c,d,h){if(n+c>a.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function ot(a,r,n,c,d){return r=+r,n=n>>>0,d||it(a,r,n,4),i.write(a,r,n,c,23,4),n+4}l.prototype.writeFloatLE=function(r,n,c){return ot(this,r,n,!0,c)},l.prototype.writeFloatBE=function(r,n,c){return ot(this,r,n,!1,c)};function at(a,r,n,c,d){return r=+r,n=n>>>0,d||it(a,r,n,8),i.write(a,r,n,c,52,8),n+8}l.prototype.writeDoubleLE=function(r,n,c){return at(this,r,n,!0,c)},l.prototype.writeDoubleBE=function(r,n,c){return at(this,r,n,!1,c)},l.prototype.copy=function(r,n,c,d){if(!l.isBuffer(r))throw new TypeError("argument should be a Buffer");if(c||(c=0),!d&&d!==0&&(d=this.length),n>=r.length&&(n=r.length),n||(n=0),d>0&&d<c&&(d=c),d===c||r.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),r.length-n<d-c&&(d=r.length-n+c);const h=d-c;return this===r&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,c,d):Uint8Array.prototype.set.call(r,this.subarray(c,d),n),h},l.prototype.fill=function(r,n,c,d){if(typeof r=="string"){if(typeof n=="string"?(d=n,n=0,c=this.length):typeof c=="string"&&(d=c,c=this.length),d!==void 0&&typeof d!="string")throw new TypeError("encoding must be a string");if(typeof d=="string"&&!l.isEncoding(d))throw new TypeError("Unknown encoding: "+d);if(r.length===1){const m=r.charCodeAt(0);(d==="utf8"&&m<128||d==="latin1")&&(r=m)}}else typeof r=="number"?r=r&255:typeof r=="boolean"&&(r=Number(r));if(n<0||this.length<n||this.length<c)throw new RangeError("Out of range index");if(c<=n)return this;n=n>>>0,c=c===void 0?this.length:c>>>0,r||(r=0);let h;if(typeof r=="number")for(h=n;h<c;++h)this[h]=r;else{const m=l.isBuffer(r)?r:l.from(r,d),T=m.length;if(T===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(h=0;h<c-n;++h)this[h+n]=m[h%T]}return this};const Ce={};function Ge(a,r,n){Ce[a]=class extends n{constructor(){super();Object.defineProperty(this,"message",{value:r.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(d){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:d,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}Ge("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ge("ERR_INVALID_ARG_TYPE",function(a,r){return`The "${a}" argument must be of type number. Received type ${typeof r}`},TypeError),Ge("ERR_OUT_OF_RANGE",function(a,r,n){let c=`The value of "${a}" is out of range.`,d=n;return Number.isInteger(n)&&Math.abs(n)>2**32?d=st(String(n)):typeof n=="bigint"&&(d=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(d=st(d)),d+="n"),c+=` It must be ${r}. Received ${d}`,c},RangeError);function st(a){let r="",n=a.length;const c=a[0]==="-"?1:0;for(;n>=c+4;n-=3)r=`_${a.slice(n-3,n)}${r}`;return`${a.slice(0,n)}${r}`}function sr(a,r,n){Be(r,"offset"),(a[r]===void 0||a[r+n]===void 0)&&Me(r,a.length-(n+1))}function ct(a,r,n,c,d,h){if(a>n||a<r){const m=typeof r=="bigint"?"n":"";let T;throw h>3?r===0||r===BigInt(0)?T=`>= 0${m} and < 2${m} ** ${(h+1)*8}${m}`:T=`>= -(2${m} ** ${(h+1)*8-1}${m}) and < 2 ** ${(h+1)*8-1}${m}`:T=`>= ${r}${m} and <= ${n}${m}`,new Ce.ERR_OUT_OF_RANGE("value",T,a)}sr(c,d,h)}function Be(a,r){if(typeof a!="number")throw new Ce.ERR_INVALID_ARG_TYPE(r,"number",a)}function Me(a,r,n){throw Math.floor(a)!==a?(Be(a,n),new Ce.ERR_OUT_OF_RANGE(n||"offset","an integer",a)):r<0?new Ce.ERR_BUFFER_OUT_OF_BOUNDS:new Ce.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${r}`,a)}const cr=/[^+/0-9A-Za-z-_]/g;function lr(a){if(a=a.split("=")[0],a=a.trim().replace(cr,""),a.length<2)return"";for(;a.length%4!==0;)a=a+"=";return a}function We(a,r){r=r||1/0;let n;const c=a.length;let d=null;const h=[];for(let m=0;m<c;++m){if(n=a.charCodeAt(m),n>55295&&n<57344){if(!d){if(n>56319){(r-=3)>-1&&h.push(239,191,189);continue}else if(m+1===c){(r-=3)>-1&&h.push(239,191,189);continue}d=n;continue}if(n<56320){(r-=3)>-1&&h.push(239,191,189),d=n;continue}n=(d-55296<<10|n-56320)+65536}else d&&(r-=3)>-1&&h.push(239,191,189);if(d=null,n<128){if((r-=1)<0)break;h.push(n)}else if(n<2048){if((r-=2)<0)break;h.push(n>>6|192,n&63|128)}else if(n<65536){if((r-=3)<0)break;h.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((r-=4)<0)break;h.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return h}function ur(a){const r=[];for(let n=0;n<a.length;++n)r.push(a.charCodeAt(n)&255);return r}function dr(a,r){let n,c,d;const h=[];for(let m=0;m<a.length&&!((r-=2)<0);++m)n=a.charCodeAt(m),c=n>>8,d=n%256,h.push(d),h.push(c);return h}function lt(a){return e.toByteArray(lr(a))}function Oe(a,r,n,c){let d;for(d=0;d<c&&!(d+n>=r.length||d>=a.length);++d)r[d+n]=a[d];return d}function ae(a,r){return a instanceof r||a!=null&&a.constructor!=null&&a.constructor.name!=null&&a.constructor.name===r.name}function Ze(a){return a!==a}const fr=function(){const a="0123456789abcdef",r=new Array(256);for(let n=0;n<16;++n){const c=n*16;for(let d=0;d<16;++d)r[c+d]=a[n]+a[d]}return r}();function me(a){return typeof BigInt=="undefined"?hr:a}function hr(){throw new Error("BigInt not supported")}})(je);function Mn(t){const{url:e,isDevice:i,clientId:o,token:s}=t,u=new URL(e+"/events");u.searchParams.append("stream",o),u.searchParams.append("token",s);const f=new URL(e+"/command");f.searchParams.append("token",s);const l=new oe(p=>{const g=new EventSource(u,{withCredentials:!1});return g.onmessage=w=>{p.closed||p.next(vn.decode(je.Buffer.from(w.data,"base64")))},()=>g.close()}).pipe(qt({resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!0}));return{sendCommand(p){fetch(f.toString(),{method:"POST",body:je.Buffer.from(gn.encode(p).finish()).toString("base64")})},onMessage(){return l},closeStream(){fetch(f.toString(),{method:"DELETE"})},closeDeviceStream(p){const g=new URL(e+"/events");g.searchParams.append("stream",p),g.searchParams.append("token",s),fetch(g.toString(),{method:"DELETE"})}}}class Tn{constructor(e){this.robotService=e}async onIceCandidate(e,i,o,s){this.robotService.sendCommand({p2pMessage:{senderId:e,receiverId:i,senderUid:o,iceCandidate:{iceCandidate:JSON.stringify(s)}}})}async sendInitialOffer(e,i,o,s){this.robotService.sendCommand({p2pMessage:{senderId:e,receiverId:i,senderUid:o,initialRtcOffer:{offer:JSON.stringify(s)}}})}async sendAnswer(e,i,o,s){this.robotService.sendCommand({p2pMessage:{senderId:e,receiverId:i,senderUid:o,rtcAnswer:{answer:JSON.stringify(s)}}})}}class _n{constructor(e){const{clientId:i,onMedia:o,peerId:s,uid:u,rtcpHandler:f}=e;this.clientId=i,this.peerId=s,this.uid=u,this.rtcpPeerConnection=new RTCPeerConnection,this.rtcpHandler=f,this.signalizationDataChannel=this.rtcpPeerConnection.createDataChannel("signalization",{id:0,ordered:!0}),this.rtcpPeerConnection.onicecandidate=l=>{this.rtcpHandler.onIceCandidate(this.clientId,s,this.uid,l.candidate)},o({state:"notReady"}),this.rtcpPeerConnection.ontrack=l=>{l.track.onended=()=>{o({state:"notReady"})},l.track.readyState=="live"&&o({state:"ready",mediaStream:l.streams[0]})}}close(){this.rtcpPeerConnection.close()}async call(){const e=await this.rtcpPeerConnection.createOffer({offerToReceiveVideo:!0});await this.rtcpPeerConnection.setLocalDescription(e),await this.rtcpHandler.sendInitialOffer(this.clientId,this.peerId,this.uid,e)}async receiveInitialOfferAndSendAnswer(e){await this.rtcpPeerConnection.setRemoteDescription(e);const i=await this.rtcpPeerConnection.createAnswer();await this.rtcpPeerConnection.setLocalDescription(i),this.rtcpHandler.sendAnswer(this.clientId,this.peerId,this.uid,i)}async addIceCandidate(e){try{await this.rtcpPeerConnection.addIceCandidate(e)}catch(i){console.log(i)}}async receiveOffer(e){await this.rtcpPeerConnection.setRemoteDescription(e)}sendMessage(e){this.signalizationDataChannel.send(e)}}class Rn{constructor(e){this.state=new Wr({type:"NotPeered"});const{onDevices:i,onMedia:o,clientId:s,signalingServerUrl:u,token:f,uid:l}=e;this.clientId=s,this.onMedia=o,this.uid=l,this.robotService=Mn({url:u,isDevice:!1,clientId:this.clientId,token:f}),this.rtcpHandler=new Tn(this.robotService),this.serverObservable=this.robotService.onMessage().pipe(hn(async p=>{var g;switch(!0){case p.p2pMessage!=null:{const w=p.p2pMessage,S=w.senderId;if(S!=((g=this.rtcPeerDecorator)==null?void 0:g.peerId))return;switch(!0){case w.initialRtcOffer!=null:{this.rtcPeerDecorator=this.createRTCPDecorator(S),await this.rtcPeerDecorator.receiveInitialOfferAndSendAnswer(JSON.parse(w.initialRtcOffer.offer));break}case w.iceCandidate!=null:{await this.rtcPeerDecorator.addIceCandidate(JSON.parse(w.iceCandidate.iceCandidate));break}case w.rtcOffer!=null:{await this.rtcPeerDecorator.receiveOffer(JSON.parse(w.rtcOffer.offer));break}case w.rtcAnswer!=null:{await this.rtcPeerDecorator.receiveOffer(JSON.parse(w.rtcAnswer.answer));break}}break}case p.serverState!=null:{const{connectedDevices:w}=p.serverState;i(w),w.find(S=>S.streamId!=this.clientId)||this.closeCurrentCall()}}return p}),qt({resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!0}))}closeStream(){this.robotService.closeStream()}closeDeviceStream(e){this.robotService.closeDeviceStream(e)}start(){this.subscription=this.serverObservable.subscribe()}stop(){var e;(e=this.subscription)==null||e.unsubscribe()}call(e){this.rtcPeerDecorator=this.createRTCPDecorator(e),this.rtcPeerDecorator.call(),this.state.next({type:"Peered",peerId:e})}sendMessage(e){var i;(i=this.rtcPeerDecorator)==null||i.sendMessage(e)}closeCurrentCall(){var e;(e=this.rtcPeerDecorator)==null||e.close(),this.rtcPeerDecorator=null,this.state.next({type:"NotPeered"})}createRTCPDecorator(e){return this.rtcPeerDecorator&&this.closeCurrentCall(),new _n({clientId:this.clientId,uid:this.uid,onMedia:this.onMedia,peerId:e,rtcpHandler:this.rtcpHandler})}}var ye,Dn=new Uint8Array(16);function Pn(){if(!ye&&(ye=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ye))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ye(Dn)}var bn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Un(t){return typeof t=="string"&&bn.test(t)}var G=[];for(var ze=0;ze<256;++ze)G.push((ze+256).toString(16).substr(1));function Ln(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(G[t[e+0]]+G[t[e+1]]+G[t[e+2]]+G[t[e+3]]+"-"+G[t[e+4]]+G[t[e+5]]+"-"+G[t[e+6]]+G[t[e+7]]+"-"+G[t[e+8]]+G[t[e+9]]+"-"+G[t[e+10]]+G[t[e+11]]+G[t[e+12]]+G[t[e+13]]+G[t[e+14]]+G[t[e+15]]).toLowerCase();if(!Un(i))throw TypeError("Stringified UUID is invalid");return i}function Nn(t,e,i){t=t||{};var o=t.random||(t.rng||Pn)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,e){i=i||0;for(var s=0;s<16;++s)e[i+s]=o[s];return e}return Ln(o)}function On(t){let e,i,o,s,u;const f=t[5].default,l=Ir(f,t,t[4],null);return{c(){e=L("div"),l&&l.c(),this.h()},l(p){e=N(p,"DIV",{class:!0});var g=_(e);l&&l.l(g),g.forEach(k),this.h()},h(){I(e,"class",i="flex flex-row place-items-center place-content-center border-2 border-emerald-500 rounded-xl "+(t[1]?"bg-bluemiddle":"bg-bluelight"))},m(p,g){H(p,e,g),l&&l.m(e,null),o=!0,s||(u=[Ae(window,"keydown",t[6]),Ae(window,"keyup",t[7]),Ae(e,"mousedown",t[8]),Ae(e,"mouseup",t[9])],s=!0)},p(p,[g]){l&&l.p&&(!o||g&16)&&Sr(l,f,p,p[4],o?Cr(f,p[4],g,null):xr(p[4]),null),(!o||g&2&&i!==(i="flex flex-row place-items-center place-content-center border-2 border-emerald-500 rounded-xl "+(p[1]?"bg-bluemiddle":"bg-bluelight")))&&I(e,"class",i)},i(p){o||(W(l,p),o=!0)},o(p){Z(l,p),o=!1},d(p){p&&k(e),l&&l.d(p),s=!1,Mt(u)}}}function yn(t,e,i){let{$$slots:o={},$$scope:s}=e,{key:u}=e,{directionEventHandler:f}=e,l=!1;function p(v){i(1,l=v),f(v?{eventType:"KeyDown",direction:u}:{eventType:"KeyReleased",direction:u})}const g=v=>{v.metaKey||v.ctrlKey||v.shiftKey||v.key==u&&(p(!0),v.preventDefault())},w=v=>{v.metaKey||v.ctrlKey||v.shiftKey||v.key==u&&(p(!1),v.preventDefault())},S=()=>p(!0),C=()=>p(!1);return t.$$set=v=>{"key"in v&&i(0,u=v.key),"directionEventHandler"in v&&i(3,f=v.directionEventHandler),"$$scope"in v&&i(4,s=v.$$scope)},[u,l,p,f,s,o,g,w,S,C]}class Ve extends ve{constructor(e){super();Ie(this,e,yn,On,Se,{key:0,directionEventHandler:3})}}var fe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Unidentified="Unidentified",e.Alt="Alt",e.AltGraph="AltGraph",e.CapsLock="CapsLock",e.Control="Control",e.Fn="Fn",e.FnLock="FnLock",e.Hyper="Hyper",e.Meta="Meta",e.NumLock="NumLock",e.ScrollLock="ScrollLock",e.Shift="Shift",e.Super="Super",e.Symbol="Symbol",e.SymbolLock="SymbolLock",e.Enter="Enter",e.Tab="Tab",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.End="End",e.Home="Home",e.PageDown="PageDown",e.PageUp="PageUp",e.Backspace="Backspace",e.Clear="Clear",e.Copy="Copy",e.CrSel="CrSel",e.Cut="Cut",e.Delete="Delete",e.EraseEof="EraseEof",e.ExSel="ExSel",e.Insert="Insert",e.Paste="Paste",e.Redo="Redo",e.Undo="Undo",e.Accept="Accept",e.Again="Again",e.Attn="Attn",e.Cancel="Cancel",e.ContextMenu="ContextMenu",e.Escape="Escape",e.Execute="Execute",e.Find="Find",e.Finish="Finish",e.Help="Help",e.Pause="Pause",e.Play="Play",e.Props="Props",e.Select="Select",e.ZoomIn="ZoomIn",e.ZoomOut="ZoomOut",e.BrightnessDown="BrightnessDown",e.BrightnessUp="BrightnessUp",e.Eject="Eject",e.LogOff="LogOff",e.Power="Power",e.PowerOff="PowerOff",e.PrintScreen="PrintScreen",e.Hibernate="Hibernate",e.Standby="Standby",e.WakeUp="WakeUp",e.AllCandidates="AllCandidates",e.Alphanumeric="Alphanumeric",e.CodeInput="CodeInput",e.Compose="Compose",e.Convert="Convert",e.Dead="Dead",e.FinalMode="FinalMode",e.GroupFirst="GroupFirst",e.GroupLast="GroupLast",e.GroupNext="GroupNext",e.GroupPrevious="GroupPrevious",e.ModeChange="ModeChange",e.NextCandidate="NextCandidate",e.NonConvert="NonConvert",e.PreviousCandidate="PreviousCandidate",e.Process="Process",e.SingleCandidate="SingleCandidate",e.HangulMode="HangulMode",e.HanjaMode="HanjaMode",e.JunjaMode="JunjaMode",e.Eisu="Eisu",e.Hankaku="Hankaku",e.Hiragana="Hiragana",e.HiraganaKatakana="HiraganaKatakana",e.KanaMode="KanaMode",e.KanjiMode="KanjiMode",e.Katakana="Katakana",e.Romaji="Romaji",e.Zenkaku="Zenkaku",e.ZenkakuHanaku="ZenkakuHanaku",e.F1="F1",e.F2="F2",e.F3="F3",e.F4="F4",e.F5="F5",e.F6="F6",e.F7="F7",e.F8="F8",e.F9="F9",e.F10="F10",e.F11="F11",e.F12="F12",e.F13="F13",e.F14="F14",e.F15="F15",e.F16="F16",e.F17="F17",e.F18="F18",e.F19="F19",e.F20="F20",e.Soft1="Soft1",e.Soft2="Soft2",e.Soft3="Soft3",e.Soft4="Soft4",e.AppSwitch="AppSwitch",e.Call="Call",e.Camera="Camera",e.CameraFocus="CameraFocus",e.EndCall="EndCall",e.GoBack="GoBack",e.GoHome="GoHome",e.HeadsetHook="HeadsetHook",e.LastNumberRedial="LastNumberRedial",e.Notification="Notification",e.MannerMode="MannerMode",e.VoiceDial="VoiceDial",e.ChannelDown="ChannelDown",e.ChannelUp="ChannelUp",e.MediaFastForward="MediaFastForward",e.MediaPause="MediaPause",e.MediaPlay="MediaPlay",e.MediaPlayPause="MediaPlayPause",e.MediaRecord="MediaRecord",e.MediaRewind="MediaRewind",e.MediaStop="MediaStop",e.MediaTrackNext="MediaTrackNext",e.MediaTrackPrevious="MediaTrackPrevious",e.AudioBalanceLeft="AudioBalanceLeft",e.AudioBalanceRight="AudioBalanceRight",e.AudioBassDown="AudioBassDown",e.AudioBassBoostDown="AudioBassBoostDown",e.AudioBassBoostToggle="AudioBassBoostToggle",e.AudioBassBoostUp="AudioBassBoostUp",e.AudioBassUp="AudioBassUp",e.AudioFaderFront="AudioFaderFront",e.AudioFaderRear="AudioFaderRear",e.AudioSurroundModeNext="AudioSurroundModeNext",e.AudioTrebleDown="AudioTrebleDown",e.AudioTrebleUp="AudioTrebleUp",e.AudioVolumeDown="AudioVolumeDown",e.AudioVolumeMute="AudioVolumeMute",e.AudioVolumeUp="AudioVolumeUp",e.MicrophoneToggle="MicrophoneToggle",e.MicrophoneVolumeDown="MicrophoneVolumeDown",e.MicrophoneVolumeMute="MicrophoneVolumeMute",e.MicrophoneVolumeUp="MicrophoneVolumeUp",e.TV="TV",e.TV3DMode="TV3DMode",e.TVAntennaCable="TVAntennaCable",e.TVAudioDescription="TVAudioDescription",e.TVAudioDescriptionMixDown="TVAudioDescriptionMixDown",e.TVAudioDescriptionMixUp="TVAudioDescriptionMixUp",e.TVContentsMenu="TVContentsMenu",e.TVDataService="TVDataService",e.TVInput="TVInput",e.TVInputComponent1="TVInputComponent1",e.TVInputComponent2="TVInputComponent2",e.TVInputComposite1="TVInputComposite1",e.TVInputComposite2="TVInputComposite2",e.TVInputHDMI1="TVInputHDMI1",e.TVInputHDMI2="TVInputHDMI2",e.TVInputHDMI3="TVInputHDMI3",e.TVInputHDMI4="TVInputHDMI4",e.TVInputVGA1="TVInputVGA1",e.TVMediaContext="TVMediaContext",e.TVNetwork="TVNetwork",e.TVNumberEntry="TVNumberEntry",e.TVPower="TVPower",e.TVRadioService="TVRadioService",e.TVSatellite="TVSatellite",e.TVSatelliteBS="TVSatelliteBS",e.TVSatelliteCS="TVSatelliteCS",e.TVSatelliteToggle="TVSatelliteToggle",e.TVTerrestrialAnalog="TVTerrestrialAnalog",e.TVTerrestrialDigital="TVTerrestrialDigital",e.TVTimer="TVTimer",e.AVRInput="AVRInput",e.AVRPower="AVRPower",e.ColorF0Red="ColorF0Red",e.ColorF1Green="ColorF1Green",e.ColorF2Yellow="ColorF2Yellow",e.ColorF3Blue="ColorF3Blue",e.ColorF4Grey="ColorF4Grey",e.ColorF5Brown="ColorF5Brown",e.ClosedCaptionToggle="ClosedCaptionToggle",e.Dimmer="Dimmer",e.DisplaySwap="DisplaySwap",e.DVR="DVR",e.Exit="Exit",e.FavoriteClear0="FavoriteClear0",e.FavoriteClear1="FavoriteClear1",e.FavoriteClear2="FavoriteClear2",e.FavoriteClear3="FavoriteClear3",e.FavoriteRecall0="FavoriteRecall0",e.FavoriteRecall1="FavoriteRecall1",e.FavoriteRecall2="FavoriteRecall2",e.FavoriteRecall3="FavoriteRecall3",e.FavoriteStore0="FavoriteStore0",e.FavoriteStore1="FavoriteStore1",e.FavoriteStore2="FavoriteStore2",e.FavoriteStore3="FavoriteStore3",e.Guide="Guide",e.GuideNextDay="GuideNextDay",e.GuidePreviousDay="GuidePreviousDay",e.Info="Info",e.InstantReplay="InstantReplay",e.Link="Link",e.ListProgram="ListProgram",e.LiveContent="LiveContent",e.Lock="Lock",e.MediaApps="MediaApps",e.MediaAudioTrack="MediaAudioTrack",e.MediaLast="MediaLast",e.MediaSkipBackward="MediaSkipBackward",e.MediaSkipForward="MediaSkipForward",e.MediaStepBackward="MediaStepBackward",e.MediaStepForward="MediaStepForward",e.MediaTopMenu="MediaTopMenu",e.NavigateIn="NavigateIn",e.NavigateNext="NavigateNext",e.NavigateOut="NavigateOut",e.NavigatePrevious="NavigatePrevious",e.NextFavoriteChannel="NextFavoriteChannel",e.NextUserProfile="NextUserProfile",e.OnDemand="OnDemand",e.Pairing="Pairing",e.PinPDown="PinPDown",e.PinPMove="PinPMove",e.PinPToggle="PinPToggle",e.PinPUp="PinPUp",e.PlaySpeedDown="PlaySpeedDown",e.PlaySpeedReset="PlaySpeedReset",e.PlaySpeedUp="PlaySpeedUp",e.RandomToggle="RandomToggle",e.RcLowBattery="RcLowBattery",e.RecordSpeedNext="RecordSpeedNext",e.RfBypass="RfBypass",e.ScanChannelsToggle="ScanChannelsToggle",e.ScreenModeNext="ScreenModeNext",e.Settings="Settings",e.SplitScreenToggle="SplitScreenToggle",e.STBInput="STBInput",e.STBPower="STBPower",e.Subtitle="Subtitle",e.Teletext="Teletext",e.VideoModeNext="VideoModeNext",e.Wink="Wink",e.ZoomToggle="ZoomToggle",e.SpeechCorrectionList="SpeechCorrectionList",e.SpeechInputToggle="SpeechInputToggle",e.Close="Close",e.New="New",e.Open="Open",e.Print="Print",e.Save="Save",e.SpellCheck="SpellCheck",e.MailForward="MailForward",e.MailReply="MailReply",e.MailSend="MailSend",e.LaunchCalculator="LaunchCalculator",e.LaunchCalendar="LaunchCalendar",e.LaunchContacts="LaunchContacts",e.LaunchMail="LaunchMail",e.LaunchMediaPlayer="LaunchMediaPlayer",e.LaunchMusicPlayer="LaunchMusicPlayer",e.LaunchMyComputer="LaunchMyComputer",e.LaunchPhone="LaunchPhone",e.LaunchScreenSaver="LaunchScreenSaver",e.LaunchSpreadsheet="LaunchSpreadsheet",e.LaunchWebBrowser="LaunchWebBrowser",e.LaunchWebCam="LaunchWebCam",e.LaunchWordProcessor="LaunchWordProcessor",e.LaunchApplication1="LaunchApplication1",e.LaunchApplication2="LaunchApplication2",e.LaunchApplication3="LaunchApplication3",e.LaunchApplication4="LaunchApplication4",e.LaunchApplication5="LaunchApplication5",e.LaunchApplication6="LaunchApplication6",e.LaunchApplication7="LaunchApplication7",e.LaunchApplication8="LaunchApplication8",e.LaunchApplication9="LaunchApplication9",e.LaunchApplication10="LaunchApplication10",e.LaunchApplication11="LaunchApplication11",e.LaunchApplication12="LaunchApplication12",e.LaunchApplication13="LaunchApplication13",e.LaunchApplication14="LaunchApplication14",e.LaunchApplication15="LaunchApplication15",e.LaunchApplication16="LaunchApplication16",e.BrowserBack="BrowserBack",e.BrowserFavorites="BrowserFavorites",e.BrowserForward="BrowserForward",e.BrowserHome="BrowserHome",e.BrowserRefresh="BrowserRefresh",e.BrowserSearch="BrowserSearch",e.BrowserStop="BrowserStop",e.Decimal="Decimal",e.Key11="Key11",e.Key12="Key12",e.Multiply="Multiply",e.Add="Add",e.Divide="Divide",e.Subtract="Subtract",e.Separator="Separator"}(t.Key||(t.Key={}))})(fe);function Vn(t){let e,i;return{c(){e=ne("svg"),i=ne("path"),this.h()},l(o){e=ie(o,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var s=_(e);i=ie(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(i).forEach(k),s.forEach(k),this.h()},h(){I(i,"stroke-linecap","round"),I(i,"stroke-linejoin","round"),I(i,"stroke-width","2"),I(i,"d","M5 15l7-7 7 7"),I(e,"xmlns","http://www.w3.org/2000/svg"),I(e,"class","h-6 w-6"),I(e,"fill","none"),I(e,"viewBox","0 0 24 24"),I(e,"stroke","currentColor")},m(o,s){H(o,e,s),F(e,i)},p:re,d(o){o&&k(e)}}}function $n(t){let e,i;return{c(){e=ne("svg"),i=ne("path"),this.h()},l(o){e=ie(o,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var s=_(e);i=ie(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(i).forEach(k),s.forEach(k),this.h()},h(){I(i,"stroke-linecap","round"),I(i,"stroke-linejoin","round"),I(i,"stroke-width","2"),I(i,"d","M15 19l-7-7 7-7"),I(e,"xmlns","http://www.w3.org/2000/svg"),I(e,"class","h-6 w-6"),I(e,"fill","none"),I(e,"viewBox","0 0 24 24"),I(e,"stroke","currentColor")},m(o,s){H(o,e,s),F(e,i)},p:re,d(o){o&&k(e)}}}function Hn(t){let e,i;return{c(){e=ne("svg"),i=ne("path"),this.h()},l(o){e=ie(o,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var s=_(e);i=ie(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(i).forEach(k),s.forEach(k),this.h()},h(){I(i,"stroke-linecap","round"),I(i,"stroke-linejoin","round"),I(i,"stroke-width","2"),I(i,"d","M19 9l-7 7-7-7"),I(e,"xmlns","http://www.w3.org/2000/svg"),I(e,"class","h-6 w-6"),I(e,"fill","none"),I(e,"viewBox","0 0 24 24"),I(e,"stroke","currentColor")},m(o,s){H(o,e,s),F(e,i)},p:re,d(o){o&&k(e)}}}function Jn(t){let e,i;return{c(){e=ne("svg"),i=ne("path"),this.h()},l(o){e=ie(o,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var s=_(e);i=ie(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(i).forEach(k),s.forEach(k),this.h()},h(){I(i,"stroke-linecap","round"),I(i,"stroke-linejoin","round"),I(i,"stroke-width","2"),I(i,"d","M9 5l7 7-7 7"),I(e,"xmlns","http://www.w3.org/2000/svg"),I(e,"class","h-6 w-6"),I(e,"fill","none"),I(e,"viewBox","0 0 24 24"),I(e,"stroke","currentColor")},m(o,s){H(o,e,s),F(e,i)},p:re,d(o){o&&k(e)}}}function Gn(t){let e,i,o,s,u,f,l,p,g,w,S,C,v;return s=new Ve({props:{key:fe.Key.ArrowUp,directionEventHandler:t[0],$$slots:{default:[Vn]},$$scope:{ctx:t}}}),p=new Ve({props:{key:fe.Key.ArrowLeft,directionEventHandler:t[0],$$slots:{default:[$n]},$$scope:{ctx:t}}}),w=new Ve({props:{key:fe.Key.ArrowDown,directionEventHandler:t[0],$$slots:{default:[Hn]},$$scope:{ctx:t}}}),C=new Ve({props:{key:fe.Key.ArrowRight,directionEventHandler:t[0],$$slots:{default:[Jn]},$$scope:{ctx:t}}}),{c(){e=L("div"),i=L("div"),o=X(),j(s.$$.fragment),u=X(),f=L("div"),l=X(),j(p.$$.fragment),g=X(),j(w.$$.fragment),S=X(),j(C.$$.fragment),this.h()},l(x){e=N(x,"DIV",{class:!0});var B=_(e);i=N(B,"DIV",{}),_(i).forEach(k),o=z(B),K(s.$$.fragment,B),u=z(B),f=N(B,"DIV",{}),_(f).forEach(k),l=z(B),K(p.$$.fragment,B),g=z(B),K(w.$$.fragment,B),S=z(B),K(C.$$.fragment,B),B.forEach(k),this.h()},h(){I(e,"class","grid grid-cols-3 grid-rows-2 w-64 h-24 gap-1 bg-slate-200 p-2 rounded-2xl border-2 border-slate-300")},m(x,B){H(x,e,B),F(e,i),F(e,o),ee(s,e,null),F(e,u),F(e,f),F(e,l),ee(p,e,null),F(e,g),ee(w,e,null),F(e,S),ee(C,e,null),v=!0},p(x,[B]){const E={};B&1&&(E.directionEventHandler=x[0]),B&2&&(E.$$scope={dirty:B,ctx:x}),s.$set(E);const A={};B&1&&(A.directionEventHandler=x[0]),B&2&&(A.$$scope={dirty:B,ctx:x}),p.$set(A);const b={};B&1&&(b.directionEventHandler=x[0]),B&2&&(b.$$scope={dirty:B,ctx:x}),w.$set(b);const U={};B&1&&(U.directionEventHandler=x[0]),B&2&&(U.$$scope={dirty:B,ctx:x}),C.$set(U)},i(x){v||(W(s.$$.fragment,x),W(p.$$.fragment,x),W(w.$$.fragment,x),W(C.$$.fragment,x),v=!0)},o(x){Z(s.$$.fragment,x),Z(p.$$.fragment,x),Z(w.$$.fragment,x),Z(C.$$.fragment,x),v=!1},d(x){x&&k(e),te(s),te(p),te(w),te(C)}}}function Wn(t,e,i){let{directionFn:o}=e;return t.$$set=s=>{"directionFn"in s&&i(0,o=s.directionFn)},[o]}class Zn extends ve{constructor(e){super();Ie(this,e,Wn,Gn,Se,{directionFn:0})}}function Yn(t){const e=new Dt;return e.pipe(Zr((i,o)=>{switch(o.direction){case fe.Key.ArrowUp:switch(o.eventType){case"KeyDown":return de(ue({},i),{ArrowUp:1});case"KeyReleased":return de(ue({},i),{ArrowUp:0})}case fe.Key.ArrowDown:switch(o.eventType){case"KeyDown":return de(ue({},i),{ArrowDown:1});case"KeyReleased":return de(ue({},i),{ArrowDown:0})}case fe.Key.ArrowLeft:switch(o.eventType){case"KeyDown":return de(ue({},i),{ArrowLeft:1});case"KeyReleased":return de(ue({},i),{ArrowLeft:0})}case fe.Key.ArrowRight:switch(o.eventType){case"KeyDown":return de(ue({},i),{ArrowRight:1});case"KeyReleased":return de(ue({},i),{ArrowRight:0})}}},{ArrowUp:0,ArrowDown:0,ArrowRight:0,ArrowLeft:0}),Yt(i=>({directionCommand:{forward:(i.ArrowUp-i.ArrowDown)*100,right:(i.ArrowRight-i.ArrowLeft)*100}})),wn(300,Pt,{trailing:!0,leading:!1})).subscribe({next:i=>{t(i)}}),i=>{e.next(i)}}function qn(t){let e,i,o;return{c(){e=L("div"),i=he("Video not available"),this.h()},l(s){e=N(s,"DIV",{class:!0});var u=_(e);i=pe(u,"Video not available"),u.forEach(k),this.h()},h(){I(e,"class",o=`${t[2].class} bg-slate-200 text-lg`)},m(s,u){H(s,e,u),F(e,i)},p(s,u){u&4&&o!==(o=`${s[2].class} bg-slate-200 text-lg`)&&I(e,"class",o)},d(s){s&&k(e)}}}function Xn(t){let e,i,o,s,u;return{c(){e=L("video"),i=L("track"),this.h()},l(f){e=N(f,"VIDEO",{class:!0});var l=_(e);i=N(l,"TRACK",{kind:!0}),l.forEach(k),this.h()},h(){I(i,"kind","captions"),e.autoplay=!0,I(e,"class",o=t[2].class+" w-96 rotate-90 self-center")},m(f,l){H(f,e,l),F(e,i),s||(u=Br(t[1].call(null,e)),s=!0)},p(f,l){l&4&&o!==(o=f[2].class+" w-96 rotate-90 self-center")&&I(e,"class",o)},d(f){f&&k(e),s=!1,u()}}}function zn(t){let e;function i(u,f){return u[0]&&u[0].state=="ready"?Xn:qn}let o=i(t),s=o(t);return{c(){s.c(),e=ft()},l(u){s.l(u),e=ft()},m(u,f){s.m(u,f),H(u,e,f)},p(u,[f]){o===(o=i(u))&&s?s.p(u,f):(s.d(1),s=o(u),s&&(s.c(),s.m(e.parentNode,e)))},i:re,o:re,d(u){s.d(u),u&&k(e)}}}function Qn(t,e,i){let{mediaState:o}=e;function s(u){o&&o.state=="ready"&&(u.srcObject=o.mediaStream)}return t.$$set=u=>{i(2,e=$e($e({},e),He(u))),"mediaState"in u&&i(0,o=u.mediaState)},e=He(e),[o,s,e]}class jn extends ve{constructor(e){super();Ie(this,e,Qn,zn,Se,{mediaState:0})}}function Kn(t){let e,i,o,s,u,f,l,p,g,w,S,C;return l=new jn({props:{mediaState:t[1],class:"flex flex-grow place-content-center place-items-center bg-black rounded-2xl"}}),w=new Zn({props:{directionFn:t[5]}}),{c(){e=L("div"),i=L("div"),o=L("span"),s=he("Device Id"),u=he(t[0]),f=X(),j(l.$$.fragment),p=X(),g=L("div"),j(w.$$.fragment),this.h()},l(v){e=N(v,"DIV",{class:!0});var x=_(e);i=N(x,"DIV",{class:!0});var B=_(i);o=N(B,"SPAN",{class:!0});var E=_(o);s=pe(E,"Device Id"),E.forEach(k),u=pe(B,t[0]),B.forEach(k),f=z(x),K(l.$$.fragment,x),p=z(x),g=N(x,"DIV",{class:!0});var A=_(g);K(w.$$.fragment,A),A.forEach(k),x.forEach(k),this.h()},h(){I(o,"class","bg-light-gray text-bluestrong text-sm font-medium mr-2 px-2.5 py-0.5 rounded"),I(i,"class","my-3"),I(g,"class","m-3 self-center"),I(e,"class",S=t[3].class)},m(v,x){H(v,e,x),F(e,i),F(i,o),F(o,s),F(i,u),F(e,f),ee(l,e,null),F(e,p),F(e,g),ee(w,g,null),C=!0},p(v,[x]){(!C||x&1)&&Tt(u,v[0]);const B={};x&2&&(B.mediaState=v[1]),l.$set(B),(!C||x&8&&S!==(S=v[3].class))&&I(e,"class",S)},i(v){C||(W(l.$$.fragment,v),W(w.$$.fragment,v),C=!0)},o(v){Z(l.$$.fragment,v),Z(w.$$.fragment,v),C=!1},d(v){v&&k(e),te(l),te(w)}}}function ei(t,e,i){let{peerId:o}=e,{mediaState:s}=e,{directionFn:u}=e;const f=Yn(u),l=p=>{f(p)};return t.$$set=p=>{i(3,e=$e($e({},e),He(p))),"peerId"in p&&i(0,o=p.peerId),"mediaState"in p&&i(1,s=p.mediaState),"directionFn"in p&&i(4,u=p.directionFn)},e=He(e),[o,s,f,e,u,l]}class ti extends ve{constructor(e){super();Ie(this,e,ei,Kn,Se,{peerId:0,mediaState:1,directionFn:4})}}function Et(t,e,i){const o=t.slice();return o[6]=e[i],o}function ri(t){let e,i;return{c(){e=ne("svg"),i=ne("path"),this.h()},l(o){e=ie(o,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var s=_(e);i=ie(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(i).forEach(k),s.forEach(k),this.h()},h(){I(i,"stroke-linecap","round"),I(i,"stroke-linejoin","round"),I(i,"stroke-width","2"),I(i,"d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"),I(e,"xmlns","http://www.w3.org/2000/svg"),I(e,"class","h-6 w-6 mr-2"),I(e,"fill","none"),I(e,"viewBox","0 0 24 24"),I(e,"stroke","currentColor")},m(o,s){H(o,e,s),F(e,i)},d(o){o&&k(e)}}}function ni(t){let e,i;return{c(){e=ne("svg"),i=ne("path"),this.h()},l(o){e=ie(o,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var s=_(e);i=ie(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(i).forEach(k),s.forEach(k),this.h()},h(){I(i,"stroke-linecap","round"),I(i,"stroke-linejoin","round"),I(i,"stroke-width","2"),I(i,"d","M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"),I(e,"xmlns","http://www.w3.org/2000/svg"),I(e,"class","h-6 w-6 mr-2"),I(e,"fill","none"),I(e,"viewBox","0 0 24 24"),I(e,"stroke","currentColor")},m(o,s){H(o,e,s),F(e,i)},d(o){o&&k(e)}}}function Ft(t,e){let i,o,s,u,f=e[6].streamId+"",l,p,g,w,S,C,v,x;function B(J,O){return J[6].isMobile?ni:ri}let E=B(e),A=E(e);function b(){return e[4](e[6])}function U(){return e[5](e[6])}return{key:t,first:null,c(){i=L("div"),o=L("div"),A.c(),s=X(),u=L("div"),l=he(f),p=X(),g=L("button"),w=he("X"),C=X(),this.h()},l(J){i=N(J,"DIV",{class:!0});var O=_(i);o=N(O,"DIV",{class:!0});var Y=_(o);A.l(Y),s=z(Y),u=N(Y,"DIV",{});var Fe=_(u);l=pe(Fe,f),Fe.forEach(k),p=z(Y),g=N(Y,"BUTTON",{class:!0});var Ne=_(g);w=pe(Ne,"X"),Ne.forEach(k),Y.forEach(k),C=z(O),O.forEach(k),this.h()},h(){I(g,"class","rounded-md bg-red px-2"),I(o,"class",S="flex flex-row justify-between rounded-lg p-1 "+(e[3]==e[6].streamId?"bg-bluelight":"bg-light")+" border-2 hover:bg-sky-200 cursor-pointer transition-transform origin-right duration-100 hover:border-2 hover:border-sky-400"),I(i,"class","box-border my-2 px-3 "),this.first=i},m(J,O){H(J,i,O),F(i,o),A.m(o,null),F(o,s),F(o,u),F(u,l),F(o,p),F(o,g),F(g,w),F(i,C),v||(x=[Ae(g,"click",b),Ae(o,"click",U)],v=!0)},p(J,O){e=J,E!==(E=B(e))&&(A.d(1),A=E(e),A&&(A.c(),A.m(o,s))),O&1&&f!==(f=e[6].streamId+"")&&Tt(l,f),O&9&&S!==(S="flex flex-row justify-between rounded-lg p-1 "+(e[3]==e[6].streamId?"bg-bluelight":"bg-light")+" border-2 hover:bg-sky-200 cursor-pointer transition-transform origin-right duration-100 hover:border-2 hover:border-sky-400")&&I(o,"class",S)},d(J){J&&k(i),A.d(),v=!1,Mt(x)}}}function ii(t){let e,i,o,s,u,f=[],l=new Map,p=t[0];const g=w=>w[6].streamId;for(let w=0;w<p.length;w+=1){let S=Et(t,p,w),C=g(S);l.set(C,f[w]=Ft(C,S))}return{c(){e=L("div"),i=L("div"),o=he("Available devices"),s=X(),u=L("div");for(let w=0;w<f.length;w+=1)f[w].c();this.h()},l(w){e=N(w,"DIV",{class:!0});var S=_(e);i=N(S,"DIV",{class:!0});var C=_(i);o=pe(C,"Available devices"),C.forEach(k),S.forEach(k),s=z(w),u=N(w,"DIV",{class:!0});var v=_(u);for(let x=0;x<f.length;x+=1)f[x].l(v);v.forEach(k),this.h()},h(){I(i,"class","text-center text-gray"),I(e,"class","w-full shadow-sm py-2"),I(u,"class","overflow-y-scroll")},m(w,S){H(w,e,S),F(e,i),F(i,o),H(w,s,S),H(w,u,S);for(let C=0;C<f.length;C+=1)f[C].m(u,null)},p(w,[S]){S&15&&(p=w[0],f=kr(f,S,g,1,w,p,l,u,Ar,Ft,null,Et))},i:re,o:re,d(w){w&&k(e),w&&k(s),w&&k(u);for(let S=0;S<f.length;S+=1)f[S].d()}}}function oi(t,e,i){let{devices:o}=e,{selectDevice:s}=e,{deleteDevice:u}=e,f="";const l=g=>u(g.streamId),p=g=>{i(3,f=g.streamId),s(g.streamId)};return t.$$set=g=>{"devices"in g&&i(0,o=g.devices),"selectDevice"in g&&i(1,s=g.selectDevice),"deleteDevice"in g&&i(2,u=g.deleteDevice)},[o,s,u,f,l,p]}class ai extends ve{constructor(e){super();Ie(this,e,oi,ii,Se,{devices:0,selectDevice:1,deleteDevice:2})}}function si(t){let e,i;return e=new yr({props:{slot:"topbar"}}),{c(){j(e.$$.fragment)},l(o){K(e.$$.fragment,o)},m(o,s){ee(e,o,s),i=!0},p:re,i(o){i||(W(e.$$.fragment,o),i=!0)},o(o){Z(e.$$.fragment,o),i=!1},d(o){te(e,o)}}}function ci(t){let e,i;return{c(){e=L("div"),i=he("Select a device"),this.h()},l(o){e=N(o,"DIV",{class:!0});var s=_(e);i=pe(s,"Select a device"),s.forEach(k),this.h()},h(){I(e,"class","flex flex-grow place-items-center place-content-center text-xl text-gray")},m(o,s){H(o,e,s),F(e,i)},p:re,i:re,o:re,d(o){o&&k(e)}}}function li(t){let e,i;return e=new ti({props:{class:"flex flex-grow flex-col shadow-lg p-4 border-2 border-gray-100 rounded-lg",peerId:t[2].peerId,mediaState:t[1],directionFn:t[6]}}),{c(){j(e.$$.fragment)},l(o){K(e.$$.fragment,o)},m(o,s){ee(e,o,s),i=!0},p(o,s){const u={};s&4&&(u.peerId=o[2].peerId),s&2&&(u.mediaState=o[1]),s&8&&(u.directionFn=o[6]),e.$set(u)},i(o){i||(W(e.$$.fragment,o),i=!0)},o(o){Z(e.$$.fragment,o),i=!1},d(o){te(e,o)}}}function ui(t){let e,i,o,s,u,f,l,p,g,w,S,C;const v=[li,ci],x=[];function B(E,A){return E[2]&&E[2].type=="Peered"?0:1}return l=B(t),p=x[l]=v[l](t),S=new ai({props:{selectDevice:t[7],deleteDevice:t[8],devices:t[0]}}),{c(){e=L("div"),i=L("div"),o=L("div"),s=he("Control center for device: "),u=he(t[4]),f=X(),p.c(),g=X(),w=L("div"),j(S.$$.fragment),this.h()},l(E){e=N(E,"DIV",{slot:!0,class:!0});var A=_(e);i=N(A,"DIV",{class:!0});var b=_(i);o=N(b,"DIV",{class:!0});var U=_(o);s=pe(U,"Control center for device: "),u=pe(U,t[4]),U.forEach(k),f=z(b),p.l(b),b.forEach(k),g=z(A),w=N(A,"DIV",{class:!0});var J=_(w);K(S.$$.fragment,J),J.forEach(k),A.forEach(k),this.h()},h(){I(o,"class","textxl text-gray"),I(i,"class","flex flex-grow flex-col m-5"),I(w,"class","flex flex-col flex-grow max-w-md shadow-md"),I(e,"slot","main"),I(e,"class","flex flex-row flex-grow")},m(E,A){H(E,e,A),F(e,i),F(i,o),F(o,s),F(o,u),F(i,f),x[l].m(i,null),F(e,g),F(e,w),ee(S,w,null),C=!0},p(E,A){let b=l;l=B(E),l===b?x[l].p(E,A):(Tr(),Z(x[b],1,1,()=>{x[b]=null}),_r(),p=x[l],p?p.p(E,A):(p=x[l]=v[l](E),p.c()),W(p,1),p.m(i,null));const U={};A&8&&(U.selectDevice=E[7]),A&8&&(U.deleteDevice=E[8]),A&1&&(U.devices=E[0]),S.$set(U)},i(E){C||(W(p),W(S.$$.fragment,E),C=!0)},o(E){Z(p),Z(S.$$.fragment,E),C=!1},d(E){E&&k(e),x[l].d(),te(S)}}}function di(t){let e,i;return e=new Or({props:{$$slots:{main:[ui],topbar:[si]},$$scope:{ctx:t}}}),{c(){j(e.$$.fragment)},l(o){K(e.$$.fragment,o)},m(o,s){ee(e,o,s),i=!0},p(o,[s]){const u={};s&1039&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){i||(W(e.$$.fragment,o),i=!0)},o(o){Z(e.$$.fragment,o),i=!1},d(o){te(e,o)}}}function fi(t,e,i){let o,s;Er(t,Vr,v=>i(5,s=v));let u=Nn(),f=[],l,p,g;Fr(async()=>{o.type=="LoggedIn"&&(i(3,g=new Rn({clientId:u,uid:o.user.uid,onDevices:v=>{i(0,f=v.filter(x=>x.streamId!=u&&x.isMobile))},onMedia:v=>{i(1,l=v)},signalingServerUrl:$r.robotService.url,token:await o.user.getIdToken()})),g.start(),g.state.subscribe({next:v=>{i(2,p=v)}}))}),Mr(()=>{g==null||g.stop()});const w=v=>{g.sendMessage(In.encode(v).finish())},S=v=>{g.call(v)},C=v=>{g.closeDeviceStream(v)};return t.$$.update=()=>{t.$$.dirty&32&&(o=s.authState)},[f,l,p,g,u,s,w,S,C]}class hi extends ve{constructor(e){super();Ie(this,e,fi,di,Se,{})}}function pi(t){let e,i;return e=new hi({}),{c(){j(e.$$.fragment)},l(o){K(e.$$.fragment,o)},m(o,s){ee(e,o,s),i=!0},i(o){i||(W(e.$$.fragment,o),i=!0)},o(o){Z(e.$$.fragment,o),i=!1},d(o){te(e,o)}}}function mi(t){let e,i;return e=new Rr({props:{denyIfNotAuthenticated:!0,$$slots:{default:[pi]},$$scope:{ctx:t}}}),{c(){j(e.$$.fragment)},l(o){K(e.$$.fragment,o)},m(o,s){ee(e,o,s),i=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){i||(W(e.$$.fragment,o),i=!0)},o(o){Z(e.$$.fragment,o),i=!1},d(o){te(e,o)}}}class Ai extends ve{constructor(e){super();Ie(this,e,null,mi,Se,{})}}export{Ai as default};
