import{_ as ue}from"../../chunks/preload-helper-ec9aa979.js";import{S as K,i as Q,s as X,e as v,t as P,c as b,a as y,h as w,d as h,b as g,g as k,H as m,j as fe,k as V,m as C,_ as Y,I as F,C as re,$ as se,w as B,x as U,y as A,q as T,o as H,B as O,a1 as J,v as ce,n as de,p as me}from"../../chunks/vendor-9bb32b1c.js";import{P as he,S as pe}from"../../chunks/StandardTopBar-3351b157.js";import{c as ge,a as _e}from"../../chunks/AuthService-73b3557b.js";import"../../chunks/singletons-a6a7384f.js";function ne(s){let e,t,l=s[3].reason+"",i;return{c(){e=v("span"),t=P("* "),i=P(l),this.h()},l(r){e=b(r,"SPAN",{class:!0});var a=y(e);t=w(a,"* "),i=w(a,l),a.forEach(h),this.h()},h(){g(e,"class","ml-1 text-xs font-light italic text-red")},m(r,a){k(r,e,a),m(e,t),m(e,i)},p(r,a){a&8&&l!==(l=r[3].reason+"")&&fe(i,l)},d(r){r&&h(e)}}}function ve(s){let e,t,l,i,r,a,u,o,f,_,p=s[3].type=="not_valid"&&ne(s);return{c(){e=v("div"),t=v("label"),l=P(s[0]),i=V(),p&&p.c(),r=V(),a=v("input"),this.h()},l(d){e=b(d,"DIV",{class:!0});var n=y(e);t=b(n,"LABEL",{class:!0,for:!0});var c=y(t);l=w(c,s[0]),i=C(c),p&&p.l(c),c.forEach(h),r=C(n),a=b(n,"INPUT",{class:!0,type:!0}),n.forEach(h),this.h()},h(){g(t,"class","block text-black text-sm mb-2"),g(t,"for","firstname"),g(a,"class",u=`shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none ${s[3].type=="valid"?"border-gray":"border-red"}`),g(a,"type","text"),a.value=s[1],g(e,"class",o=s[4].class)},m(d,n){k(d,e,n),m(e,t),m(t,l),m(t,i),p&&p.m(t,null),m(e,r),m(e,a),f||(_=Y(a,"input",s[6]),f=!0)},p(d,[n]){n&1&&fe(l,d[0]),d[3].type=="not_valid"?p?p.p(d,n):(p=ne(d),p.c(),p.m(t,null)):p&&(p.d(1),p=null),n&8&&u!==(u=`shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none ${d[3].type=="valid"?"border-gray":"border-red"}`)&&g(a,"class",u),n&2&&a.value!==d[1]&&(a.value=d[1]),n&16&&o!==(o=d[4].class)&&g(e,"class",o)},i:F,o:F,d(d){d&&h(e),p&&p.d(),f=!1,_()}}}function be(s,e,t){let l,{fieldName:i}=e,{value:r}=e,{onChange:a}=e,{validator:u}=e;const o=f=>{a(f.currentTarget.value)};return s.$$set=f=>{t(4,e=re(re({},e),se(f))),"fieldName"in f&&t(0,i=f.fieldName),"value"in f&&t(1,r=f.value),"onChange"in f&&t(2,a=f.onChange),"validator"in f&&t(5,u=f.validator)},s.$$.update=()=>{s.$$.dirty&34&&t(3,l=u(r))},e=se(e),[i,r,a,l,e,u,o]}class ie extends K{constructor(e){super();Q(this,e,be,ve,X,{fieldName:0,value:1,onChange:2,validator:5})}}function oe(s,e,t){return l=>!l||l.length<e?{type:"not_valid",reason:`field "${s}: should be longer than ${e} character`}:l&&l.length>t?{type:"not_valid",reason:`field "${s}" should be shorter than ${t} character`}:{type:"valid"}}function ye(s){let e,t,l,i,r,a,u,o,f,_,p,d;return t=new ie({props:{fieldName:"First Name",value:s[0].firstName,onChange:s[8],validator:oe("First Name",1,15)}}),i=new ie({props:{fieldName:"Family Name",value:s[0].familyName,onChange:s[9],validator:oe("Family name",1,15)}}),{c(){e=v("div"),B(t.$$.fragment),l=V(),B(i.$$.fragment),r=V(),a=v("div"),u=v("button"),o=P("Save"),this.h()},l(n){e=b(n,"DIV",{class:!0});var c=y(e);U(t.$$.fragment,c),l=C(c),U(i.$$.fragment,c),r=C(c),a=b(c,"DIV",{class:!0});var N=y(a);u=b(N,"BUTTON",{class:!0});var D=y(u);o=w(D,"Save"),D.forEach(h),N.forEach(h),c.forEach(h),this.h()},h(){u.disabled=s[1],g(u,"class",f=`px-5 py-2 rounded-lg cursor-pointer mr-1 ${s[1]?"bg-lightGray":"bg-bluelight hover:bg-bluemiddle"}`),g(a,"class","flex flex-row place-content-end"),g(e,"class","flex flex-col space-y-2")},m(n,c){k(n,e,c),A(t,e,null),m(e,l),A(i,e,null),m(e,r),m(e,a),m(a,u),m(u,o),_=!0,p||(d=Y(u,"click",s[2]),p=!0)},p(n,[c]){const N={};c&1&&(N.value=n[0].firstName),c&1&&(N.onChange=n[8]),t.$set(N);const D={};c&1&&(D.value=n[0].familyName),c&1&&(D.onChange=n[9]),i.$set(D),(!_||c&2)&&(u.disabled=n[1]),(!_||c&2&&f!==(f=`px-5 py-2 rounded-lg cursor-pointer mr-1 ${n[1]?"bg-lightGray":"bg-bluelight hover:bg-bluemiddle"}`))&&g(u,"class",f)},i(n){_||(T(t.$$.fragment,n),T(i.$$.fragment,n),_=!0)},o(n){H(t.$$.fragment,n),H(i.$$.fragment,n),_=!1},d(n){n&&h(e),O(t),O(i),p=!1,d()}}}function Ee(s){return s.firstName&&s.familyName&&s.familyName.length>=1&&s.firstName.length>=1&&s.familyName.length<=15&&s.firstName.length<=15}function Ne(s,e,t){let l,i,r,{profile:a}=e,{profileHandler:u}=e,o=J.clone(a),f=!1;async function _(){try{t(5,f=!0);const n=await(u==null?void 0:u.updateProfile(a));t(4,o=J.clone(a))}finally{t(5,f=!1)}}const p=n=>t(0,a.firstName=n,a),d=n=>t(0,a.familyName=n,a);return s.$$set=n=>{"profile"in n&&t(0,a=n.profile),"profileHandler"in n&&t(3,u=n.profileHandler)},s.$$.update=()=>{s.$$.dirty&17&&t(7,l=J.isEqual(o,a)),s.$$.dirty&1&&t(6,i=Ee(a)),s.$$.dirty&224&&t(1,r=l||f||!i)},[a,r,_,u,o,f,i,l,p,d]}class De extends K{constructor(e){super();Q(this,e,Ne,ye,X,{profile:0,profileHandler:3})}}function Ie(s){let e,t;return e=new pe({props:{slot:"topbar"}}),{c(){B(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,i){A(e,l,i),t=!0},p:F,i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function Pe(s){let e,t,l;return{c(){e=v("div"),t=v("div"),l=P("There seems to be some error"),this.h()},l(i){e=b(i,"DIV",{class:!0});var r=y(e);t=b(r,"DIV",{class:!0});var a=y(t);l=w(a,"There seems to be some error"),a.forEach(h),r.forEach(h),this.h()},h(){g(t,"class","text-2xl md:text-5xl text-bluestrong text-center"),g(e,"class","flex flex-col flex-grow w-full h-full items-center place-content-center space-y-6")},m(i,r){k(i,e,r),m(e,t),m(t,l)},p:F,i:F,o:F,d(i){i&&h(e)}}}function we(s){let e,t,l,i,r,a,u,o,f,_,p,d,n,c,N,D,S,z,x,G,j,M,Z;return a=new De({props:{profile:s[1],profileHandler:s[0]}}),{c(){e=v("div"),t=v("div"),l=P("Personal info"),i=V(),r=v("div"),B(a.$$.fragment),u=V(),o=v("div"),f=v("div"),_=P("Danger zone"),p=V(),d=v("div"),n=v("div"),c=v("button"),N=P("Delete profile"),D=V(),S=v("div"),z=P("* The website is in beta stage, in case of any issue feel free to contact "),x=v("a"),G=P("info@targist.com"),this.h()},l(E){e=b(E,"DIV",{class:!0});var I=y(e);t=b(I,"DIV",{class:!0});var L=y(t);l=w(L,"Personal info"),L.forEach(h),i=C(I),r=b(I,"DIV",{class:!0});var q=y(r);U(a.$$.fragment,q),u=C(q),o=b(q,"DIV",{});var R=y(o);f=b(R,"DIV",{class:!0});var $=y(f);_=w($,"Danger zone"),$.forEach(h),p=C(R),d=b(R,"DIV",{class:!0});var ee=y(d);n=b(ee,"DIV",{class:!0});var te=y(n);c=b(te,"BUTTON",{class:!0});var le=y(c);N=w(le,"Delete profile"),le.forEach(h),te.forEach(h),ee.forEach(h),R.forEach(h),q.forEach(h),I.forEach(h),D=C(E),S=b(E,"DIV",{class:!0});var W=y(S);z=w(W,"* The website is in beta stage, in case of any issue feel free to contact "),x=b(W,"A",{class:!0,href:!0});var ae=y(x);G=w(ae,"info@targist.com"),ae.forEach(h),W.forEach(h),this.h()},h(){g(t,"class","hero-title"),g(f,"class","text-red"),g(c,"class","px-4 py-2 flex bg-red rounded-md text-light "),g(n,"class",""),g(d,"class","flex flex-col space-y-4 border-2 border-red rounded-lg w-full p-1"),g(r,"class","flex flex-col space-y-4 mt-28"),g(e,"class","flex flex-col my-8"),g(x,"class","text-bluestrong underline"),g(x,"href","mailto:info@targist.com"),g(S,"class","italic text-gray text-sm mt-14")},m(E,I){k(E,e,I),m(e,t),m(t,l),m(e,i),m(e,r),A(a,r,null),m(r,u),m(r,o),m(o,f),m(f,_),m(o,p),m(o,d),m(d,n),m(n,c),m(c,N),k(E,D,I),k(E,S,I),m(S,z),m(S,x),m(x,G),j=!0,M||(Z=Y(c,"click",s[4]),M=!0)},p(E,I){const L={};I&2&&(L.profile=E[1]),I&1&&(L.profileHandler=E[0]),a.$set(L)},i(E){j||(T(a.$$.fragment,E),j=!0)},o(E){H(a.$$.fragment,E),j=!1},d(E){E&&h(e),O(a),E&&h(D),E&&h(S),M=!1,Z()}}}function ke(s){let e,t,l,i;const r=[we,Pe],a=[];function u(o,f){return o[2]=="Success"?0:o[2]=="Error"?1:-1}return~(t=u(s))&&(l=a[t]=r[t](s)),{c(){e=v("div"),l&&l.c(),this.h()},l(o){e=b(o,"DIV",{class:!0,slot:!0});var f=y(e);l&&l.l(f),f.forEach(h),this.h()},h(){g(e,"class","flex flex-col lg:mx-auto max-w-screen-md w-full mx-3"),g(e,"slot","main")},m(o,f){k(o,e,f),~t&&a[t].m(e,null),i=!0},p(o,f){let _=t;t=u(o),t===_?~t&&a[t].p(o,f):(l&&(de(),H(a[_],1,1,()=>{a[_]=null}),me()),~t?(l=a[t],l?l.p(o,f):(l=a[t]=r[t](o),l.c()),T(l,1),l.m(e,null)):l=null)},i(o){i||(T(l),i=!0)},o(o){H(l),i=!1},d(o){o&&h(e),~t&&a[t].d()}}}function Ve(s){let e,t,l,i;return l=new he({props:{deny_if_not_auth:!0,pageIsReady:s[2]!="Loading",$$slots:{main:[ke],topbar:[Ie]},$$scope:{ctx:s}}}),{c(){e=v("module"),t=V(),B(l.$$.fragment),this.h()},l(r){e=b(r,"MODULE",{lang:!0}),y(e).forEach(h),t=C(r),U(l.$$.fragment,r),this.h()},h(){g(e,"lang","ts")},m(r,a){k(r,e,a),k(r,t,a),A(l,r,a),i=!0},p(r,[a]){const u={};a&4&&(u.pageIsReady=r[2]!="Loading"),a&39&&(u.$$scope={dirty:a,ctx:r}),l.$set(u)},i(r){i||(T(l.$$.fragment,r),i=!0)},o(r){H(l.$$.fragment,r),i=!1},d(r){r&&h(e),r&&h(t),O(l,r)}}}function Ce(s,e,t){let l,i,r="Loading",{num:a}=e;ce(async()=>{try{const o=await new Promise((d,n)=>{const c=ge.subscribe(N=>{N.auth0Client!=null&&(d(N.auth0Client),c())})});await new Promise((d,n)=>{const c=_e.subscribe(N=>{N.authState.type=="LoggedIn"&&(d(N.authState),c())})});const f=(await ue(()=>import("../../chunks/profile-utils-4404320e.js"),["chunks/profile-utils-4404320e.js","chunks/AuthService-73b3557b.js","assets/AuthService-289df8b5.css","chunks/vendor-9bb32b1c.js"])).ProfileHandler,_=await o.getTokenSilently();t(0,l=new f(_));const p=await l.getProfile();p.failed?t(2,r="Error"):(t(1,i=p.succeeded.profile),t(2,r="Success"))}catch(o){t(2,r="Error"),console.log(o)}});const u=()=>{l.deleteProfile()};return s.$$set=o=>{"num"in o&&t(3,a=o.num)},[l,i,r,a,u]}class Fe extends K{constructor(e){super();Q(this,e,Ce,Ve,X,{num:3})}}export{Fe as default};
