import{S as F,i as L,s as q,e as v,t as C,c as b,a as $,h as I,d as g,b as p,g as O,H as u,j as ge,k as T,m as A,T as te,E as G,C as fe,O as ce,w as P,x as w,y as x,q as y,o as k,B as N,Q as ue,l as j,R as be,n as $e,p as ye}from"../../chunks/index-f40bfaf5.js";import{L as ke,S as Ee}from"../../chunks/SecurityCheckPage-22ac2472.js";import{G as Pe,r as we,A as xe,w as Y,l as Ne,E as De,d as Ce,e as Z,P as he,S as _e,f as de}from"../../chunks/StandardTopBar-bb280db2.js";import{_ as ee}from"../../chunks/lodash-96483f6c.js";/* empty css                       */import"../../chunks/singletons-0b89c4cc.js";import"../../chunks/_commonjsHelpers-7d66b65f.js";const Ie=new Pe;class Ve{constructor(e,r){this.user=e,this.store=r}async deleteProfile(){const e=this.user.uid;return console.log("Delete profile",e),we(this.user,Ie).then(r=>{r.user.delete()}).then(()=>xe(Y(this.store,Z.usersCollection,e))).then(()=>(Ne(),{body:{}})).catch(r=>(console.log(r),{error:{}}))}async updateProfile(e){const r=this.user.uid;console.log("Update profile",r);const t=Y(this.store,Z.usersCollection,r);return De(t,{displayName:e.displayName},{merge:!0}).then(()=>({body:{}})).catch(l=>(console.log(l),{error:{}}))}async getProfile(){const e=this.user.uid;console.log("Get profile",e);const r=Y(this.store,Z.usersCollection,e);return Ce(r).then(t=>{const l=t.data();return{body:{profile:{displayName:l.displayName,email:l.email}}}}).catch(t=>(console.log(t),{error:{}}))}}function me(n){let e,r,t=n[4].reason+"",l;return{c(){e=v("span"),r=C("* "),l=C(t),this.h()},l(o){e=b(o,"SPAN",{class:!0});var a=$(e);r=I(a,"* "),l=I(a,t),a.forEach(g),this.h()},h(){p(e,"class","ml-1 text-xs font-light italic text-red")},m(o,a){O(o,e,a),u(e,r),u(e,l)},p(o,a){a&16&&t!==(t=o[4].reason+"")&&ge(l,t)},d(o){o&&g(e)}}}function He(n){let e,r,t,l,o,a,s,i,m,c,h=n[4].type=="not_valid"&&me(n);return{c(){e=v("div"),r=v("label"),t=C(n[0]),l=T(),h&&h.c(),o=T(),a=v("input"),this.h()},l(d){e=b(d,"DIV",{class:!0});var f=$(e);r=b(f,"LABEL",{class:!0,for:!0});var _=$(r);t=I(_,n[0]),l=A(_),h&&h.l(_),_.forEach(g),o=A(f),a=b(f,"INPUT",{class:!0,type:!0}),f.forEach(g),this.h()},h(){p(r,"class","block text-gray text-sm mb-2"),p(r,"for","firstname"),p(a,"class",s=`appearance-none border rounded-lg w-full py-2 px-3 leading-tight outline-none read-only:bg-medium-gray read-only:text-gray ${n[4].type=="valid"?"border-lightGray":"border-red"}`),p(a,"type","text"),a.value=n[1],a.readOnly=n[2],p(e,"class",i=n[5].class)},m(d,f){O(d,e,f),u(e,r),u(r,t),u(r,l),h&&h.m(r,null),u(e,o),u(e,a),m||(c=te(a,"input",n[7]),m=!0)},p(d,[f]){f&1&&ge(t,d[0]),d[4].type=="not_valid"?h?h.p(d,f):(h=me(d),h.c(),h.m(r,null)):h&&(h.d(1),h=null),f&16&&s!==(s=`appearance-none border rounded-lg w-full py-2 px-3 leading-tight outline-none read-only:bg-medium-gray read-only:text-gray ${d[4].type=="valid"?"border-lightGray":"border-red"}`)&&p(a,"class",s),f&2&&a.value!==d[1]&&(a.value=d[1]),f&4&&(a.readOnly=d[2]),f&32&&i!==(i=d[5].class)&&p(e,"class",i)},i:G,o:G,d(d){d&&g(e),h&&h.d(),m=!1,c()}}}function Se(n,e,r){let t,{fieldName:l}=e,{value:o}=e,{readonly:a=!1}=e,{onChange:s}=e,{validator:i}=e;const m=c=>{s(c.currentTarget.value)};return n.$$set=c=>{r(5,e=fe(fe({},e),ce(c))),"fieldName"in c&&r(0,l=c.fieldName),"value"in c&&r(1,o=c.value),"readonly"in c&&r(2,a=c.readonly),"onChange"in c&&r(3,s=c.onChange),"validator"in c&&r(6,i=c.validator)},n.$$.update=()=>{n.$$.dirty&66&&r(4,t=i(o))},e=ce(e),[l,o,a,s,t,e,i,m]}class pe extends F{constructor(e){super();L(this,e,Se,He,q,{fieldName:0,value:1,readonly:2,onChange:3,validator:6})}}function Te(n,e,r){return t=>!t||t.length<e?{type:"not_valid",reason:`field "${n}: should be longer than ${e} character`}:t&&t.length>r?{type:"not_valid",reason:`field "${n}" should be shorter than ${r} character`}:{type:"valid"}}function Ae(n){let e,r,t,l,o,a,s,i,m,c,h,d;return r=new pe({props:{fieldName:"Full Name",value:n[0].displayName,onChange:n[7],validator:Te("Display Name",1,32)}}),l=new pe({props:{fieldName:"E-mail",value:n[0].email,onChange:Be,validator:Ge,readonly:!0}}),{c(){e=v("div"),P(r.$$.fragment),t=T(),P(l.$$.fragment),o=T(),a=v("div"),s=v("button"),i=C("Save"),this.h()},l(f){e=b(f,"DIV",{class:!0});var _=$(e);w(r.$$.fragment,_),t=A(_),w(l.$$.fragment,_),o=A(_),a=b(_,"DIV",{class:!0});var E=$(a);s=b(E,"BUTTON",{class:!0});var V=$(s);i=I(V,"Save"),V.forEach(g),E.forEach(g),_.forEach(g),this.h()},h(){s.disabled=n[1],p(s,"class",m=`px-5 py-2 rounded-lg cursor-pointer mr-1 ${n[1]?"bg-medium-gray":"bg-bluelight hover:bg-bluemiddle"}`),p(a,"class","flex flex-row place-content-end"),p(e,"class","flex flex-col space-y-2")},m(f,_){O(f,e,_),x(r,e,null),u(e,t),x(l,e,null),u(e,o),u(e,a),u(a,s),u(s,i),c=!0,h||(d=te(s,"click",n[2]),h=!0)},p(f,[_]){const E={};_&1&&(E.value=f[0].displayName),_&1&&(E.onChange=f[7]),r.$set(E);const V={};_&1&&(V.value=f[0].email),l.$set(V),(!c||_&2)&&(s.disabled=f[1]),(!c||_&2&&m!==(m=`px-5 py-2 rounded-lg cursor-pointer mr-1 ${f[1]?"bg-medium-gray":"bg-bluelight hover:bg-bluemiddle"}`))&&p(s,"class",m)},i(f){c||(y(r.$$.fragment,f),y(l.$$.fragment,f),c=!0)},o(f){k(r.$$.fragment,f),k(l.$$.fragment,f),c=!1},d(f){f&&g(e),N(r),N(l),h=!1,d()}}}function Ue(n){return n.displayName&&n.email&&n.displayName.length>=1&&n.displayName.length<=32}const Be=n=>{},Ge=n=>({type:"valid"});function Oe(n,e,r){let t,l,o,{profile:a}=e,{profileHandler:s}=e,i=ee.clone(a),m=!1;async function c(){try{m=!0;const d=await s.updateProfile(a);r(4,i=ee.clone(a))}finally{m=!1}}const h=d=>r(0,a.displayName=d,a);return n.$$set=d=>{"profile"in d&&r(0,a=d.profile),"profileHandler"in d&&r(3,s=d.profileHandler)},n.$$.update=()=>{n.$$.dirty&17&&r(6,t=ee.isEqual(i,a)),n.$$.dirty&1&&r(5,l=Ue(a)),n.$$.dirty&96&&r(1,o=t||!l)},[a,o,c,s,i,l,t,h]}class Fe extends F{constructor(e){super();L(this,e,Oe,Ae,q,{profile:0,profileHandler:3})}}function Le(n){let e,r;return e=new _e({props:{slot:"topbar"}}),{c(){P(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,l){x(e,t,l),r=!0},p:G,i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function qe(n){let e,r,t,l,o,a,s,i,m,c,h,d,f,_,E,V,M,U,Q,B,J,R,K,re;return s=new Fe({props:{profile:n[0],profileHandler:n[1]}}),{c(){e=v("div"),r=v("div"),t=v("div"),l=C("Personal info"),o=T(),a=v("div"),P(s.$$.fragment),i=T(),m=v("div"),c=v("div"),h=C("Danger zone"),d=T(),f=v("div"),_=v("div"),E=v("button"),V=C("Delete profile"),M=T(),U=v("div"),Q=C("* The website is in beta stage, in case of any issue feel free to contact "),B=v("a"),J=C("info@targist.com"),this.h()},l(D){e=b(D,"DIV",{class:!0,slot:!0});var H=$(e);r=b(H,"DIV",{class:!0});var S=$(r);t=b(S,"DIV",{class:!0});var le=$(t);l=I(le,"Personal info"),le.forEach(g),o=A(S),a=b(S,"DIV",{class:!0});var z=$(a);w(s.$$.fragment,z),i=A(z),m=b(z,"DIV",{});var W=$(m);c=b(W,"DIV",{class:!0});var ne=$(c);h=I(ne,"Danger zone"),ne.forEach(g),d=A(W),f=b(W,"DIV",{class:!0});var ae=$(f);_=b(ae,"DIV",{class:!0});var oe=$(_);E=b(oe,"BUTTON",{class:!0});var se=$(E);V=I(se,"Delete profile"),se.forEach(g),oe.forEach(g),ae.forEach(g),W.forEach(g),z.forEach(g),S.forEach(g),M=A(H),U=b(H,"DIV",{class:!0});var X=$(U);Q=I(X,"* The website is in beta stage, in case of any issue feel free to contact "),B=b(X,"A",{class:!0,href:!0});var ie=$(B);J=I(ie,"info@targist.com"),ie.forEach(g),X.forEach(g),H.forEach(g),this.h()},h(){p(t,"class","hero-title"),p(c,"class","text-red"),p(E,"class","px-4 py-2 flex bg-red rounded-md text-light "),p(_,"class",""),p(f,"class","flex flex-col space-y-4 border-2 border-red rounded-lg w-full p-1"),p(a,"class","flex flex-col space-y-4 mt-28"),p(r,"class","flex flex-col my-8"),p(B,"class","text-bluestrong underline"),p(B,"href","mailto:info@targist.com"),p(U,"class","italic text-gray text-sm mt-14"),p(e,"class","flex flex-col mx-auto max-w-screen-md w-full px-3"),p(e,"slot","main")},m(D,H){O(D,e,H),u(e,r),u(r,t),u(t,l),u(r,o),u(r,a),x(s,a,null),u(a,i),u(a,m),u(m,c),u(c,h),u(m,d),u(m,f),u(f,_),u(_,E),u(E,V),u(e,M),u(e,U),u(U,Q),u(U,B),u(B,J),R=!0,K||(re=te(E,"click",n[2]),K=!0)},p(D,H){const S={};H&1&&(S.profile=D[0]),H&2&&(S.profileHandler=D[1]),s.$set(S)},i(D){R||(y(s.$$.fragment,D),R=!0)},o(D){k(s.$$.fragment,D),R=!1},d(D){D&&g(e),N(s),K=!1,re()}}}function Re(n){let e,r;return e=new he({props:{$$slots:{main:[qe],topbar:[Le]},$$scope:{ctx:n}}}),{c(){P(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,l){x(e,t,l),r=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function ze(n,e,r){let{profile:t}=e,{profileHandler:l}=e;const o=()=>{l.deleteProfile()};return n.$$set=a=>{"profile"in a&&r(0,t=a.profile),"profileHandler"in a&&r(1,l=a.profileHandler)},[t,l,o]}class We extends F{constructor(e){super();L(this,e,ze,Re,q,{profile:0,profileHandler:1})}}function je(n){let e,r;return e=new _e({props:{slot:"topbar"}}),{c(){P(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,l){x(e,t,l),r=!0},p:G,i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function Me(n){let e,r,t,l;return{c(){e=v("div"),r=v("div"),t=v("div"),l=C("An error happened while fetching profile."),this.h()},l(o){e=b(o,"DIV",{class:!0,slot:!0});var a=$(e);r=b(a,"DIV",{class:!0});var s=$(r);t=b(s,"DIV",{class:!0});var i=$(t);l=I(i,"An error happened while fetching profile."),i.forEach(g),s.forEach(g),a.forEach(g),this.h()},h(){p(t,"class","text-3xl md:text-5xl text-bluestrong text-center"),p(r,"class","flex flex-col flex-grow w-full h-full items-center place-content-center space-y-6"),p(e,"class","flex flex-col mx-auto max-w-screen-md w-full px-3"),p(e,"slot","main")},m(o,a){O(o,e,a),u(e,r),u(r,t),u(t,l)},p:G,d(o){o&&g(e)}}}function Qe(n){let e,r;return e=new he({props:{$$slots:{main:[Me],topbar:[je]},$$scope:{ctx:n}}}),{c(){P(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,l){x(e,t,l),r=!0},p(t,[l]){const o={};l&2&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function Je(n,e,r){let{err:t=null}=e;return n.$$set=l=>{"err"in l&&r(0,t=l.err)},n.$$.update=()=>{n.$$.dirty&1&&console.log(t)},[t]}class ve extends F{constructor(e){super();L(this,e,Je,Qe,q,{err:0})}}function Ke(n){let e,r;return e=new ve({props:{err:n[5]}}),{c(){P(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,l){x(e,t,l),r=!0},p(t,l){const o={};l&2&&(o.err=t[5]),e.$set(o)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function Xe(n){let e,r,t,l;const o=[Ze,Ye],a=[];function s(i,m){return i[4].body?0:1}return e=s(n),r=a[e]=o[e](n),{c(){r.c(),t=j()},l(i){r.l(i),t=j()},m(i,m){a[e].m(i,m),O(i,t,m),l=!0},p(i,m){let c=e;e=s(i),e===c?a[e].p(i,m):($e(),k(a[c],1,1,()=>{a[c]=null}),ye(),r=a[e],r?r.p(i,m):(r=a[e]=o[e](i),r.c()),y(r,1),r.m(t.parentNode,t))},i(i){l||(y(r),l=!0)},o(i){k(r),l=!1},d(i){a[e].d(i),i&&g(t)}}}function Ye(n){let e,r;return e=new ve({}),{c(){P(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,l){x(e,t,l),r=!0},p:G,i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function Ze(n){let e,r;return e=new We({props:{profile:n[4].body.profile,profileHandler:n[0]}}),{c(){P(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,l){x(e,t,l),r=!0},p(t,l){const o={};l&2&&(o.profile=t[4].body.profile),l&1&&(o.profileHandler=t[0]),e.$set(o)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function et(n){let e,r;return e=new ke({}),{c(){P(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,l){x(e,t,l),r=!0},p:G,i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function tt(n){let e,r,t,l={ctx:n,current:null,token:null,hasCatch:!0,pending:et,then:Xe,catch:Ke,value:4,error:5,blocks:[,,,]};return ue(r=n[1],l),{c(){e=j(),l.block.c()},l(o){e=j(),l.block.l(o)},m(o,a){O(o,e,a),l.block.m(o,l.anchor=a),l.mount=()=>e.parentNode,l.anchor=e,t=!0},p(o,[a]){n=o,l.ctx=n,a&2&&r!==(r=n[1])&&ue(r,l)||be(l,n,a)},i(o){t||(y(l.block),t=!0)},o(o){for(let a=0;a<3;a+=1){const s=l.blocks[a];k(s)}t=!1},d(o){o&&g(e),l.block.d(o),l.token=null,l=null}}}function rt(n,e,r){let t,l;const o=de.firebaseStore,a=de.auth.currentUser;return n.$$.update=()=>{n.$$.dirty&1&&r(1,l=t.getProfile())},r(0,t=new Ve(a,o)),[t,l]}class lt extends F{constructor(e){super();L(this,e,rt,tt,q,{})}}function nt(n){let e,r;return e=new lt({}),{c(){P(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,l){x(e,t,l),r=!0},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function at(n){let e,r;return e=new Ee({props:{denyIfNotAuthenticated:!0,$$slots:{default:[nt]},$$scope:{ctx:n}}}),{c(){P(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,l){x(e,t,l),r=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}class mt extends F{constructor(e){super();L(this,e,null,at,q,{})}}export{mt as default};
