import{T as $e,ac as ye,ad as ke,ae as Q,af as ie,ag as fe,S as L,i as O,s as q,e as v,t as I,c as b,a as $,h as V,d as g,b as p,g as F,H as u,j as he,k as T,m as A,_ as ee,I as G,C as ce,P as ue,w as x,x as E,y as N,q as y,o as k,B as w,ah as X,Y as de,l as j,Z as Pe,n as xe,p as Ee}from"../../chunks/vendor-0f82600e.js";import{L as Ne,S as we}from"../../chunks/SecurityCheckPage-6f6f56b9.js";import{b as De,P as _e,S as ve,c as me}from"../../chunks/StandardTopBar-e6d1c75c.js";/* empty css                       */import"../../chunks/singletons-d1fb5791.js";const Ie=new $e;class Ve{constructor(e,r){this.user=e,this.store=r}async deleteProfile(){const e=this.user.uid;return console.log("Delete profile",e),ye(this.user,Ie).then(r=>{r.user.delete()}).then(()=>ke(Q(this.store,"users",e))).then(()=>(De(),{body:{}})).catch(r=>(console.log(r),{error:{}}))}async updateProfile(e){const r=this.user.uid;console.log("Update profile",r);const t=Q(this.store,"users",r);return ie(t,{displayName:e.displayName},{merge:!0}).then(()=>({body:{}})).catch(l=>(console.log(l),{error:{}}))}async getProfile(){const e=this.user.uid;console.log("Get profile",e);const r=Q(this.store,"users",e);return fe(r).then(t=>t.exists()?t:ie(r,{uid:e,displayName:this.user.displayName,email:this.user.email}).then(l=>fe(r))).then(t=>{const l=t.data();return{body:{profile:{displayName:l.displayName,email:l.email}}}}).catch(t=>(console.log(t),{error:{}}))}}function pe(a){let e,r,t=a[4].reason+"",l;return{c(){e=v("span"),r=I("* "),l=I(t),this.h()},l(o){e=b(o,"SPAN",{class:!0});var n=$(e);r=V(n,"* "),l=V(n,t),n.forEach(g),this.h()},h(){p(e,"class","ml-1 text-xs font-light italic text-red")},m(o,n){F(o,e,n),u(e,r),u(e,l)},p(o,n){n&16&&t!==(t=o[4].reason+"")&&he(l,t)},d(o){o&&g(e)}}}function Ce(a){let e,r,t,l,o,n,s,i,m,c,h=a[4].type=="not_valid"&&pe(a);return{c(){e=v("div"),r=v("label"),t=I(a[0]),l=T(),h&&h.c(),o=T(),n=v("input"),this.h()},l(d){e=b(d,"DIV",{class:!0});var f=$(e);r=b(f,"LABEL",{class:!0,for:!0});var _=$(r);t=V(_,a[0]),l=A(_),h&&h.l(_),_.forEach(g),o=A(f),n=b(f,"INPUT",{class:!0,type:!0}),f.forEach(g),this.h()},h(){p(r,"class","block text-gray text-sm mb-2"),p(r,"for","firstname"),p(n,"class",s=`appearance-none border rounded-lg w-full py-2 px-3 leading-tight outline-none read-only:bg-medium-gray read-only:text-gray ${a[4].type=="valid"?"border-lightGray":"border-red"}`),p(n,"type","text"),n.value=a[1],n.readOnly=a[2],p(e,"class",i=a[5].class)},m(d,f){F(d,e,f),u(e,r),u(r,t),u(r,l),h&&h.m(r,null),u(e,o),u(e,n),m||(c=ee(n,"input",a[7]),m=!0)},p(d,[f]){f&1&&he(t,d[0]),d[4].type=="not_valid"?h?h.p(d,f):(h=pe(d),h.c(),h.m(r,null)):h&&(h.d(1),h=null),f&16&&s!==(s=`appearance-none border rounded-lg w-full py-2 px-3 leading-tight outline-none read-only:bg-medium-gray read-only:text-gray ${d[4].type=="valid"?"border-lightGray":"border-red"}`)&&p(n,"class",s),f&2&&n.value!==d[1]&&(n.value=d[1]),f&4&&(n.readOnly=d[2]),f&32&&i!==(i=d[5].class)&&p(e,"class",i)},i:G,o:G,d(d){d&&g(e),h&&h.d(),m=!1,c()}}}function He(a,e,r){let t,{fieldName:l}=e,{value:o}=e,{readonly:n=!1}=e,{onChange:s}=e,{validator:i}=e;const m=c=>{s(c.currentTarget.value)};return a.$$set=c=>{r(5,e=ce(ce({},e),ue(c))),"fieldName"in c&&r(0,l=c.fieldName),"value"in c&&r(1,o=c.value),"readonly"in c&&r(2,n=c.readonly),"onChange"in c&&r(3,s=c.onChange),"validator"in c&&r(6,i=c.validator)},a.$$.update=()=>{a.$$.dirty&66&&r(4,t=i(o))},e=ue(e),[l,o,n,s,t,e,i,m]}class ge extends L{constructor(e){super();O(this,e,He,Ce,q,{fieldName:0,value:1,readonly:2,onChange:3,validator:6})}}function Se(a,e,r){return t=>!t||t.length<e?{type:"not_valid",reason:`field "${a}: should be longer than ${e} character`}:t&&t.length>r?{type:"not_valid",reason:`field "${a}" should be shorter than ${r} character`}:{type:"valid"}}function Te(a){let e,r,t,l,o,n,s,i,m,c,h,d;return r=new ge({props:{fieldName:"Full Name",value:a[0].displayName,onChange:a[7],validator:Se("Display Name",1,32)}}),l=new ge({props:{fieldName:"E-mail",value:a[0].email,onChange:Ue,validator:Be,readonly:!0}}),{c(){e=v("div"),x(r.$$.fragment),t=T(),x(l.$$.fragment),o=T(),n=v("div"),s=v("button"),i=I("Save"),this.h()},l(f){e=b(f,"DIV",{class:!0});var _=$(e);E(r.$$.fragment,_),t=A(_),E(l.$$.fragment,_),o=A(_),n=b(_,"DIV",{class:!0});var P=$(n);s=b(P,"BUTTON",{class:!0});var C=$(s);i=V(C,"Save"),C.forEach(g),P.forEach(g),_.forEach(g),this.h()},h(){s.disabled=a[1],p(s,"class",m=`px-5 py-2 rounded-lg cursor-pointer mr-1 ${a[1]?"bg-medium-gray":"bg-bluelight hover:bg-bluemiddle"}`),p(n,"class","flex flex-row place-content-end"),p(e,"class","flex flex-col space-y-2")},m(f,_){F(f,e,_),N(r,e,null),u(e,t),N(l,e,null),u(e,o),u(e,n),u(n,s),u(s,i),c=!0,h||(d=ee(s,"click",a[2]),h=!0)},p(f,[_]){const P={};_&1&&(P.value=f[0].displayName),_&1&&(P.onChange=f[7]),r.$set(P);const C={};_&1&&(C.value=f[0].email),l.$set(C),(!c||_&2)&&(s.disabled=f[1]),(!c||_&2&&m!==(m=`px-5 py-2 rounded-lg cursor-pointer mr-1 ${f[1]?"bg-medium-gray":"bg-bluelight hover:bg-bluemiddle"}`))&&p(s,"class",m)},i(f){c||(y(r.$$.fragment,f),y(l.$$.fragment,f),c=!0)},o(f){k(r.$$.fragment,f),k(l.$$.fragment,f),c=!1},d(f){f&&g(e),w(r),w(l),h=!1,d()}}}function Ae(a){return a.displayName&&a.email&&a.displayName.length>=1&&a.displayName.length<=32}const Ue=a=>{},Be=a=>({type:"valid"});function Fe(a,e,r){let t,l,o,{profile:n}=e,{profileHandler:s}=e,i=X.clone(n),m=!1;async function c(){try{m=!0;const d=await s.updateProfile(n);r(4,i=X.clone(n))}finally{m=!1}}const h=d=>r(0,n.displayName=d,n);return a.$$set=d=>{"profile"in d&&r(0,n=d.profile),"profileHandler"in d&&r(3,s=d.profileHandler)},a.$$.update=()=>{a.$$.dirty&17&&r(6,t=X.isEqual(i,n)),a.$$.dirty&1&&r(5,l=Ae(n)),a.$$.dirty&96&&r(1,o=t||!l)},[n,o,c,s,i,l,t,h]}class Ge extends L{constructor(e){super();O(this,e,Fe,Te,q,{profile:0,profileHandler:3})}}function Le(a){let e,r;return e=new ve({props:{slot:"topbar"}}),{c(){x(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,l){N(e,t,l),r=!0},p:G,i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function Oe(a){let e,r,t,l,o,n,s,i,m,c,h,d,f,_,P,C,M,U,Y,B,Z,z,J,te;return s=new Ge({props:{profile:a[0],profileHandler:a[1]}}),{c(){e=v("div"),r=v("div"),t=v("div"),l=I("Personal info"),o=T(),n=v("div"),x(s.$$.fragment),i=T(),m=v("div"),c=v("div"),h=I("Danger zone"),d=T(),f=v("div"),_=v("div"),P=v("button"),C=I("Delete profile"),M=T(),U=v("div"),Y=I("* The website is in beta stage, in case of any issue feel free to contact "),B=v("a"),Z=I("info@targist.com"),this.h()},l(D){e=b(D,"DIV",{class:!0,slot:!0});var H=$(e);r=b(H,"DIV",{class:!0});var S=$(r);t=b(S,"DIV",{class:!0});var re=$(t);l=V(re,"Personal info"),re.forEach(g),o=A(S),n=b(S,"DIV",{class:!0});var R=$(n);E(s.$$.fragment,R),i=A(R),m=b(R,"DIV",{});var W=$(m);c=b(W,"DIV",{class:!0});var le=$(c);h=V(le,"Danger zone"),le.forEach(g),d=A(W),f=b(W,"DIV",{class:!0});var ae=$(f);_=b(ae,"DIV",{class:!0});var ne=$(_);P=b(ne,"BUTTON",{class:!0});var oe=$(P);C=V(oe,"Delete profile"),oe.forEach(g),ne.forEach(g),ae.forEach(g),W.forEach(g),R.forEach(g),S.forEach(g),M=A(H),U=b(H,"DIV",{class:!0});var K=$(U);Y=V(K,"* The website is in beta stage, in case of any issue feel free to contact "),B=b(K,"A",{class:!0,href:!0});var se=$(B);Z=V(se,"info@targist.com"),se.forEach(g),K.forEach(g),H.forEach(g),this.h()},h(){p(t,"class","hero-title"),p(c,"class","text-red"),p(P,"class","px-4 py-2 flex bg-red rounded-md text-light "),p(_,"class",""),p(f,"class","flex flex-col space-y-4 border-2 border-red rounded-lg w-full p-1"),p(n,"class","flex flex-col space-y-4 mt-28"),p(r,"class","flex flex-col my-8"),p(B,"class","text-bluestrong underline"),p(B,"href","mailto:info@targist.com"),p(U,"class","italic text-gray text-sm mt-14"),p(e,"class","flex flex-col mx-auto max-w-screen-md w-full px-3"),p(e,"slot","main")},m(D,H){F(D,e,H),u(e,r),u(r,t),u(t,l),u(r,o),u(r,n),N(s,n,null),u(n,i),u(n,m),u(m,c),u(c,h),u(m,d),u(m,f),u(f,_),u(_,P),u(P,C),u(e,M),u(e,U),u(U,Y),u(U,B),u(B,Z),z=!0,J||(te=ee(P,"click",a[2]),J=!0)},p(D,H){const S={};H&1&&(S.profile=D[0]),H&2&&(S.profileHandler=D[1]),s.$set(S)},i(D){z||(y(s.$$.fragment,D),z=!0)},o(D){k(s.$$.fragment,D),z=!1},d(D){D&&g(e),w(s),J=!1,te()}}}function qe(a){let e,r;return e=new _e({props:{$$slots:{main:[Oe],topbar:[Le]},$$scope:{ctx:a}}}),{c(){x(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,l){N(e,t,l),r=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function ze(a,e,r){let{profile:t}=e,{profileHandler:l}=e;const o=()=>{l.deleteProfile()};return a.$$set=n=>{"profile"in n&&r(0,t=n.profile),"profileHandler"in n&&r(1,l=n.profileHandler)},[t,l,o]}class Re extends L{constructor(e){super();O(this,e,ze,qe,q,{profile:0,profileHandler:1})}}function We(a){let e,r;return e=new ve({props:{slot:"topbar"}}),{c(){x(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,l){N(e,t,l),r=!0},p:G,i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function je(a){let e,r,t,l;return{c(){e=v("div"),r=v("div"),t=v("div"),l=I("An error happened while fetching profile."),this.h()},l(o){e=b(o,"DIV",{class:!0,slot:!0});var n=$(e);r=b(n,"DIV",{class:!0});var s=$(r);t=b(s,"DIV",{class:!0});var i=$(t);l=V(i,"An error happened while fetching profile."),i.forEach(g),s.forEach(g),n.forEach(g),this.h()},h(){p(t,"class","text-3xl md:text-5xl text-bluestrong text-center"),p(r,"class","flex flex-col flex-grow w-full h-full items-center place-content-center space-y-6"),p(e,"class","flex flex-col mx-auto max-w-screen-md w-full px-3"),p(e,"slot","main")},m(o,n){F(o,e,n),u(e,r),u(r,t),u(t,l)},d(o){o&&g(e)}}}function Me(a){let e,r;return e=new _e({props:{$$slots:{main:[je],topbar:[We]},$$scope:{ctx:a}}}),{c(){x(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,l){N(e,t,l),r=!0},p(t,[l]){const o={};l&2&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function Ye(a,e,r){let{err:t=null}=e;return a.$$set=l=>{"err"in l&&r(0,t=l.err)},a.$$.update=()=>{a.$$.dirty&1&&console.log(t)},[t]}class be extends L{constructor(e){super();O(this,e,Ye,Me,q,{err:0})}}function Ze(a){let e,r;return e=new be({props:{err:a[5]}}),{c(){x(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,l){N(e,t,l),r=!0},p(t,l){const o={};l&2&&(o.err=t[5]),e.$set(o)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function Je(a){let e,r,t,l;const o=[Qe,Ke],n=[];function s(i,m){return i[4].body?0:1}return e=s(a),r=n[e]=o[e](a),{c(){r.c(),t=j()},l(i){r.l(i),t=j()},m(i,m){n[e].m(i,m),F(i,t,m),l=!0},p(i,m){let c=e;e=s(i),e===c?n[e].p(i,m):(xe(),k(n[c],1,1,()=>{n[c]=null}),Ee(),r=n[e],r?r.p(i,m):(r=n[e]=o[e](i),r.c()),y(r,1),r.m(t.parentNode,t))},i(i){l||(y(r),l=!0)},o(i){k(r),l=!1},d(i){n[e].d(i),i&&g(t)}}}function Ke(a){let e,r;return e=new be({}),{c(){x(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,l){N(e,t,l),r=!0},p:G,i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function Qe(a){let e,r;return e=new Re({props:{profile:a[4].body.profile,profileHandler:a[0]}}),{c(){x(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,l){N(e,t,l),r=!0},p(t,l){const o={};l&2&&(o.profile=t[4].body.profile),l&1&&(o.profileHandler=t[0]),e.$set(o)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function Xe(a){let e,r;return e=new Ne({}),{c(){x(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,l){N(e,t,l),r=!0},p:G,i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function et(a){let e,r,t,l={ctx:a,current:null,token:null,hasCatch:!0,pending:Xe,then:Je,catch:Ze,value:4,error:5,blocks:[,,,]};return de(r=a[1],l),{c(){e=j(),l.block.c()},l(o){e=j(),l.block.l(o)},m(o,n){F(o,e,n),l.block.m(o,l.anchor=n),l.mount=()=>e.parentNode,l.anchor=e,t=!0},p(o,[n]){a=o,l.ctx=a,n&2&&r!==(r=a[1])&&de(r,l)||Pe(l,a,n)},i(o){t||(y(l.block),t=!0)},o(o){for(let n=0;n<3;n+=1){const s=l.blocks[n];k(s)}t=!1},d(o){o&&g(e),l.block.d(o),l.token=null,l=null}}}function tt(a,e,r){let t,l;const o=me.firebaseStore,n=me.auth.currentUser;return a.$$.update=()=>{a.$$.dirty&1&&r(1,l=t.getProfile())},r(0,t=new Ve(n,o)),[t,l]}class rt extends L{constructor(e){super();O(this,e,tt,et,q,{})}}function lt(a){let e,r;return e=new rt({}),{c(){x(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,l){N(e,t,l),r=!0},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function at(a){let e,r;return e=new we({props:{denyIfNotAuthenticated:!0,$$slots:{default:[lt]},$$scope:{ctx:a}}}),{c(){x(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,l){N(e,t,l),r=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}class ct extends L{constructor(e){super();O(this,e,null,at,q,{})}}export{ct as default};
