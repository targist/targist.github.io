import{_ as me}from"../../chunks/preload-helper-ec9aa979.js";import{S as Z,i as J,s as K,e as v,t as P,c as b,a as y,h as D,d as h,b as _,g as x,H as m,j as ce,k as S,m as T,$ as Q,I as L,C as ae,Z as ne,w as B,x as A,y as U,q as I,o as V,B as j,a1 as M,l as se,p as ue,v as pe,n as de}from"../../chunks/vendor-358bf6f1.js";import{P as he,L as _e,S as ge}from"../../chunks/StandardTopBar-5a5b0a89.js";import{c as ve,a as be}from"../../chunks/AuthService-a8eb2141.js";import"../../chunks/singletons-a6a7384f.js";function ie(a){let e,t,l=a[3].reason+"",s;return{c(){e=v("span"),t=P("* "),s=P(l),this.h()},l(f){e=b(f,"SPAN",{class:!0});var r=y(e);t=D(r,"* "),s=D(r,l),r.forEach(h),this.h()},h(){_(e,"class","ml-1 text-xs font-light italic text-red")},m(f,r){x(f,e,r),m(e,t),m(e,s)},p(f,r){r&8&&l!==(l=f[3].reason+"")&&ce(s,l)},d(f){f&&h(e)}}}function ye(a){let e,t,l,s,f,r,c,n,i,g,p=a[3].type=="not_valid"&&ie(a);return{c(){e=v("div"),t=v("label"),l=P(a[0]),s=S(),p&&p.c(),f=S(),r=v("input"),this.h()},l(d){e=b(d,"DIV",{class:!0});var o=y(e);t=b(o,"LABEL",{class:!0,for:!0});var u=y(t);l=D(u,a[0]),s=T(u),p&&p.l(u),u.forEach(h),f=T(o),r=b(o,"INPUT",{class:!0,type:!0}),o.forEach(h),this.h()},h(){_(t,"class","block text-black text-sm mb-2"),_(t,"for","firstname"),_(r,"class",c=`shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none ${a[3].type=="valid"?"border-gray":"border-red"}`),_(r,"type","text"),r.value=a[1],_(e,"class",n=a[4].class)},m(d,o){x(d,e,o),m(e,t),m(t,l),m(t,s),p&&p.m(t,null),m(e,f),m(e,r),i||(g=Q(r,"input",a[6]),i=!0)},p(d,[o]){o&1&&ce(l,d[0]),d[3].type=="not_valid"?p?p.p(d,o):(p=ie(d),p.c(),p.m(t,null)):p&&(p.d(1),p=null),o&8&&c!==(c=`shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none ${d[3].type=="valid"?"border-gray":"border-red"}`)&&_(r,"class",c),o&2&&r.value!==d[1]&&(r.value=d[1]),o&16&&n!==(n=d[4].class)&&_(e,"class",n)},i:L,o:L,d(d){d&&h(e),p&&p.d(),i=!1,g()}}}function ke(a,e,t){let l,{fieldName:s}=e,{value:f}=e,{onChange:r}=e,{validator:c}=e;const n=i=>{r(i.currentTarget.value)};return a.$$set=i=>{t(4,e=ae(ae({},e),ne(i))),"fieldName"in i&&t(0,s=i.fieldName),"value"in i&&t(1,f=i.value),"onChange"in i&&t(2,r=i.onChange),"validator"in i&&t(5,c=i.validator)},a.$$.update=()=>{a.$$.dirty&34&&t(3,l=c(f))},e=ne(e),[s,f,r,l,e,c,n]}class oe extends Z{constructor(e){super();J(this,e,ke,ye,K,{fieldName:0,value:1,onChange:2,validator:5})}}function fe(a,e,t){return l=>!l||l.length<e?{type:"not_valid",reason:`field "${a}: should be longer than ${e} character`}:l&&l.length>t?{type:"not_valid",reason:`field "${a}" should be shorter than ${t} character`}:{type:"valid"}}function Ee(a){let e,t,l,s,f,r,c,n,i,g,p,d;return t=new oe({props:{fieldName:"First Name",value:a[0].firstName,onChange:a[8],validator:fe("First Name",1,15)}}),s=new oe({props:{fieldName:"Family Name",value:a[0].familyName,onChange:a[9],validator:fe("Family name",1,15)}}),{c(){e=v("div"),B(t.$$.fragment),l=S(),B(s.$$.fragment),f=S(),r=v("div"),c=v("button"),n=P("Save"),this.h()},l(o){e=b(o,"DIV",{class:!0});var u=y(e);A(t.$$.fragment,u),l=T(u),A(s.$$.fragment,u),f=T(u),r=b(u,"DIV",{class:!0});var E=y(r);c=b(E,"BUTTON",{class:!0});var N=y(c);n=D(N,"Save"),N.forEach(h),E.forEach(h),u.forEach(h),this.h()},h(){c.disabled=a[1],_(c,"class",i=`px-5 py-2 rounded-lg cursor-pointer mr-1 ${a[1]?"bg-lightGray":"bg-bluelight hover:bg-bluemiddle"}`),_(r,"class","flex flex-row place-content-end"),_(e,"class","flex flex-col space-y-2")},m(o,u){x(o,e,u),U(t,e,null),m(e,l),U(s,e,null),m(e,f),m(e,r),m(r,c),m(c,n),g=!0,p||(d=Q(c,"click",a[2]),p=!0)},p(o,[u]){const E={};u&1&&(E.value=o[0].firstName),u&1&&(E.onChange=o[8]),t.$set(E);const N={};u&1&&(N.value=o[0].familyName),u&1&&(N.onChange=o[9]),s.$set(N),(!g||u&2)&&(c.disabled=o[1]),(!g||u&2&&i!==(i=`px-5 py-2 rounded-lg cursor-pointer mr-1 ${o[1]?"bg-lightGray":"bg-bluelight hover:bg-bluemiddle"}`))&&_(c,"class",i)},i(o){g||(I(t.$$.fragment,o),I(s.$$.fragment,o),g=!0)},o(o){V(t.$$.fragment,o),V(s.$$.fragment,o),g=!1},d(o){o&&h(e),j(t),j(s),p=!1,d()}}}function Ne(a){return a.firstName&&a.familyName&&a.familyName.length>=1&&a.firstName.length>=1&&a.familyName.length<=15&&a.firstName.length<=15}function we(a,e,t){let l,s,f,{profile:r}=e,{profileHandler:c}=e,n=M.clone(r),i=!1;async function g(){try{t(5,i=!0);const o=await(c==null?void 0:c.updateProfile(r));t(4,n=M.clone(r))}finally{t(5,i=!1)}}const p=o=>t(0,r.firstName=o,r),d=o=>t(0,r.familyName=o,r);return a.$$set=o=>{"profile"in o&&t(0,r=o.profile),"profileHandler"in o&&t(3,c=o.profileHandler)},a.$$.update=()=>{a.$$.dirty&17&&t(7,l=M.isEqual(n,r)),a.$$.dirty&1&&t(6,s=Ne(r)),a.$$.dirty&224&&t(1,f=l||i||!s)},[r,f,g,c,n,i,s,l,p,d]}class Pe extends Z{constructor(e){super();J(this,e,we,Ee,K,{profile:0,profileHandler:3})}}function De(a){let e,t;return e=new he({props:{deny_if_not_auth:!0,$$slots:{main:[Se],topbar:[Ve]},$$scope:{ctx:a}}}),{c(){B(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,s){U(e,l,s),t=!0},p(l,s){const f={};s&39&&(f.$$scope={dirty:s,ctx:l}),e.$set(f)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Ie(a){let e,t;return e=new _e({props:{class:"flex flex-grow items-center place-content-center w-full h-screen animate-spin"}}),{c(){B(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,s){U(e,l,s),t=!0},p:L,i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Ve(a){let e,t;return e=new ge({props:{slot:"topbar"}}),{c(){B(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,s){U(e,l,s),t=!0},p:L,i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function xe(a){let e,t,l;return{c(){e=v("div"),t=v("div"),l=P("There seems to be some error"),this.h()},l(s){e=b(s,"DIV",{class:!0});var f=y(e);t=b(f,"DIV",{class:!0});var r=y(t);l=D(r,"There seems to be some error"),r.forEach(h),f.forEach(h),this.h()},h(){_(t,"class","text-3xl md:text-5xl text-bluestrong text-center"),_(e,"class","flex flex-col flex-grow w-full h-full items-center place-content-center space-y-6")},m(s,f){x(s,e,f),m(e,t),m(t,l)},p:L,i:L,o:L,d(s){s&&h(e)}}}function Ce(a){let e,t,l,s,f,r,c,n,i,g,p,d,o,u,E,N,C,G,H,R,q,W,X;return r=new Pe({props:{profile:a[2],profileHandler:a[1]}}),{c(){e=v("div"),t=v("div"),l=P("Personal info"),s=S(),f=v("div"),B(r.$$.fragment),c=S(),n=v("div"),i=v("div"),g=P("Danger zone"),p=S(),d=v("div"),o=v("div"),u=v("button"),E=P("Delete profile"),N=S(),C=v("div"),G=P("* The website is in beta stage, in case of any issue feel free to contact "),H=v("a"),R=P("info@targist.com"),this.h()},l(k){e=b(k,"DIV",{class:!0});var w=y(e);t=b(w,"DIV",{class:!0});var F=y(t);l=D(F,"Personal info"),F.forEach(h),s=T(w),f=b(w,"DIV",{class:!0});var O=y(f);A(r.$$.fragment,O),c=T(O),n=b(O,"DIV",{});var z=y(n);i=b(z,"DIV",{class:!0});var Y=y(i);g=D(Y,"Danger zone"),Y.forEach(h),p=T(z),d=b(z,"DIV",{class:!0});var ee=y(d);o=b(ee,"DIV",{class:!0});var te=y(o);u=b(te,"BUTTON",{class:!0});var le=y(u);E=D(le,"Delete profile"),le.forEach(h),te.forEach(h),ee.forEach(h),z.forEach(h),O.forEach(h),w.forEach(h),N=T(k),C=b(k,"DIV",{class:!0});var $=y(C);G=D($,"* The website is in beta stage, in case of any issue feel free to contact "),H=b($,"A",{class:!0,href:!0});var re=y(H);R=D(re,"info@targist.com"),re.forEach(h),$.forEach(h),this.h()},h(){_(t,"class","hero-title"),_(i,"class","text-red"),_(u,"class","px-4 py-2 flex bg-red rounded-md text-light "),_(o,"class",""),_(d,"class","flex flex-col space-y-4 border-2 border-red rounded-lg w-full p-1"),_(f,"class","flex flex-col space-y-4 mt-28"),_(e,"class","flex flex-col my-8"),_(H,"class","text-bluestrong underline"),_(H,"href","mailto:info@targist.com"),_(C,"class","italic text-gray text-sm mt-14")},m(k,w){x(k,e,w),m(e,t),m(t,l),m(e,s),m(e,f),U(r,f,null),m(f,c),m(f,n),m(n,i),m(i,g),m(n,p),m(n,d),m(d,o),m(o,u),m(u,E),x(k,N,w),x(k,C,w),m(C,G),m(C,H),m(H,R),q=!0,W||(X=Q(u,"click",a[4]),W=!0)},p(k,w){const F={};w&4&&(F.profile=k[2]),w&2&&(F.profileHandler=k[1]),r.$set(F)},i(k){q||(I(r.$$.fragment,k),q=!0)},o(k){V(r.$$.fragment,k),q=!1},d(k){k&&h(e),j(r),k&&h(N),k&&h(C),W=!1,X()}}}function Se(a){let e,t,l,s;const f=[Ce,xe],r=[];function c(n,i){return n[0]=="Success"?0:n[0]=="Error"?1:-1}return~(t=c(a))&&(l=r[t]=f[t](a)),{c(){e=v("div"),l&&l.c(),this.h()},l(n){e=b(n,"DIV",{class:!0,slot:!0});var i=y(e);l&&l.l(i),i.forEach(h),this.h()},h(){_(e,"class","flex flex-col mx-auto max-w-screen-md w-full px-3"),_(e,"slot","main")},m(n,i){x(n,e,i),~t&&r[t].m(e,null),s=!0},p(n,i){let g=t;t=c(n),t===g?~t&&r[t].p(n,i):(l&&(de(),V(r[g],1,1,()=>{r[g]=null}),ue()),~t?(l=r[t],l?l.p(n,i):(l=r[t]=f[t](n),l.c()),I(l,1),l.m(e,null)):l=null)},i(n){s||(I(l),s=!0)},o(n){V(l),s=!1},d(n){n&&h(e),~t&&r[t].d()}}}function Te(a){let e,t,l,s;const f=[Ie,De],r=[];function c(n,i){return n[3]?1:0}return e=c(a),t=r[e]=f[e](a),{c(){t.c(),l=se()},l(n){t.l(n),l=se()},m(n,i){r[e].m(n,i),x(n,l,i),s=!0},p(n,[i]){let g=e;e=c(n),e===g?r[e].p(n,i):(de(),V(r[g],1,1,()=>{r[g]=null}),ue(),t=r[e],t?t.p(n,i):(t=r[e]=f[e](n),t.c()),I(t,1),t.m(l.parentNode,l))},i(n){s||(I(t),s=!0)},o(n){V(t),s=!1},d(n){r[e].d(n),n&&h(l)}}}function He(a,e,t){let l,s,f,r="Loading";pe(async()=>{try{const n=await new Promise((d,o)=>{const u=ve.subscribe(E=>{E.auth0Client!=null&&(d(E.auth0Client),u())})});await new Promise((d,o)=>{const u=be.subscribe(E=>{E.authState.type=="LoggedIn"&&(d(E.authState),u())})});const i=(await me(()=>import("../../chunks/profile-utils-9142b412.js"),["chunks/profile-utils-9142b412.js","chunks/AuthService-a8eb2141.js","assets/AuthService-89db24a5.css","chunks/vendor-358bf6f1.js"])).ProfileHandler,g=await n.getTokenSilently();t(1,s=new i(g));const p=await s.getProfile();p.failed?t(0,r="Error"):(t(2,f=p.succeeded.profile),t(0,r="Success"))}catch(n){t(0,r="Error"),console.log(n)}});const c=()=>{s.deleteProfile()};return a.$$.update=()=>{a.$$.dirty&1&&t(3,l=r!="Loading")},[r,s,f,l,c]}class je extends Z{constructor(e){super();J(this,e,He,Te,K,{})}}export{je as default};
