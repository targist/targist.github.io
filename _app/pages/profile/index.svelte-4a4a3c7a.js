import{T as be,am as $e,an as ye,X as K,Z as ke,Y as Pe,S as L,i as O,s as q,e as v,t as I,c as b,a as $,h as C,d as g,b as p,g as F,H as u,j as ge,k as T,m as A,a1 as te,I as G,C as ce,P as fe,w as E,x,y as w,q as y,o as k,B as N,ao as Q,$ as ue,l as j,a0 as Ee,n as xe,p as we}from"../../chunks/vendor-0fbb5e6e.js";import{L as Ne,S as De}from"../../chunks/SecurityCheckPage-eb550b5e.js";import{b as Ie,e as ee,P as he,S as _e,c as de}from"../../chunks/StandardTopBar-5a9c5ef2.js";/* empty css                       */import"../../chunks/singletons-d1fb5791.js";const Ce=new be;class Ve{constructor(e,r){this.user=e,this.store=r}async deleteProfile(){const e=this.user.uid;return console.log("Delete profile",e),$e(this.user,Ce).then(r=>{r.user.delete()}).then(()=>ye(K(this.store,ee.usersCollection,e))).then(()=>(Ie(),{body:{}})).catch(r=>(console.log(r),{error:{}}))}async updateProfile(e){const r=this.user.uid;console.log("Update profile",r);const t=K(this.store,ee.usersCollection,r);return ke(t,{displayName:e.displayName},{merge:!0}).then(()=>({body:{}})).catch(l=>(console.log(l),{error:{}}))}async getProfile(){const e=this.user.uid;console.log("Get profile",e);const r=K(this.store,ee.usersCollection,e);return Pe(r).then(t=>{const l=t.data();return{body:{profile:{displayName:l.displayName,email:l.email}}}}).catch(t=>(console.log(t),{error:{}}))}}function me(a){let e,r,t=a[4].reason+"",l;return{c(){e=v("span"),r=I("* "),l=I(t),this.h()},l(o){e=b(o,"SPAN",{class:!0});var n=$(e);r=C(n,"* "),l=C(n,t),n.forEach(g),this.h()},h(){p(e,"class","ml-1 text-xs font-light italic text-red")},m(o,n){F(o,e,n),u(e,r),u(e,l)},p(o,n){n&16&&t!==(t=o[4].reason+"")&&ge(l,t)},d(o){o&&g(e)}}}function He(a){let e,r,t,l,o,n,s,i,m,f,h=a[4].type=="not_valid"&&me(a);return{c(){e=v("div"),r=v("label"),t=I(a[0]),l=T(),h&&h.c(),o=T(),n=v("input"),this.h()},l(d){e=b(d,"DIV",{class:!0});var c=$(e);r=b(c,"LABEL",{class:!0,for:!0});var _=$(r);t=C(_,a[0]),l=A(_),h&&h.l(_),_.forEach(g),o=A(c),n=b(c,"INPUT",{class:!0,type:!0}),c.forEach(g),this.h()},h(){p(r,"class","block text-gray text-sm mb-2"),p(r,"for","firstname"),p(n,"class",s=`appearance-none border rounded-lg w-full py-2 px-3 leading-tight outline-none read-only:bg-medium-gray read-only:text-gray ${a[4].type=="valid"?"border-lightGray":"border-red"}`),p(n,"type","text"),n.value=a[1],n.readOnly=a[2],p(e,"class",i=a[5].class)},m(d,c){F(d,e,c),u(e,r),u(r,t),u(r,l),h&&h.m(r,null),u(e,o),u(e,n),m||(f=te(n,"input",a[7]),m=!0)},p(d,[c]){c&1&&ge(t,d[0]),d[4].type=="not_valid"?h?h.p(d,c):(h=me(d),h.c(),h.m(r,null)):h&&(h.d(1),h=null),c&16&&s!==(s=`appearance-none border rounded-lg w-full py-2 px-3 leading-tight outline-none read-only:bg-medium-gray read-only:text-gray ${d[4].type=="valid"?"border-lightGray":"border-red"}`)&&p(n,"class",s),c&2&&n.value!==d[1]&&(n.value=d[1]),c&4&&(n.readOnly=d[2]),c&32&&i!==(i=d[5].class)&&p(e,"class",i)},i:G,o:G,d(d){d&&g(e),h&&h.d(),m=!1,f()}}}function Se(a,e,r){let t,{fieldName:l}=e,{value:o}=e,{readonly:n=!1}=e,{onChange:s}=e,{validator:i}=e;const m=f=>{s(f.currentTarget.value)};return a.$$set=f=>{r(5,e=ce(ce({},e),fe(f))),"fieldName"in f&&r(0,l=f.fieldName),"value"in f&&r(1,o=f.value),"readonly"in f&&r(2,n=f.readonly),"onChange"in f&&r(3,s=f.onChange),"validator"in f&&r(6,i=f.validator)},a.$$.update=()=>{a.$$.dirty&66&&r(4,t=i(o))},e=fe(e),[l,o,n,s,t,e,i,m]}class pe extends L{constructor(e){super();O(this,e,Se,He,q,{fieldName:0,value:1,readonly:2,onChange:3,validator:6})}}function Te(a,e,r){return t=>!t||t.length<e?{type:"not_valid",reason:`field "${a}: should be longer than ${e} character`}:t&&t.length>r?{type:"not_valid",reason:`field "${a}" should be shorter than ${r} character`}:{type:"valid"}}function Ae(a){let e,r,t,l,o,n,s,i,m,f,h,d;return r=new pe({props:{fieldName:"Full Name",value:a[0].displayName,onChange:a[7],validator:Te("Display Name",1,32)}}),l=new pe({props:{fieldName:"E-mail",value:a[0].email,onChange:Be,validator:Fe,readonly:!0}}),{c(){e=v("div"),E(r.$$.fragment),t=T(),E(l.$$.fragment),o=T(),n=v("div"),s=v("button"),i=I("Save"),this.h()},l(c){e=b(c,"DIV",{class:!0});var _=$(e);x(r.$$.fragment,_),t=A(_),x(l.$$.fragment,_),o=A(_),n=b(_,"DIV",{class:!0});var P=$(n);s=b(P,"BUTTON",{class:!0});var V=$(s);i=C(V,"Save"),V.forEach(g),P.forEach(g),_.forEach(g),this.h()},h(){s.disabled=a[1],p(s,"class",m=`px-5 py-2 rounded-lg cursor-pointer mr-1 ${a[1]?"bg-medium-gray":"bg-bluelight hover:bg-bluemiddle"}`),p(n,"class","flex flex-row place-content-end"),p(e,"class","flex flex-col space-y-2")},m(c,_){F(c,e,_),w(r,e,null),u(e,t),w(l,e,null),u(e,o),u(e,n),u(n,s),u(s,i),f=!0,h||(d=te(s,"click",a[2]),h=!0)},p(c,[_]){const P={};_&1&&(P.value=c[0].displayName),_&1&&(P.onChange=c[7]),r.$set(P);const V={};_&1&&(V.value=c[0].email),l.$set(V),(!f||_&2)&&(s.disabled=c[1]),(!f||_&2&&m!==(m=`px-5 py-2 rounded-lg cursor-pointer mr-1 ${c[1]?"bg-medium-gray":"bg-bluelight hover:bg-bluemiddle"}`))&&p(s,"class",m)},i(c){f||(y(r.$$.fragment,c),y(l.$$.fragment,c),f=!0)},o(c){k(r.$$.fragment,c),k(l.$$.fragment,c),f=!1},d(c){c&&g(e),N(r),N(l),h=!1,d()}}}function Ue(a){return a.displayName&&a.email&&a.displayName.length>=1&&a.displayName.length<=32}const Be=a=>{},Fe=a=>({type:"valid"});function Ge(a,e,r){let t,l,o,{profile:n}=e,{profileHandler:s}=e,i=Q.clone(n),m=!1;async function f(){try{m=!0;const d=await s.updateProfile(n);r(4,i=Q.clone(n))}finally{m=!1}}const h=d=>r(0,n.displayName=d,n);return a.$$set=d=>{"profile"in d&&r(0,n=d.profile),"profileHandler"in d&&r(3,s=d.profileHandler)},a.$$.update=()=>{a.$$.dirty&17&&r(6,t=Q.isEqual(i,n)),a.$$.dirty&1&&r(5,l=Ue(n)),a.$$.dirty&96&&r(1,o=t||!l)},[n,o,f,s,i,l,t,h]}class Le extends L{constructor(e){super();O(this,e,Ge,Ae,q,{profile:0,profileHandler:3})}}function Oe(a){let e,r;return e=new _e({props:{slot:"topbar"}}),{c(){E(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p:G,i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function qe(a){let e,r,t,l,o,n,s,i,m,f,h,d,c,_,P,V,M,U,X,B,Y,z,Z,re;return s=new Le({props:{profile:a[0],profileHandler:a[1]}}),{c(){e=v("div"),r=v("div"),t=v("div"),l=I("Personal info"),o=T(),n=v("div"),E(s.$$.fragment),i=T(),m=v("div"),f=v("div"),h=I("Danger zone"),d=T(),c=v("div"),_=v("div"),P=v("button"),V=I("Delete profile"),M=T(),U=v("div"),X=I("* The website is in beta stage, in case of any issue feel free to contact "),B=v("a"),Y=I("info@targist.com"),this.h()},l(D){e=b(D,"DIV",{class:!0,slot:!0});var H=$(e);r=b(H,"DIV",{class:!0});var S=$(r);t=b(S,"DIV",{class:!0});var le=$(t);l=C(le,"Personal info"),le.forEach(g),o=A(S),n=b(S,"DIV",{class:!0});var R=$(n);x(s.$$.fragment,R),i=A(R),m=b(R,"DIV",{});var W=$(m);f=b(W,"DIV",{class:!0});var ae=$(f);h=C(ae,"Danger zone"),ae.forEach(g),d=A(W),c=b(W,"DIV",{class:!0});var ne=$(c);_=b(ne,"DIV",{class:!0});var oe=$(_);P=b(oe,"BUTTON",{class:!0});var se=$(P);V=C(se,"Delete profile"),se.forEach(g),oe.forEach(g),ne.forEach(g),W.forEach(g),R.forEach(g),S.forEach(g),M=A(H),U=b(H,"DIV",{class:!0});var J=$(U);X=C(J,"* The website is in beta stage, in case of any issue feel free to contact "),B=b(J,"A",{class:!0,href:!0});var ie=$(B);Y=C(ie,"info@targist.com"),ie.forEach(g),J.forEach(g),H.forEach(g),this.h()},h(){p(t,"class","hero-title"),p(f,"class","text-red"),p(P,"class","px-4 py-2 flex bg-red rounded-md text-light "),p(_,"class",""),p(c,"class","flex flex-col space-y-4 border-2 border-red rounded-lg w-full p-1"),p(n,"class","flex flex-col space-y-4 mt-28"),p(r,"class","flex flex-col my-8"),p(B,"class","text-bluestrong underline"),p(B,"href","mailto:info@targist.com"),p(U,"class","italic text-gray text-sm mt-14"),p(e,"class","flex flex-col mx-auto max-w-screen-md w-full px-3"),p(e,"slot","main")},m(D,H){F(D,e,H),u(e,r),u(r,t),u(t,l),u(r,o),u(r,n),w(s,n,null),u(n,i),u(n,m),u(m,f),u(f,h),u(m,d),u(m,c),u(c,_),u(_,P),u(P,V),u(e,M),u(e,U),u(U,X),u(U,B),u(B,Y),z=!0,Z||(re=te(P,"click",a[2]),Z=!0)},p(D,H){const S={};H&1&&(S.profile=D[0]),H&2&&(S.profileHandler=D[1]),s.$set(S)},i(D){z||(y(s.$$.fragment,D),z=!0)},o(D){k(s.$$.fragment,D),z=!1},d(D){D&&g(e),N(s),Z=!1,re()}}}function ze(a){let e,r;return e=new he({props:{$$slots:{main:[qe],topbar:[Oe]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function Re(a,e,r){let{profile:t}=e,{profileHandler:l}=e;const o=()=>{l.deleteProfile()};return a.$$set=n=>{"profile"in n&&r(0,t=n.profile),"profileHandler"in n&&r(1,l=n.profileHandler)},[t,l,o]}class We extends L{constructor(e){super();O(this,e,Re,ze,q,{profile:0,profileHandler:1})}}function je(a){let e,r;return e=new _e({props:{slot:"topbar"}}),{c(){E(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p:G,i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function Me(a){let e,r,t,l;return{c(){e=v("div"),r=v("div"),t=v("div"),l=I("An error happened while fetching profile."),this.h()},l(o){e=b(o,"DIV",{class:!0,slot:!0});var n=$(e);r=b(n,"DIV",{class:!0});var s=$(r);t=b(s,"DIV",{class:!0});var i=$(t);l=C(i,"An error happened while fetching profile."),i.forEach(g),s.forEach(g),n.forEach(g),this.h()},h(){p(t,"class","text-3xl md:text-5xl text-bluestrong text-center"),p(r,"class","flex flex-col flex-grow w-full h-full items-center place-content-center space-y-6"),p(e,"class","flex flex-col mx-auto max-w-screen-md w-full px-3"),p(e,"slot","main")},m(o,n){F(o,e,n),u(e,r),u(r,t),u(t,l)},d(o){o&&g(e)}}}function Xe(a){let e,r;return e=new he({props:{$$slots:{main:[Me],topbar:[je]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,[l]){const o={};l&2&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function Ye(a,e,r){let{err:t=null}=e;return a.$$set=l=>{"err"in l&&r(0,t=l.err)},a.$$.update=()=>{a.$$.dirty&1&&console.log(t)},[t]}class ve extends L{constructor(e){super();O(this,e,Ye,Xe,q,{err:0})}}function Ze(a){let e,r;return e=new ve({props:{err:a[5]}}),{c(){E(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,l){const o={};l&2&&(o.err=t[5]),e.$set(o)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function Je(a){let e,r,t,l;const o=[Qe,Ke],n=[];function s(i,m){return i[4].body?0:1}return e=s(a),r=n[e]=o[e](a),{c(){r.c(),t=j()},l(i){r.l(i),t=j()},m(i,m){n[e].m(i,m),F(i,t,m),l=!0},p(i,m){let f=e;e=s(i),e===f?n[e].p(i,m):(xe(),k(n[f],1,1,()=>{n[f]=null}),we(),r=n[e],r?r.p(i,m):(r=n[e]=o[e](i),r.c()),y(r,1),r.m(t.parentNode,t))},i(i){l||(y(r),l=!0)},o(i){k(r),l=!1},d(i){n[e].d(i),i&&g(t)}}}function Ke(a){let e,r;return e=new ve({}),{c(){E(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p:G,i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function Qe(a){let e,r;return e=new We({props:{profile:a[4].body.profile,profileHandler:a[0]}}),{c(){E(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,l){const o={};l&2&&(o.profile=t[4].body.profile),l&1&&(o.profileHandler=t[0]),e.$set(o)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function et(a){let e,r;return e=new Ne({}),{c(){E(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p:G,i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function tt(a){let e,r,t,l={ctx:a,current:null,token:null,hasCatch:!0,pending:et,then:Je,catch:Ze,value:4,error:5,blocks:[,,,]};return ue(r=a[1],l),{c(){e=j(),l.block.c()},l(o){e=j(),l.block.l(o)},m(o,n){F(o,e,n),l.block.m(o,l.anchor=n),l.mount=()=>e.parentNode,l.anchor=e,t=!0},p(o,[n]){a=o,l.ctx=a,n&2&&r!==(r=a[1])&&ue(r,l)||Ee(l,a,n)},i(o){t||(y(l.block),t=!0)},o(o){for(let n=0;n<3;n+=1){const s=l.blocks[n];k(s)}t=!1},d(o){o&&g(e),l.block.d(o),l.token=null,l=null}}}function rt(a,e,r){let t,l;const o=de.firebaseStore,n=de.auth.currentUser;return a.$$.update=()=>{a.$$.dirty&1&&r(1,l=t.getProfile())},r(0,t=new Ve(n,o)),[t,l]}class lt extends L{constructor(e){super();O(this,e,rt,tt,q,{})}}function at(a){let e,r;return e=new lt({}),{c(){E(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}function nt(a){let e,r;return e=new De({props:{denyIfNotAuthenticated:!0,$$slots:{default:[at]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){N(e,t)}}}class ut extends L{constructor(e){super();O(this,e,null,nt,q,{})}}export{ut as default};
